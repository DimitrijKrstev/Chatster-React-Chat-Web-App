/*! For license information please see main.4fc84501.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case C:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,xe=null;function Ce(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Se(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ie(e,t,n)}finally{Pe=!1,(null!==Ee||null!==xe)&&(Ne(),Se())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Et,xt,Ct,Tt=!1,St=[],It=null,Nt=null,Pt=null,Rt=new Map,At=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Ct(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Pt&&Ut(Pt)&&(Pt=null),Rt.forEach(jt),At.forEach(jt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<St.length){qt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&qt(It,e),null!==Nt&&qt(Nt,e),null!==Pt&&qt(Pt,e),Rt.forEach(t),At.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Cn(){return xn}var Tn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(Tn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},xr={};function Cr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Cr("animationend"),Sr=Cr("animationiteration"),Ir=Cr("animationstart"),Nr=Cr("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Pr.set(e,t),u(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Ar(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Ar(Tr,"onAnimationEnd"),Ar(Sr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Tr:case Sr:case Ir:u=mn;break;case Nr:u=Pn;break;case"scroll":u=fn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ae(p,f))&&l.push(Hr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Xn;else if(Wn(s))if(Jn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(m=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),$t=Zt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ae(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Ae(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],Ei=-1;function xi(e){return{current:e}}function Ci(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ti(e,t){Ei++,_i[Ei]=e.current,e.current=t}var Si={},Ii=xi(Si),Ni=xi(!1),Pi=Si;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ci(Ni),Ci(Ii)}function Oi(e,t,n){if(Ii.current!==Si)throw Error(a(168));Ti(Ii,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Pi=Ii.current,Ti(Ii,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ni),Ci(Ii),Ti(Ii,e)):Ci(Ni),Ti(Ni,n)}var Ui=null,ji=!1,Vi=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge($e,Bi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){zi[Wi++]=Ki,zi[Wi++]=Hi,Hi=e,Ki=t}function $i(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Hi;)Hi=zi[--Wi],zi[Wi]=null,Ki=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=xi(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Ci(ma),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Sa(e){null===Ta?Ta=[e]:Ta.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function za(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ca(a):(i=Ai(t)?Pi:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ca(a):(a=Ai(t)?Pi:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),ia&&Zi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Zi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}function y(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Zi(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return ia&&Zi(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Oc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),Za={},$a=xi(Za),eo=xi(Za),to=xi(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci($a),Ti($a,t)}function io(){Ci($a),Ci(eo),Ci(to)}function ao(e){no(to.current);var t=no($a.current),n=ue(t,e.type);t!==n&&(Ti(eo,e),Ti($a,n))}function oo(e){eo.current===e&&(Ci($a),Ci(eo))}var so=xi(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Co(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function So(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Mu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Ao(e,t){var n=vo,r=So(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return So().memoizedState}function qo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function zo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return So().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Sa(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ca,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ca,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Nu.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ca,useCallback:Xo,useContext:Ca,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(So(),yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ca,useCallback:Xo,useContext:Ca,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:Po,useRef:Vo,useState:function(){return Po(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=So();return null===yo?t.memoizedState=e:Zo(t,yo.memoizedState,e)},useTransition:function(){return[Po(Io)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Hu=r),fs(0,t)},n}function vs(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return xa(t,i),r=xo(e,t,n,r,a,i),n=Co(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function xs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ss(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Du,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Du,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Du,Au),Au|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Du,Au),Au|=r;return ws(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,i){var a=Ai(n)?Pi:Ii.current;return a=Ri(t,a),xa(t,i),n=xo(e,t,n,r,a,i),r=Co(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(Ai(n)){var a=!0;Mi(t)}else a=!1;if(xa(t,i),null===t.stateNode)zs(e,t),za(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ca(c):c=Ri(t,c=Ai(n)?Pi:Ii.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Pa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Pa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Pa||Ba(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ca(u):u=Ri(t,u=Ai(n)?Pi:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Wa(t,o,r,u),Pa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Pa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Pa||Ba(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var As,Ds,Os,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),js(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),(t=Us(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Ai(t.type)&&Di(),Ks(t),null;case 3:return r=t.stateNode,io(),Ci(Ni),Ci(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no($a.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":K(r),$(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,As(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ci(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ou&&(Ou=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Ks(t),null;case 10:return _a(t.type._context),Ks(t),null;case 19:if(Ci(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*Je()-o.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Ti(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Ni),Ci(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){xc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||$s(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Xs&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(y){xc(e,e.return,y)}try{nu(5,e,e.return)}catch(y){xc(e,e.return,y)}}break;case 1:vu(t,e),mu(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(vu(t,e),mu(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){xc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){xc(e,e.return,y)}}break;case 6:if(vu(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){xc(e,e.return,y)}}break;case 3:if(vu(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){xc(e,e.return,y)}break;case 4:default:vu(t,e),mu(e);break;case 13:vu(t,e),mu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=Je())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||h,vu(t,e),Xs=l):vu(t,e),mu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:$s(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){xc(r,n,y)}}break;case 5:$s(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Zs=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){xc(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){xc(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Zs=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=o,(Xs=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Zs=u):_u(i);for(;null!==a;)Zs=a,ku(a,t,n),a=a.sibling;Zs=i,Ys=s,Xs=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):bu(e)}}function bu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&iu(t)}catch(d){xc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){xc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){xc(t,i,u)}}var a=t.return;try{iu(t)}catch(u){xc(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){xc(t,o,u)}}}catch(u){xc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Eu,xu=Math.ceil,Cu=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Su=b.ReactCurrentBatchConfig,Iu=0,Nu=null,Pu=null,Ru=0,Au=0,Du=xi(0),Ou=0,Lu=null,Mu=0,Fu=0,Uu=0,ju=null,Vu=null,qu=0,Bu=1/0,zu=null,Wu=!1,Hu=null,Ku=null,Gu=!1,Qu=null,Yu=0,Xu=0,Ju=null,Zu=-1,$u=0;function ec(){return 0!==(6&Iu)?Je():-1!==Zu?Zu:Zu=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Ru?Ru&-Ru:null!==va.transition?(0===$u&&($u=vt()),$u):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));mt(e,n,r),0!==(2&Iu)&&e===Nu||(e===Nu&&(0===(2&Iu)&&(Fu|=n),4===Ou&&sc(e,Ru)),rc(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(Bu=Je()+500,ji&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Nu?Ru:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,qi(e)}(uc.bind(null,e)):qi(uc.bind(null,e)),oi((function(){0===(6&Iu)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zu=-1,$u=0,0!==(6&Iu))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Iu;Iu|=2;var o=pc();for(Nu===e&&Ru===t||(zu=null,Bu=Je()+500,fc(e,t));;)try{gc();break}catch(u){dc(e,u)}wa(),Cu.current=o,Iu=i,null!==Pu?t=0:(Nu=null,Ru=0,t=Ou)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vu,zu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qu+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vu,zu),t);break}wc(e,Vu,zu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xu(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vu,zu),r);break}wc(e,Vu,zu);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vu,Vu=n,null!==t&&oc(t)),e}function oc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Iu))throw Error(a(327));_c();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vu,zu),rc(e,Je()),null}function cc(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(Bu=Je()+500,ji&&Bi())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&Iu)&&_c();var t=Iu;Iu|=1;var n=Su.transition,r=kt;try{if(Su.transition=null,kt=1,e)return e()}finally{kt=r,Su.transition=n,0===(6&(Iu=t))&&Bi()}}function hc(){Au=Du.current,Ci(Du)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ci(Ni),Ci(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(so);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nu=e,Pu=e=Dc(e.current,null),Ru=Au=t,Ou=0,Lu=null,Uu=Fu=Mu=0,Vu=ju=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dc(e,t){for(;;){var n=Pu;try{if(wa(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Tu.current=null,null===n||null===n.return){Ou=1,Lu=t,Pu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ru,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Ou&&(Ou=2),null===ju?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ku||!Ku.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function pc(){var e=Cu.current;return Cu.current=os,null===e?os:e}function vc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Nu||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Nu,Ru)}function yc(e,t){var n=Iu;Iu|=2;var r=pc();for(Nu===e&&Ru===t||(zu=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Iu=n,Cu.current=r,null!==Pu)throw Error(a(261));return Nu=null,Ru=0,Ou}function mc(){for(;null!==Pu;)kc(Pu)}function gc(){for(;null!==Pu&&!Ye();)kc(Pu)}function kc(e){var t=Eu(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?bc(e):Pu=t,Tu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Au)))return void(Pu=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Ou=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Ou&&(Ou=5)}function wc(e,t,n){var r=kt,i=Su.transition;try{Su.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qu);if(0!==(6&Iu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Pu=Nu=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Su.transition,Su.transition=null;var s=kt;kt=1;var u=Iu;Iu|=4,Tu.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){xc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=tu,tu=!1}(e,n),yu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Xe(),Iu=u,kt=s,Su.transition=o}else e.current=n;if(Gu&&(Gu=!1,Qu=e,Yu=i),0===(o=e.pendingLanes)&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Hu,Hu=null,e;0!==(1&Yu)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,Bi()}(e,t,n,r)}finally{Su.transition=i,kt=r}return null}function _c(){if(null!==Qu){var e=bt(Yu),t=Su.transition,n=kt;try{if(Su.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Yu=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(au(h),h===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){xc(u,u.return,_)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Iu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Su.transition=t}}return!1}function Ec(e,t,n){e=Oa(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function xc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Oa(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ru&n)===n&&(4===Ou||3===Ou&&(130023424&Ru)===Ru&&500>Je()-qu?fc(e,0):Uu|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ac(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case x:s=8,i|=8;break;case C:return(e=Rc(12,n,t,2|i)).elementType=C,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case S:s=9;break e;case I:s=11;break e;case R:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new jc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Si;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ti(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ti(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);xa(t,n),i=xo(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ea(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xa(t,n),r=r(i=Ca(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Es(e,t,r,i=ya(r.type,i),n);case 15:return xs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zs(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,xa(t,n),za(t,r,i),Ha(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Cs(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Iu)&&(Bu=Je()+500,Bi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},xt=function(){return kt},Ct=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Se,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,C=null,T=-1,S=5,I=-1;function N(){return!(t.unstable_now()-I<S)}function P(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?E():(x=!1,C=null)}}else x=!1}if("function"===typeof k)E=function(){k(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=P,E=function(){A.postMessage(null)}}else E=function(){m(P,0)};function D(e){C=e,x||(x=!0,E())}function O(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Chatster-chat_app/";var r={};!function(){n.d(r,{I:function(){return bN},t:function(){return wN}});var e=n(791),t=n.t(e,2),i=n(250);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,n){return d=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i},d.apply(null,arguments)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function y(){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},y.apply(this,arguments)}function m(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function k(){k=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(T([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==g(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function b(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(Lv){return void n(Lv)}s.done?t(u):Promise.resolve(u).then(r,i)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){b(a,r,i,o,s,"next",e)}function s(e){b(a,r,i,o,s,"throw",e)}o(void 0)}))}}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"===g(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function C(e){var t=f();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function T(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e){var t="function"===typeof Map?new Map:void 0;return P=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return d(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},P(e)}var R=!1,A=!1,D="${JSCORE_VERSION}",O=function(e,t){if(!e)throw L(t)},L=function(e){return new Error("Firebase Database ("+D+") INTERNAL ASSERT FAILED: "+e)},M=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},F={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(M(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},U=function(e){var t=M(e);return F.encodeByteArray(t,!0)},j=function(e){return U(e).replace(/\./g,"")},V=function(e){try{return F.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function q(e){return B(void 0,e)}function B(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=B(e[n],t[n]));return e}var z=function(){function e(){var t=this;S(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return N(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function W(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function H(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(W())}function K(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function G(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Q(){var e=W();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Y(){return!0===R||!0===A}function X(){return"object"===typeof indexedDB}function J(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Lv){t(Lv)}}))}var Z=function(e){_(n,e);var t=C(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(E(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(E(a),$.prototype.create),a}return N(n)}(P(Error)),$=function(){function e(t,n,r){S(this,e),this.service=t,this.serviceName=n,this.errors=r}return N(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ee(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Z(n,a,t);return o}}]),e}();function ee(e,t){return e.replace(te,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var te=/\{\$([^}]+)}/g;function ne(e){return JSON.parse(e)}function re(e){return JSON.stringify(e)}var ie=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ne(V(a[0])||""),n=ne(V(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ae(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oe(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function se(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ue(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ce(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(le(s)&&le(u)){if(!ce(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function le(e){return null!==e&&"object"===typeof e}function he(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function fe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function de(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var pe=function(){function e(){S(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return N(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var ve=function(){function e(t,n){var r=this;S(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return N(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=m(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ye),void 0===r.error&&(r.error=ye),void 0===r.complete&&(r.complete=ye);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ye(){}function me(e,t){return"".concat(e," failed: ").concat(t," argument ")}var ge=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},ke=144e5;function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(ke,r+i)}function we(e){return e&&e._delegate?e._delegate:e}var _e=function(){function e(t,n,r){S(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return N(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ee="[DEFAULT]",xe=function(){function e(t,n){S(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return N(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new z;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(u){}var t,n=m(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(T(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),T(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=m(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Kf){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ee?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Kf){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.component?this.component.multipleInstances?e:Ee:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ce,Te,Se=function(){function e(t){S(this,e),this.name=t,this.providers=new Map}return N(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new xe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ie=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Te||(Te={}));var Ne={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Pe=Te.INFO,Re=(a(Ce={},Te.DEBUG,"log"),a(Ce,Te.VERBOSE,"log"),a(Ce,Te.INFO,"info"),a(Ce,Te.WARN,"warn"),a(Ce,Te.ERROR,"error"),Ce),Ae=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Re[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},De=function(){function e(t){S(this,e),this.name=t,this._logLevel=Pe,this._logHandler=Ae,this._userLogHandler=null,Ie.push(this)}return N(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Te))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ne[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.DEBUG].concat(t)),this._logHandler.apply(this,[this,Te.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Te.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.INFO].concat(t)),this._logHandler.apply(this,[this,Te.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.WARN].concat(t)),this._logHandler.apply(this,[this,Te.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.ERROR].concat(t)),this._logHandler.apply(this,[this,Te.ERROR].concat(t))}}]),e}();var Oe,Le;var Me=new WeakMap,Fe=new WeakMap,Ue=new WeakMap,je=new WeakMap,Ve=new WeakMap;var qe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Fe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ue.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return We(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Be(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(He(this),n),We(Me.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return We(e.apply(He(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[He(this),t].concat(r));return Ue.set(a,t.sort?t.sort():[t]),We(a)}}function ze(e){return"function"===typeof e?Be(e):(e instanceof IDBTransaction&&function(e){if(!Fe.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Fe.set(e,t)}}(e),t=e,(Oe||(Oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,qe):e);var t}function We(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(We(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Me.set(t,e)})).catch((function(){})),Ve.set(t,e),t}(e);if(je.has(e))return je.get(e);var t=ze(e);return t!==e&&(je.set(e,t),Ve.set(t,e)),t}var He=function(e){return Ve.get(e)};var Ke,Ge,Qe=["get","getKey","getAll","getAllKeys","count"],Ye=["put","add","delete","clear"],Xe=new Map;function Je(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Xe.get(t))return Xe.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ye.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Qe.includes(n))){var a=function(){var e=w(k().mark((function e(t){var a,o,s,u,c,l,h=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Xe.set(t,a),a}}}qe=function(e){return s(s({},e),{},{get:function(t,n,r){return Je(t,n)||e.get(t,n,r)},has:function(t,n){return!!Je(t,n)||e.has(t,n)}})}(qe);var Ze=function(){function e(t){S(this,e),this.container=t}return N(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var $e="@firebase/app",et="0.7.28",tt=new De("@firebase/app"),nt="[DEFAULT]",rt=(a(Ke={},$e,"fire-core"),a(Ke,"@firebase/app-compat","fire-core-compat"),a(Ke,"@firebase/analytics","fire-analytics"),a(Ke,"@firebase/analytics-compat","fire-analytics-compat"),a(Ke,"@firebase/app-check","fire-app-check"),a(Ke,"@firebase/app-check-compat","fire-app-check-compat"),a(Ke,"@firebase/auth","fire-auth"),a(Ke,"@firebase/auth-compat","fire-auth-compat"),a(Ke,"@firebase/database","fire-rtdb"),a(Ke,"@firebase/database-compat","fire-rtdb-compat"),a(Ke,"@firebase/functions","fire-fn"),a(Ke,"@firebase/functions-compat","fire-fn-compat"),a(Ke,"@firebase/installations","fire-iid"),a(Ke,"@firebase/installations-compat","fire-iid-compat"),a(Ke,"@firebase/messaging","fire-fcm"),a(Ke,"@firebase/messaging-compat","fire-fcm-compat"),a(Ke,"@firebase/performance","fire-perf"),a(Ke,"@firebase/performance-compat","fire-perf-compat"),a(Ke,"@firebase/remote-config","fire-rc"),a(Ke,"@firebase/remote-config-compat","fire-rc-compat"),a(Ke,"@firebase/storage","fire-gcs"),a(Ke,"@firebase/storage-compat","fire-gcs-compat"),a(Ke,"@firebase/firestore","fire-fst"),a(Ke,"@firebase/firestore-compat","fire-fst-compat"),a(Ke,"fire-js","fire-js"),a(Ke,"firebase","fire-js-all"),Ke),it=new Map,at=new Map;function ot(e,t){try{e.container.addComponent(t)}catch(n){tt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function st(e){var t=e.name;if(at.has(t))return tt.debug("There were multiple attempts to register component ".concat(t,".")),!1;at.set(t,e);var n,r=m(it.values());try{for(r.s();!(n=r.n()).done;){ot(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ut(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var ct=(a(Ge={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),a(Ge,"bad-app-name","Illegal App name: '{$appName}"),a(Ge,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),a(Ge,"app-deleted","Firebase App named '{$appName}' already deleted"),a(Ge,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),a(Ge,"invalid-log-argument","First argument to `onLog` must be null or a function."),a(Ge,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),a(Ge,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),a(Ge,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),a(Ge,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ge),lt=new $("app","Firebase",ct),ht=function(){function e(t,n,r){var i=this;S(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _e("app",(function(){return i}),"PUBLIC"))}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw lt.create("app-deleted",{appName:this._name})}}]),e}(),ft="9.9.0";function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=it.get(e);if(!t)throw lt.create("no-app",{appName:e});return t}function pt(e,t,n){var r,i=null!==(r=rt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void tt.warn(s.join(" "))}st(new _e("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var vt="firebase-heartbeat-store",yt=null;function mt(){return yt||(yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=We(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(We(s.result),e.oldVersion,e.newVersion,We(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(vt)}}).catch((function(e){throw lt.create("storage-open",{originalErrorMessage:e.message})}))),yt}function gt(e){return kt.apply(this,arguments)}function kt(){return kt=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt();case 3:return r=e.sent,e.abrupt("return",r.transaction(vt).objectStore(vt).get(_t(t)));case 7:throw e.prev=7,e.t0=e.catch(0),lt.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),kt.apply(this,arguments)}function bt(e,t){return wt.apply(this,arguments)}function wt(){return wt=w(k().mark((function e(t,n){var r,i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt();case 3:return i=e.sent,a=i.transaction(vt,"readwrite"),o=a.objectStore(vt),e.next=8,o.put(n,_t(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),lt.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),wt.apply(this,arguments)}function _t(e){return"".concat(e.name,"!").concat(e.options.appId)}var Et=function(){function e(t){var n=this;S(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new St(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return N(e,[{key:"triggerHeartbeat",value:function(){var e=w(k().mark((function e(){var t,n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=xt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=w(k().mark((function e(){var t,n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=xt(),n=Ct(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=j(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xt(){return(new Date).toISOString().substring(0,10)}function Ct(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=m(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),It(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),It(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Tt,St=function(){function e(t){S(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return N(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",J().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,gt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",bt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",bt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(T(r.heartbeats),T(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function It(e){return j(JSON.stringify({version:2,heartbeats:e})).length}Tt="",st(new _e("platform-logger",(function(e){return new Ze(e)}),"PRIVATE")),st(new _e("heartbeat",(function(e){return new Et(e)}),"PRIVATE")),pt($e,et,Tt),pt($e,et,"esm2017"),pt("fire-js","");var Nt,Pt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Rt={},At=At||{},Dt=Pt||self;function Ot(){}function Lt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Mt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ft="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function jt(e,t,n){return e.call.apply(e.bind,arguments)}function Vt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function qt(e,t,n){return(qt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jt:Vt).apply(null,arguments)}function Bt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zt(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Wt(){this.s=this.s,this.o=this.o}var Ht={};Wt.prototype.s=!1,Wt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ft)&&e[Ft]||(e[Ft]=++Ut)}(this);delete Ht[e]}},Wt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Kt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Gt=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Qt(e){return Array.prototype.concat.apply([],arguments)}function Yt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Xt(e){return/^[\s\xa0]*$/.test(e)}var Jt,Zt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function $t(e,t){return-1!=e.indexOf(t)}function en(e,t){return e<t?-1:e>t?1:0}e:{var tn=Dt.navigator;if(tn){var nn=tn.userAgent;if(nn){Jt=nn;break e}}Jt=""}function rn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function an(e){var t={};for(var n in e)t[n]=e[n];return t}var on="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<on.length;a++)n=on[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function un(e){return un[" "](e),e}un[" "]=Ot;var cn,ln=$t(Jt,"Opera"),hn=$t(Jt,"Trident")||$t(Jt,"MSIE"),fn=$t(Jt,"Edge"),dn=fn||hn,pn=$t(Jt,"Gecko")&&!($t(Jt.toLowerCase(),"webkit")&&!$t(Jt,"Edge"))&&!($t(Jt,"Trident")||$t(Jt,"MSIE"))&&!$t(Jt,"Edge"),vn=$t(Jt.toLowerCase(),"webkit")&&!$t(Jt,"Edge");function yn(){var e=Dt.document;return e?e.documentMode:void 0}e:{var mn="",gn=function(){var e=Jt;return pn?/rv:([^\);]+)(\)|;)/.exec(e):fn?/Edge\/([\d\.]+)/.exec(e):hn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):vn?/WebKit\/(\S+)/.exec(e):ln?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(gn&&(mn=gn?gn[1]:""),hn){var kn=yn();if(null!=kn&&kn>parseFloat(mn)){cn=String(kn);break e}}cn=mn}var bn,wn={};function _n(){return function(e){var t=wn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Zt(String(cn)).split("."),n=Zt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=en(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||en(0==a[2].length,0==o[2].length)||en(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Dt.document&&hn){var En=yn();bn=En||(parseInt(cn,10)||void 0)}else bn=void 0;var xn=bn,Cn=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Dt.addEventListener("test",Ot,t),Dt.removeEventListener("test",Ot,t)}catch(n){}return e}();function Tn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Sn(e,t){if(Tn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(pn){e:{try{un(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:In[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sn.Z.h.call(this)}}Tn.prototype.h=function(){this.defaultPrevented=!0},zt(Sn,Tn);var In={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Nn="closure_listenable_"+(1e6*Math.random()|0),Pn=0;function Rn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Pn,this.ca=this.fa=!1}function An(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Dn(e){this.src=e,this.g={},this.h=0}function On(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Kt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(An(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ln(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Dn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ln(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Rn(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Mn="closure_lm_"+(1e6*Math.random()|0),Fn={};function Un(e,t,n,r,i){if(r&&r.once)return Vn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Un(e,t[a],n,r,i);return null}return n=Gn(n),e&&e[Nn]?e.N(t,n,Mt(r)?!!r.capture:!!r,i):jn(e,t,n,!1,r,i)}function jn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Mt(i)?!!i.capture:!!i,s=Hn(e);if(s||(e[Mn]=s=new Dn(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Wn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Cn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(zn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Vn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Vn(e,t[a],n,r,i);return null}return n=Gn(n),e&&e[Nn]?e.O(t,n,Mt(r)?!!r.capture:!!r,i):jn(e,t,n,!0,r,i)}function qn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)qn(e,t[a],n,r,i);else r=Mt(r)?!!r.capture:!!r,n=Gn(n),e&&e[Nn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ln(a=e.g[t],n,r,i))&&(An(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Hn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ln(t,n,r,i)),(n=-1<e?t[e]:null)&&Bn(n))}function Bn(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Nn])On(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(zn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Hn(t))?(On(n,e),0==n.h&&(n.src=null,t[Mn]=null)):An(e)}}}function zn(e){return e in Fn?Fn[e]:Fn[e]="on"+e}function Wn(e,t){if(e.ca)e=!0;else{t=new Sn(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Bn(e),e=n.call(r,t)}return e}function Hn(e){return(e=e[Mn])instanceof Dn?e:null}var Kn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gn(e){return"function"===typeof e?e:(e[Kn]||(e[Kn]=function(t){return e.handleEvent(t)}),e[Kn])}function Qn(){Wt.call(this),this.i=new Dn(this),this.P=this,this.I=null}function Yn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Tn(t,e);else if(t instanceof Tn)t.target=t.target||e;else{var i=t;sn(t=new Tn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Xn(o,r,!0,t)&&i}if(i=Xn(o=t.g=e,r,!0,t)&&i,i=Xn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Xn(o=t.g=n[a],r,!1,t)&&i}function Xn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&On(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}zt(Qn,Wt),Qn.prototype[Nn]=!0,Qn.prototype.removeEventListener=function(e,t,n,r){qn(this,e,t,n,r)},Qn.prototype.M=function(){if(Qn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)An(n[r]);delete t.g[e],t.h--}}this.I=null},Qn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Qn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Jn=Dt.JSON.stringify;function Zn(){var e=or,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var $n,er=function(){function e(){S(this,e),this.h=this.g=null}return N(e,[{key:"add",value:function(e,t){var n=tr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),tr=new(function(){function e(t,n){S(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return N(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new nr}),(function(e){return e.reset()})),nr=function(){function e(){S(this,e),this.next=this.g=this.h=null}return N(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function rr(e){Dt.setTimeout((function(){throw e}),0)}function ir(e,t){$n||function(){var e=Dt.Promise.resolve(void 0);$n=function(){e.then(sr)}}(),ar||($n(),ar=!0),or.add(e,t)}var ar=!1,or=new er;function sr(){for(var e;e=Zn();){try{e.h.call(e.g)}catch(n){rr(n)}var t=tr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ar=!1}function ur(e,t){Qn.call(this),this.h=e||1,this.g=t||Dt,this.j=qt(this.kb,this),this.l=Date.now()}function cr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function lr(e,t,n){if("function"===typeof e)n&&(e=qt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=qt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Dt.setTimeout(e,t||0)}function hr(e){e.g=lr((function(){e.g=null,e.i&&(e.i=!1,hr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}zt(ur,Qn),(Nt=ur.prototype).da=!1,Nt.S=null,Nt.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Yn(this,"tick"),this.da&&(cr(this),this.start()))}},Nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Nt.M=function(){ur.Z.M.call(this),cr(this),delete this.g};var fr=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return N(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:hr(this)}},{key:"M",value:function(){y(p(n.prototype),"M",this).call(this),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Wt);function dr(e){Wt.call(this),this.h=e,this.g={}}zt(dr,Wt);var pr=[];function vr(e,t,n,r){Array.isArray(n)||(n&&(pr[0]=n.toString()),n=pr);for(var i=0;i<n.length;i++){var a=Un(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function yr(e){rn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Bn(e)}),e),e.g={}}function mr(){this.g=!0}function gr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Jn(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}dr.prototype.M=function(){dr.Z.M.call(this),yr(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mr.prototype.Aa=function(){this.g=!1},mr.prototype.info=function(){};var kr={},br=null;function wr(){return br=br||new Qn}function _r(e){Tn.call(this,kr.Ma,e)}function Er(e){var t=wr();Yn(t,new _r(t,e))}function xr(e,t){Tn.call(this,kr.STAT_EVENT,e),this.stat=t}function Cr(e){var t=wr();Yn(t,new xr(t,e))}function Tr(e,t){Tn.call(this,kr.Na,e),this.size=t}function Sr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Dt.setTimeout((function(){e()}),t)}kr.Ma="serverreachability",zt(_r,Tn),kr.STAT_EVENT="statevent",zt(xr,Tn),kr.Na="timingevent",zt(Tr,Tn);var Ir={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Nr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Pr(){}function Rr(e){return e.h||(e.h=e.i())}function Ar(){}Pr.prototype.h=null;var Dr,Or={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Lr(){Tn.call(this,"d")}function Mr(){Tn.call(this,"c")}function Fr(){}function Ur(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new dr(this),this.P=Vr,e=dn?125:void 0,this.W=new ur(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new jr}function jr(){this.i=null,this.g="",this.h=!1}zt(Lr,Tn),zt(Mr,Tn),zt(Fr,Pr),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Dr=new Fr;var Vr=45e3,qr={},Br={};function zr(e,t,n){e.K=1,e.v=fi(oi(t)),e.s=n,e.U=!0,Wr(e,null)}function Wr(e,t){e.F=Date.now(),Qr(e),e.A=oi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ci(n.h,"t",r),e.C=0,n=e.l.H,e.h=new jr,e.g=Sa(e.l,n?t:null,!e.s),0<e.O&&(e.L=new fr(qt(e.Ia,e,e.g),e.O)),vr(e.V,e.g,"readystatechange",e.gb),t=e.H?an(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Er(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Hr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Kr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Gr(e,n))==Br){4==t&&(e.o=4,Cr(14),i=!1),gr(e.j,e.m,null,"[Incomplete Response]");break}if(r==qr){e.o=4,Cr(15),gr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}gr(e.j,e.m,r,null),$r(e,r)}Hr(e)&&r!=Br&&r!=qr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Cr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ka(t),t.L=!0,Cr(11))):(gr(e.j,e.m,n,"[Invalid Chunked Response]"),Zr(e),Jr(e))}function Gr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Br:(n=Number(t.substring(n,r)),isNaN(n)?qr:(r+=1)+n>t.length?Br:(t=t.substr(r,n),e.C=r+n,t))}function Qr(e){e.Y=Date.now()+e.P,Yr(e,e.P)}function Yr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Sr(qt(e.eb,e),t)}function Xr(e){e.B&&(Dt.clearTimeout(e.B),e.B=null)}function Jr(e){0==e.l.G||e.I||_a(e.l,e)}function Zr(e){Xr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,cr(e.W),yr(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function $r(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Di(n.i,e)))if(n.I=e.N,!e.J&&Di(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;wa(n),la(n)}ga(n),Cr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Sr(qt(n.ab,n),6e3));if(1>=Ai(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else xa(n,11)}else if((e.J||n.g==e)&&wa(n),!Xt(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&($t(l,"spdy")||$t(l,"quic")||$t(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Oi(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,hi(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ta(r,r.H?r.la:null,r.W),d.J){Li(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Xr(p),Qr(p)),r.g=d}else ma(r);0<n.l.length&&da(n)}else"stop"!=a[0]&&"close"!=a[0]||xa(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?xa(n,7):ca(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Er(4)}catch(a){}}function ei(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Lt(e)||"string"===typeof e)Gt(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Lt(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Lt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ti(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ti)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ni(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ri(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ri(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ri(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Nt=Ur.prototype).setTimeout=function(e){this.P=e},Nt.gb=function(e){e=e.target;var t=this.L;t&&3==ia(e)?t.l():this.Ia(e)},Nt.Ia=function(e){try{if(e==this.g)e:{var t=ia(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||dn||this.g&&(this.h.h||this.g.ga()||aa(this.g)))){this.I||4!=t||7==n||Er(8==n||0>=r?3:2),Xr(this);var i=this.g.ba();this.N=i;t:if(Hr(this)){var a=aa(this.g);e="";var o=a.length,s=4==ia(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Zr(this),Jr(this);var u="";break t}this.h.i=new Dt.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xt(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Cr(12),Zr(this),Jr(this);break e}gr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$r(this,i)}this.U?(Kr(this,t,u),dn&&this.i&&3==t&&(vr(this.V,this.W,"tick",this.fb),this.W.start())):(gr(this.j,this.m,u,null),$r(this,u)),4==t&&Zr(this),this.i&&!this.I&&(4==t?_a(this.l,this):(this.i=!1,Qr(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Cr(12)):(this.o=0,Cr(13)),Zr(this),Jr(this)}}}catch(t){}},Nt.fb=function(){if(this.g){var e=ia(this.g),t=this.g.ga();this.C<t.length&&(Xr(this),Kr(this,e,t),this.i&&4!=e&&Qr(this))}},Nt.cancel=function(){this.I=!0,Zr(this)},Nt.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Er(3),Cr(17)),Zr(this),this.o=2,Jr(this)):Yr(this,this.Y-e)},(Nt=ti.prototype).R=function(){ni(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Nt.T=function(){return ni(this),this.g.concat()},Nt.get=function(e,t){return ri(this.h,e)?this.h[e]:t},Nt.set=function(e,t){ri(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Nt.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ii=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ai(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ai){this.g=void 0!==t?t:e.g,si(this,e.j),this.s=e.s,ui(this,e.i),ci(this,e.m),this.l=e.l,t=e.h;var n=new wi;n.i=t.i,t.g&&(n.g=new ti(t.g),n.h=t.h),li(this,n),this.o=e.o}else e&&(n=String(e).match(ii))?(this.g=!!t,si(this,n[1]||"",!0),this.s=di(n[2]||""),ui(this,n[3]||"",!0),ci(this,n[4]),this.l=di(n[5]||"",!0),li(this,n[6]||"",!0),this.o=di(n[7]||"")):(this.g=!!t,this.h=new wi(null,this.g))}function oi(e){return new ai(e)}function si(e,t,n){e.j=n?di(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ui(e,t,n){e.i=n?di(t,!0):t}function ci(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function li(e,t,n){t instanceof wi?(e.h=t,function(e,t){t&&!e.j&&(_i(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ei(this,t),Ci(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=pi(t,ki)),e.h=new wi(t,e.g))}function hi(e,t,n){e.h.set(t,n)}function fi(e){return hi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function di(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,vi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ai.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pi(t,yi,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(pi(t,yi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(pi(n,"/"==n.charAt(0)?gi:mi,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",pi(n,bi)),e.join("")};var yi=/[#\/\?@]/g,mi=/[#\?:]/g,gi=/[#\?]/g,ki=/[#\?@]/g,bi=/#/g;function wi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _i(e){e.g||(e.g=new ti,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ei(e,t){_i(e),t=Ti(e,t),ri(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ri((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ni(e)))}function xi(e,t){return _i(e),t=Ti(e,t),ri(e.g.h,t)}function Ci(e,t,n){Ei(e,t),0<n.length&&(e.i=null,e.g.set(Ti(e,t),Yt(n)),e.h+=n.length)}function Ti(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Nt=wi.prototype).add=function(e,t){_i(this),this.i=null,e=Ti(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Nt.forEach=function(e,t){_i(this),this.g.forEach((function(n,r){Gt(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Nt.T=function(){_i(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Nt.R=function(e){_i(this);var t=[];if("string"===typeof e)xi(this,e)&&(t=Qt(t,this.g.get(Ti(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Qt(t,e[n])}return t},Nt.set=function(e,t){return _i(this),this.i=null,xi(this,e=Ti(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Nt.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Si=N((function e(t,n){S(this,e),this.h=t,this.g=n}));function Ii(e){this.l=e||Pi,Dt.PerformanceNavigationTiming?e=0<(e=Dt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ni,Pi=10;function Ri(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ai(e){return e.h?1:e.g?e.g.size:0}function Di(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Oi(e,t){e.g?e.g.add(t):e.h=t}function Li(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Mi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=m(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Yt(e.i)}function Fi(){}function Ui(){this.g=new Fi}function ji(e,t,n){var r=n||"";try{ei(e,(function(e,n){var i=e;Mt(e)&&(i=Jn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function qi(e){this.l=e.$b||null,this.j=e.ib||!1}function Bi(e,t){Qn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=zi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ii.prototype.cancel=function(){if(this.i=Mi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=m(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Fi.prototype.stringify=function(e){return Dt.JSON.stringify(e,void 0)},Fi.prototype.parse=function(e){return Dt.JSON.parse(e,void 0)},zt(qi,Pr),qi.prototype.g=function(){return new Bi(this.l,this.j)},qi.prototype.i=(Ni={},function(){return Ni}),zt(Bi,Qn);var zi=0;function Wi(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Hi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ki(e)}function Ki(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Nt=Bi.prototype).open=function(e,t){if(this.readyState!=zi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ki(this)},Nt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Dt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hi(this)),this.readyState=zi},Nt.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Dt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wi(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Nt.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hi(this):Ki(this),3==this.readyState&&Wi(this)}},Nt.Ua=function(e){this.g&&(this.response=this.responseText=e,Hi(this))},Nt.Ta=function(e){this.g&&(this.response=e,Hi(this))},Nt.ha=function(){this.g&&Hi(this)},Nt.setRequestHeader=function(e,t){this.v.append(e,t)},Nt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Nt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Gi=Dt.JSON.parse;function Qi(e){Qn.call(this),this.headers=new ti,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yi,this.K=this.L=!1}zt(Qi,Qn);var Yi="",Xi=/^https?$/i,Ji=["POST","PUT"];function Zi(e){return"content-type"==e.toLowerCase()}function $i(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ea(e),na(e)}function ea(e){e.D||(e.D=!0,Yn(e,"complete"),Yn(e,"error"))}function ta(e){if(e.h&&"undefined"!=typeof At&&(!e.C[1]||4!=ia(e)||2!=e.ba()))if(e.v&&4==ia(e))lr(e.Fa,0,e);else if(Yn(e,"readystatechange"),4==ia(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ii)[1]||null;if(!a&&Dt.self&&Dt.self.location){var o=Dt.self.location.protocol;a=o.substr(0,o.length-1)}i=!Xi.test(a?a.toLowerCase():"")}t=i}if(t)Yn(e,"complete"),Yn(e,"success");else{e.m=6;try{var s=2<ia(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",ea(e)}}finally{na(e)}}}function na(e,t){if(e.g){ra(e);var n=e.g,r=e.C[0]?Ot:null;e.g=null,e.C=null,t||Yn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ra(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Dt.clearTimeout(e.A),e.A=null)}function ia(e){return e.g?e.g.readyState:0}function aa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Yi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function oa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return rn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):hi(e,t,n))}function sa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ua(e){this.za=0,this.l=[],this.h=new mr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sa("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sa("baseRetryDelayMs",5e3,e),this.$a=sa("retryDelaySeedMs",1e4,e),this.Ya=sa("forwardChannelMaxRetries",2,e),this.ra=sa("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ii(e&&e.concurrentRequestLimit),this.Ca=new Ui,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ca(e){if(ha(e),3==e.G){var t=e.V++,n=oi(e.F);hi(n,"SID",e.J),hi(n,"RID",t),hi(n,"TYPE","terminate"),va(e,n),(t=new Ur(e,e.h,t,void 0)).K=2,t.v=fi(oi(n)),n=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(n=Dt.navigator.sendBeacon(t.v.toString(),"")),!n&&Dt.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sa(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Qr(t)}Ca(e)}function la(e){e.g&&(ka(e),e.g.cancel(),e.g=null)}function ha(e){la(e),e.u&&(Dt.clearTimeout(e.u),e.u=null),wa(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Dt.clearTimeout(e.m),e.m=null)}function fa(e,t){e.l.push(new Si(e.Za++,t)),3==e.G&&da(e)}function da(e){Ri(e.i)||e.m||(e.m=!0,ir(e.Ha,e),e.C=0)}function pa(e,t){var n;n=t?t.m:e.V++;var r=oi(e.F);hi(r,"SID",e.J),hi(r,"RID",n),hi(r,"AID",e.U),va(e,r),e.o&&e.s&&oa(r,e.o,e.s),n=new Ur(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ya(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Oi(e.i,n),zr(n,r,t)}function va(e,t){e.j&&ei({},(function(e,n){hi(t,n,e)}))}function ya(e,t,n){n=Math.min(e.l.length,n);var r=e.j?qt(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{ji(l,o,"req"+c+"_")}catch(to){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ma(e){e.g||e.u||(e.Y=1,ir(e.Ga,e),e.A=0)}function ga(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Sr(qt(e.Ga,e),Ea(e,e.A)),e.A++,!0)}function ka(e){null!=e.B&&(Dt.clearTimeout(e.B),e.B=null)}function ba(e){e.g=new Ur(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=oi(e.oa);hi(t,"RID","rpc"),hi(t,"SID",e.J),hi(t,"CI",e.N?"0":"1"),hi(t,"AID",e.U),va(e,t),hi(t,"TYPE","xmlhttp"),e.o&&e.s&&oa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=fi(oi(t)),n.s=null,n.U=!0,Wr(n,e)}function wa(e){null!=e.v&&(Dt.clearTimeout(e.v),e.v=null)}function _a(e,t){var n=null;if(e.g==t){wa(e),ka(e),e.g=null;var r=2}else{if(!Di(e.i,t))return;n=t.D,Li(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Yn(r=wr(),new Tr(r,n,t,i)),da(e)}else ma(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ai(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Sr(qt(e.Ha,e,t),Ea(e,e.C)),e.C++,!0))}(e,t)||2==r&&ga(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:xa(e,5);break;case 4:xa(e,10);break;case 3:xa(e,6);break;default:xa(e,2)}}function Ea(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function xa(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=qt(e.jb,e);n||(n=new ai("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||si(n,"https"),fi(n)),function(e,t){var n=new mr;if(Dt.Image){var r=new Image;r.onload=Bt(Vi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Bt(Vi,n,r,"TestLoadImage: error",!1,t),r.onabort=Bt(Vi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Bt(Vi,n,r,"TestLoadImage: timeout",!1,t),Dt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cr(2);e.G=0,e.j&&e.j.va(t),Ca(e),ha(e)}function Ca(e){e.G=0,e.I=-1,e.j&&(0==Mi(e.i).length&&0==e.l.length||(e.i.i.length=0,Yt(e.l),e.l.length=0),e.j.ua())}function Ta(e,t,n){var r=function(e){return e instanceof ai?oi(e):new ai(e,void 0)}(n);if(""!=r.i)t&&ui(r,t+"."+r.i),ci(r,r.m);else{var i=Dt.location;r=function(e,t,n,r){var i=new ai(null,void 0);return e&&si(i,e),t&&ui(i,t),n&&ci(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&rn(e.aa,(function(e,t){hi(r,t,e)})),t=e.D,n=e.sa,t&&n&&hi(r,t,n),hi(r,"VER",e.ma),va(e,r),r}function Sa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Qi(new qi({ib:!0})):new Qi(e.qa)).L=e.H,t}function Ia(){}function Na(){if(hn&&!(10<=Number(xn)))throw Error("Environmental error: no available transport.")}function Pa(e,t){Qn.call(this),this.g=new ua(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Xt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Da(this)}function Ra(e){Lr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Aa(){Mr.call(this),this.status=1}function Da(e){this.g=e}(Nt=Qi.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dr.g(),this.C=this.u?Rr(this.u):Rr(Dr),this.g.onreadystatechange=qt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void $i(this,a)}e=n||"";var i=new ti(this.headers);r&&ei(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Zi,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Dt.FormData&&e instanceof Dt.FormData,!(0<=Kt(Ji,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ra(this),0<this.B&&((this.K=function(e){return hn&&_n()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qt(this.pa,this)):this.A=lr(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){$i(this,a)}},Nt.pa=function(){"undefined"!=typeof At&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yn(this,"timeout"),this.abort(8))},Nt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Yn(this,"complete"),Yn(this,"abort"),na(this))},Nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),na(this,!0)),Qi.Z.M.call(this)},Nt.Fa=function(){this.s||(this.F||this.v||this.l?ta(this):this.cb())},Nt.cb=function(){ta(this)},Nt.ba=function(){try{return 2<ia(this)?this.g.status:-1}catch(Ni){return-1}},Nt.ga=function(){try{return this.g?this.g.responseText:""}catch(Ni){return""}},Nt.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Gi(t)}},Nt.Da=function(){return this.m},Nt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Nt=ua.prototype).ma=8,Nt.G=1,Nt.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Nt.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ur(this,this.h,e,void 0),n=this.s;if(this.P&&(n?sn(n=an(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ya(this,t,r),hi(i=oi(this.F),"RID",e),hi(i,"CVER",22),this.D&&hi(i,"X-HTTP-Session-Id",this.D),va(this,i),this.o&&n&&oa(i,this.o,n),Oi(this.i,t),this.Ra&&hi(i,"TYPE","init"),this.ja?(hi(i,"$req",r),hi(i,"SID","null"),t.$=!0,zr(t,i,null)):zr(t,i,r),this.G=2}}else 3==this.G&&(e?pa(this,e):0==this.l.length||Ri(this.i)||pa(this))},Nt.Ga=function(){if(this.u=null,ba(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Sr(qt(this.bb,this),e)}},Nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cr(10),la(this),ba(this))},Nt.ab=function(){null!=this.v&&(this.v=null,la(this),ga(this),Cr(19))},Nt.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Cr(2)):(this.h.info("Failed to ping google.com"),Cr(1))},(Nt=Ia.prototype).xa=function(){},Nt.wa=function(){},Nt.va=function(){},Nt.ua=function(){},Nt.Oa=function(){},Na.prototype.g=function(e,t){return new Pa(e,t)},zt(Pa,Qn),Pa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ir(qt(e.hb,e,t))),Cr(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ta(e,null,e.W),da(e)},Pa.prototype.close=function(){ca(this.g)},Pa.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,fa(this.g,t)}else this.v?((t={}).__data__=Jn(e),fa(this.g,t)):fa(this.g,e)},Pa.prototype.M=function(){this.g.j=null,delete this.j,ca(this.g),delete this.g,Pa.Z.M.call(this)},zt(Ra,Lr),zt(Aa,Mr),zt(Da,Ia),Da.prototype.xa=function(){Yn(this.g,"a")},Da.prototype.wa=function(e){Yn(this.g,new Ra(e))},Da.prototype.va=function(e){Yn(this.g,new Aa(e))},Da.prototype.ua=function(){Yn(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Pa.prototype.send=Pa.prototype.u,Pa.prototype.open=Pa.prototype.m,Pa.prototype.close=Pa.prototype.close,Ir.NO_ERROR=0,Ir.TIMEOUT=8,Ir.HTTP_ERROR=6,Nr.COMPLETE="complete",Ar.EventType=Or,Or.OPEN="a",Or.CLOSE="b",Or.ERROR="c",Or.MESSAGE="d",Qn.prototype.listen=Qn.prototype.N,Qi.prototype.listenOnce=Qi.prototype.O,Qi.prototype.getLastError=Qi.prototype.La,Qi.prototype.getLastErrorCode=Qi.prototype.Da,Qi.prototype.getStatus=Qi.prototype.ba,Qi.prototype.getResponseJson=Qi.prototype.Qa,Qi.prototype.getResponseText=Qi.prototype.ga,Qi.prototype.send=Qi.prototype.ea;var Oa=Rt.createWebChannelTransport=function(){return new Na},La=Rt.getStatEventTarget=function(){return wr()},Ma=Rt.ErrorCode=Ir,Fa=Rt.EventType=Nr,Ua=Rt.Event=kr,ja=Rt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Va=Rt.FetchXmlHttpFactory=qi,qa=Rt.WebChannel=Ar,Ba=Rt.XhrIo=Qi,za="@firebase/firestore",Wa=function(){function e(t){S(this,e),this.uid=t}return N(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Wa.UNAUTHENTICATED=new Wa(null),Wa.GOOGLE_CREDENTIALS=new Wa("google-credentials-uid"),Wa.FIRST_PARTY=new Wa("first-party-uid"),Wa.MOCK_USER=new Wa("mock-user");var Ha="9.9.0",Ka=new De("@firebase/firestore");function Ga(){return Ka.logLevel}function Qa(e){if(Ka.logLevel<=Te.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ja);Ka.debug.apply(Ka,["Firestore (".concat(Ha,"): ").concat(e)].concat(T(i)))}}function Ya(e){if(Ka.logLevel<=Te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ja);Ka.error.apply(Ka,["Firestore (".concat(Ha,"): ").concat(e)].concat(T(i)))}}function Xa(e){if(Ka.logLevel<=Te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ja);Ka.warn.apply(Ka,["Firestore (".concat(Ha,"): ").concat(e)].concat(T(i)))}}function Ja(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ha,") INTERNAL ASSERTION FAILED: ")+e;throw Ya(t),new Error(t)}function $a(e,t){e||Za()}function eo(e,t){return e}var to={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},no=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return N(n)}(Z),ro=N((function e(){var t=this;S(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),io=N((function e(t,n){S(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ao=function(){function e(){S(this,e)}return N(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Wa.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),oo=function(){function e(t){S(this,e),this.t=t,this.currentUser=Wa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ro;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ro,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Qa("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Qa("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ro)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Qa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?($a("string"==typeof n.accessToken),new io(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return $a(null===e||"string"==typeof e),new Wa(e)}}]),e}(),so=N((function e(t,n,r){S(this,e),this.type="FirstParty",this.user=Wa.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),uo=function(){function e(t,n,r){S(this,e),this.h=t,this.l=n,this.m=r}return N(e,[{key:"getToken",value:function(){return Promise.resolve(new so(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Wa.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),co=N((function e(t){S(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),lo=function(){function e(t){S(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Qa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Qa("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Qa("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Qa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?($a("string"==typeof t.token),e.p=t.token,new co(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ho(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var fo=function(){function e(){S(this,e)}return N(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ho(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function po(e,t){return e<t?-1:e>t?1:0}function vo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var yo=function(){function e(t,n){if(S(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return N(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?po(this.nanoseconds,e.nanoseconds):po(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),mo=function(){function e(t){S(this,e),this.timestamp=t}return N(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new yo(0,0))}},{key:"max",value:function(){return new e(new yo(253402300799,999999999))}}]),e}(),go=function(){function e(t,n,r){S(this,e),void 0===n?n=0:n>t.length&&Za(),void 0===r?r=t.length-n:r>t.length-n&&Za(),this.segments=t,this.offset=n,this.len=r}return N(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ko=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new no(to.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,T(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(go),bo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wo=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return bo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new no(to.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new no(to.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new no(to.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new no(to.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(go),_o=function(){function e(t){S(this,e),this.path=t}return N(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ko.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ko.fromString(t))}},{key:"fromName",value:function(t){return new e(ko.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ko.emptyPath())}},{key:"comparator",value:function(e,t){return ko.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ko(t.slice()))}}]),e}(),Eo=N((function e(t,n,r,i){S(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Eo.UNKNOWN_ID=-1;function xo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=mo.fromTimestamp(1e9===r?new yo(n+1,0):new yo(n,r));return new To(i,_o.empty(),t)}function Co(e){return new To(e.readTime,e.key,-1)}var To=function(){function e(t,n,r){S(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return N(e,null,[{key:"min",value:function(){return new e(mo.min(),_o.empty(),-1)}},{key:"max",value:function(){return new e(mo.max(),_o.empty(),-1)}}]),e}();function So(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=_o.comparator(e.documentKey,t.documentKey))?n:po(e.largestBatchId,t.largestBatchId)}var Io="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",No=function(){function e(){S(this,e),this.onCommittedListeners=[]}return N(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Po(e){return Ro.apply(this,arguments)}function Ro(){return Ro=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===to.FAILED_PRECONDITION&&t.message===Io){e.next=2;break}throw t;case 2:Qa("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}var Ao=function(){function e(t){var n=this;S(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return N(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Za(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=m(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Do(e){return"IndexedDbTransactionError"===e.name}var Oo=function(){function e(t,n){var r=this;S(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return N(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function Lo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Oo.ot=-1;var Uo=function(){function e(t,n){S(this,e),this.comparator=t,this.root=n||Vo.EMPTY}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vo.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vo.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new jo(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new jo(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new jo(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new jo(this.root,e,this.comparator,!0)}}]),e}(),jo=function(){function e(t,n,r,i){S(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return N(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vo=function(){function e(t,n,r,i,a){S(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return N(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Za();if(this.right.isRed())throw Za();var e=this.left.check();if(e!==this.right.check())throw Za();return e+(this.isRed()?0:1)}}]),e}();Vo.EMPTY=null,Vo.RED=!0,Vo.BLACK=!1,Vo.EMPTY=new(function(){function e(){S(this,e),this.size=0}return N(e,[{key:"key",get:function(){throw Za()}},{key:"value",get:function(){throw Za()}},{key:"color",get:function(){throw Za()}},{key:"left",get:function(){throw Za()}},{key:"right",get:function(){throw Za()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vo(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var qo=function(){function e(t){S(this,e),this.comparator=t,this.data=new Uo(this.comparator)}return N(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Bo(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Bo(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Bo=function(){function e(t){S(this,e),this.iter=t}return N(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var zo=function(){function e(t){S(this,e),this.fields=t,t.sort(wo.comparator)}return N(e,[{key:"unionWith",value:function(t){var n,r=new qo(wo.comparator),i=m(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=m(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=m(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return vo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Wo=function(e){function t(e){S(this,t),this.binaryString=e}return N(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return po(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Wo.EMPTY_BYTE_STRING=new Wo("");var Ho=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(e){if($a(!!e),"string"==typeof e){var t=0,n=Ho.exec(e);if($a(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Go(e.seconds),nanos:Go(e.nanos)}}function Go(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qo(e){return"string"==typeof e?Wo.fromBase64String(e):Wo.fromUint8Array(e)}function Yo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xo(e){var t=e.mapValue.fields.__previous_value__;return Yo(t)?Xo(t):t}function Jo(e){var t=Ko(e.mapValue.fields.__local_write_time__.timestampValue);return new yo(t.seconds,t.nanos)}var Zo=N((function e(t,n,r,i,a,o,s,u){S(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),$o=function(){function e(t,n){S(this,e),this.projectId=t,this.database=n||"(default)"}return N(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function es(e){return null==e}function ts(e){return 0===e&&1/e==-1/0}function ns(e){return"number"==typeof e&&Number.isInteger(e)&&!ts(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var rs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function is(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yo(e)?4:gs(e)?9007199254740991:10:Za()}function as(e,t){if(e===t)return!0;var n=is(e);if(n!==is(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jo(e).isEqual(Jo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ko(e.timestampValue),r=Ko(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Qo(e.bytesValue).isEqual(Qo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Go(e.geoPointValue.latitude)===Go(t.geoPointValue.latitude)&&Go(e.geoPointValue.longitude)===Go(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Go(e.integerValue)===Go(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Go(e.doubleValue),r=Go(t.doubleValue);return n===r?ts(n)===ts(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vo(e.arrayValue.values||[],t.arrayValue.values||[],as);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Lo(n)!==Lo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!as(n[i],r[i])))return!1;return!0}(e,t);default:return Za()}}function os(e,t){return void 0!==(e.values||[]).find((function(e){return as(e,t)}))}function ss(e,t){if(e===t)return 0;var n=is(e),r=is(t);if(n!==r)return po(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return po(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Go(e.integerValue||e.doubleValue),r=Go(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return us(e.timestampValue,t.timestampValue);case 4:return us(Jo(e),Jo(t));case 5:return po(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Qo(e),r=Qo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=po(n[i],r[i]);if(0!==a)return a}return po(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=po(Go(e.latitude),Go(t.latitude));return 0!==n?n:po(Go(e.longitude),Go(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ss(n[i],r[i]);if(a)return a}return po(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===rs.mapValue&&t===rs.mapValue)return 0;if(e===rs.mapValue)return 1;if(t===rs.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=po(r[o],a[o]);if(0!==s)return s;var u=ss(n[r[o]],i[a[o]]);if(0!==u)return u}return po(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Za()}}function us(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return po(e,t);var n=Ko(e),r=Ko(t),i=po(n.seconds,r.seconds);return 0!==i?i:po(n.nanos,r.nanos)}function cs(e){return ls(e)}function ls(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ko(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qo(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,_o.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=m(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ls(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=m(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ls(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Za();var t,n}function hs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fs(e){return!!e&&"integerValue"in e}function ds(e){return!!e&&"arrayValue"in e}function ps(e){return!!e&&"nullValue"in e}function vs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ys(e){return!!e&&"mapValue"in e}function ms(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Mo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ms(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ms(e.arrayValue.values[r]);return n}return Object.assign({},e)}function gs(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var ks=function(){function e(t){S(this,e),this.value=t}return N(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ys(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ms(t)}},{key:"setAll",value:function(e){var t=this,n=wo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ms(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ys(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return as(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ys(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Mo(t,(function(t,n){return e[t]=n}));var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ms(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function bs(e){var t=[];return Mo(e.fields,(function(e,n){var r=new wo([e]);if(ys(n)){var i=bs(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=m(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new zo(t)}var ws=function(){function e(t,n,r,i,a,o){S(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return N(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ks.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ks.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=mo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,mo.min(),mo.min(),ks.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,mo.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,mo.min(),ks.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,mo.min(),ks.empty(),2)}}]),e}(),_s=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;S(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ut=null}));function Es(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new _s(e,t,n,r,i,a,o)}function xs(e){var t=eo(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+cs(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),es(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return cs(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return cs(e)})).join(",")),t.ut=n}return t.ut}function Cs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Us(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!as(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Vs(e.startAt,t.startAt)&&Vs(e.endAt,t.endAt)}function Ts(e){return _o.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ss=function(e){_(n,e);var t=C(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(ss(t,this.value)):null!==t&&is(this.value)===is(t)&&this.at(ss(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Za()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Is(e,t,r):"array-contains"===t?new As(e,r):"in"===t?new Ds(e,r):"not-in"===t?new Os(e,r):"array-contains-any"===t?new Ls(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Ns(e,n):new Ps(e,n)}}]),n}(function(){return N((function e(){S(this,e)}))}()),Is=function(e){_(n,e);var t=C(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,i)).key=_o.fromName(i.referenceValue),a}return N(n,[{key:"matches",value:function(e){var t=_o.comparator(e.key,this.key);return this.at(t)}}]),n}(Ss),Ns=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"in",r)).keys=Rs("in",r),i}return N(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ss),Ps=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"not-in",r)).keys=Rs("not-in",r),i}return N(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ss);function Rs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return _o.fromName(e.referenceValue)}))}var As=function(e){_(n,e);var t=C(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ds(t)&&os(t.arrayValue,this.value)}}]),n}(Ss),Ds=function(e){_(n,e);var t=C(n);function n(e,r){return S(this,n),t.call(this,e,"in",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&os(this.value.arrayValue,t)}}]),n}(Ss),Os=function(e){_(n,e);var t=C(n);function n(e,r){return S(this,n),t.call(this,e,"not-in",r)}return N(n,[{key:"matches",value:function(e){if(os(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!os(this.value.arrayValue,t)}}]),n}(Ss),Ls=function(e){_(n,e);var t=C(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains-any",r)}return N(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ds(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return os(t.value.arrayValue,e)}))}}]),n}(Ss),Ms=N((function e(t,n){S(this,e),this.position=t,this.inclusive=n})),Fs=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";S(this,e),this.field=t,this.dir=n}));function Us(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function js(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?_o.comparator(_o.fromName(o.referenceValue),n.key):ss(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Vs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!as(e.position[n],t.position[n]))return!1;return!0}var qs=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;S(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Bs(e,t,n,r,i,a,o,s){return new qs(e,t,n,r,i,a,o,s)}function zs(e){return new qs(e)}function Ws(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hs(e){var t,n=m(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ks(e){return null!==e.collectionGroup}function Gs(e){var t=eo(e);if(null===t.lt){t.lt=[];var n=Hs(t),r=Ws(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Fs(n)),t.lt.push(new Fs(wo.keyField(),"asc"));else{var i,a=!1,o=m(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.lt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Fs(wo.keyField(),u))}}}return t.lt}function Qs(e){var t=eo(e);if(!t.ft)if("F"===t.limitType)t.ft=Es(t.path,t.collectionGroup,Gs(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=m(Gs(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Fs(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Ms(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Ms(t.startAt.position,t.startAt.inclusive):null;t.ft=Es(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.ft}function Ys(e,t,n){return new qs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xs(e,t){return Cs(Qs(e),Qs(t))&&e.limitType===t.limitType}function Js(e){return"".concat(xs(Qs(e)),"|lt:").concat(e.limitType)}function Zs(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(cs(t.value));var t})).join(", "),"]")),es(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return cs(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return cs(e)})).join(",")),"Target(".concat(t,")")}(Qs(e)),"; limitType=").concat(e.limitType,")")}function $s(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):_o.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=m(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=m(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=js(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Gs(e),t))&&!(e.endAt&&!function(e,t,n){var r=js(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Gs(e),t))}(e,t)}function eu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tu(e){return function(t,n){var r,i=!1,a=m(Gs(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=nu(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function nu(e,t,n){var r=e.field.isKeyField()?_o.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ss(r,i):Za()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Za()}}function ru(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ts(t)?"-0":t}}function iu(e){return{integerValue:""+e}}function au(e,t){return ns(t)?iu(t):ru(e,t)}var ou=N((function e(){S(this,e),this._=void 0}));function su(e,t,n){return e instanceof lu?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof hu?fu(e,t):e instanceof du?pu(e,t):function(e,t){var n=cu(e,t),r=yu(n)+yu(e._t);return fs(n)&&fs(e._t)?iu(r):ru(e.wt,r)}(e,t)}function uu(e,t,n){return e instanceof hu?fu(e,t):e instanceof du?pu(e,t):n}function cu(e,t){return e instanceof vu?fs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var lu=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(ou),hu=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(ou);function fu(e,t){var n,r=mu(t),i=m(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return as(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var du=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(ou);function pu(e,t){var n,r=mu(t),i=m(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!as(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var vu=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).wt=e,i._t=r,i}return N(n)}(ou);function yu(e){return Go(e.integerValue||e.doubleValue)}function mu(e){return ds(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var gu=N((function e(t,n){S(this,e),this.version=t,this.transformResults=n})),ku=function(){function e(t,n){S(this,e),this.updateTime=t,this.exists=n}return N(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function bu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var wu=N((function e(){S(this,e)}));function _u(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ou(e.key,ku.none()):new Su(e.key,e.data,ku.none());var n,r=e.data,i=ks.empty(),a=new qo(wo.comparator),o=m(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Iu(e.key,i,new zo(a.toArray()),ku.none())}function Eu(e,t,n){e instanceof Su?function(e,t,n){var r=e.value.clone(),i=Pu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Iu?function(e,t,n){if(bu(e.precondition,t)){var r=Pu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Nu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xu(e,t,n,r){return e instanceof Su?function(e,t,n,r){if(!bu(e.precondition,t))return n;var i=e.value.clone(),a=Ru(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Iu?function(e,t,n,r){if(!bu(e.precondition,t))return n;var i=Ru(e.fieldTransforms,r,t),a=t.data;return a.setAll(Nu(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return bu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Cu(e,t){var n,r=null,i=m(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=cu(a.transform,o||null);null!=s&&(null===r&&(r=ks.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Tu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&vo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof hu&&t instanceof hu||e instanceof du&&t instanceof du?vo(e.elements,t.elements,as):e instanceof vu&&t instanceof vu?as(e._t,t._t):e instanceof lu&&t instanceof lu}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Su=function(e){_(n,e);var t=C(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return S(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wu),Iu=function(e){_(n,e);var t=C(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return S(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return N(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(wu);function Nu(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Pu(e,t,n){var r=new Map;$a(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,uu(o,s,n[i]))}return r}function Ru(e,t,n){var r,i=new Map,a=m(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,su(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Au,Du,Ou=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wu),Lu=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wu),Mu=N((function e(t){S(this,e),this.count=t}));function Fu(e){switch(e){default:return Za();case to.CANCELLED:case to.UNKNOWN:case to.DEADLINE_EXCEEDED:case to.RESOURCE_EXHAUSTED:case to.INTERNAL:case to.UNAVAILABLE:case to.UNAUTHENTICATED:return!1;case to.INVALID_ARGUMENT:case to.NOT_FOUND:case to.ALREADY_EXISTS:case to.PERMISSION_DENIED:case to.FAILED_PRECONDITION:case to.ABORTED:case to.OUT_OF_RANGE:case to.UNIMPLEMENTED:case to.DATA_LOSS:return!0}}function Uu(e){if(void 0===e)return Ya("GRPC error has no .code"),to.UNKNOWN;switch(e){case Au.OK:return to.OK;case Au.CANCELLED:return to.CANCELLED;case Au.UNKNOWN:return to.UNKNOWN;case Au.DEADLINE_EXCEEDED:return to.DEADLINE_EXCEEDED;case Au.RESOURCE_EXHAUSTED:return to.RESOURCE_EXHAUSTED;case Au.INTERNAL:return to.INTERNAL;case Au.UNAVAILABLE:return to.UNAVAILABLE;case Au.UNAUTHENTICATED:return to.UNAUTHENTICATED;case Au.INVALID_ARGUMENT:return to.INVALID_ARGUMENT;case Au.NOT_FOUND:return to.NOT_FOUND;case Au.ALREADY_EXISTS:return to.ALREADY_EXISTS;case Au.PERMISSION_DENIED:return to.PERMISSION_DENIED;case Au.FAILED_PRECONDITION:return to.FAILED_PRECONDITION;case Au.ABORTED:return to.ABORTED;case Au.OUT_OF_RANGE:return to.OUT_OF_RANGE;case Au.UNIMPLEMENTED:return to.UNIMPLEMENTED;case Au.DATA_LOSS:return to.DATA_LOSS;default:return Za()}}(Du=Au||(Au={}))[Du.OK=0]="OK",Du[Du.CANCELLED=1]="CANCELLED",Du[Du.UNKNOWN=2]="UNKNOWN",Du[Du.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Du[Du.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Du[Du.NOT_FOUND=5]="NOT_FOUND",Du[Du.ALREADY_EXISTS=6]="ALREADY_EXISTS",Du[Du.PERMISSION_DENIED=7]="PERMISSION_DENIED",Du[Du.UNAUTHENTICATED=16]="UNAUTHENTICATED",Du[Du.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Du[Du.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Du[Du.ABORTED=10]="ABORTED",Du[Du.OUT_OF_RANGE=11]="OUT_OF_RANGE",Du[Du.UNIMPLEMENTED=12]="UNIMPLEMENTED",Du[Du.INTERNAL=13]="INTERNAL",Du[Du.UNAVAILABLE=14]="UNAVAILABLE",Du[Du.DATA_LOSS=15]="DATA_LOSS";var ju=function(){function e(t,n){S(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return N(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Mo(this.inner,(function(t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Fo(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Vu=new Uo(_o.comparator);function qu(){return Vu}var Bu=new Uo(_o.comparator);function zu(){for(var e=Bu,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Wu(e){var t=Bu;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Hu(){return Gu()}function Ku(){return Gu()}function Gu(){return new ju((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Qu=new Uo(_o.comparator),Yu=new qo(_o.comparator);function Xu(){for(var e=Yu,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Ju=new qo(po);function Zu(){return Ju}var $u=function(){function e(t,n,r,i,a){S(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return N(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ec.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(mo.min(),r,Zu(),qu(),Xu())}}]),e}(),ec=function(){function e(t,n,r,i,a){S(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return N(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Wo.EMPTY_BYTE_STRING,n,Xu(),Xu(),Xu())}}]),e}(),tc=N((function e(t,n,r,i){S(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),nc=N((function e(t,n){S(this,e),this.targetId=t,this.It=n})),rc=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wo.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;S(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ic=function(){function e(){S(this,e),this.Tt=0,this.Et=sc(),this.At=Wo.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return N(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Xu(),t=Xu(),n=Xu();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Za()}})),new ec(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=sc()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),ac=function(){function e(t){S(this,e),this.Mt=t,this.Ft=new Map,this.$t=qu(),this.Bt=oc(),this.Lt=new qo(po)}return N(e,[{key:"Ut",value:function(e){var t,n=m(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(s){n.e(s)}finally{n.f()}var i,a=m(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Za()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Ts(i))if(0===n){var a=new _o(i.path);this.Kt(t,a,ws.newNoDocument(a,mo.min()))}else $a(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Ts(a.target)){var o=new _o(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,ws.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Xu();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new $u(e,n,this.Lt,this.$t,r);return this.$t=qu(),this.Bt=oc(),this.Lt=new qo(po),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new ic,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new qo(po),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Qa("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new ic),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function oc(){return new Uo(_o.comparator)}function sc(){return new Uo(_o.comparator)}var uc={asc:"ASCENDING",desc:"DESCENDING"},cc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lc=N((function e(t,n){S(this,e),this.databaseId=t,this.dt=n}));function hc(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fc(e,t){return e.dt?t.toBase64():t.toUint8Array()}function dc(e,t){return hc(e,t.toTimestamp())}function pc(e){return $a(!!e),mo.fromTimestamp(function(e){var t=Ko(e);return new yo(t.seconds,t.nanos)}(e))}function vc(e,t){return function(e){return new ko(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function yc(e){var t=ko.fromString(e);return $a(Mc(t)),t}function mc(e,t){return vc(e.databaseId,t.path)}function gc(e,t){var n=yc(t);if(n.get(1)!==e.databaseId.projectId)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new _o(_c(n))}function kc(e,t){return vc(e.databaseId,t)}function bc(e){var t=yc(e);return 4===t.length?ko.emptyPath():_c(t)}function wc(e){return new ko(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _c(e){return $a(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ec(e,t,n){return{name:mc(e,t),fields:n.value.mapValue.fields}}function xc(e,t){var n;if(t instanceof Su)n={update:Ec(e,t.key,t.value)};else if(t instanceof Ou)n={delete:mc(e,t.key)};else if(t instanceof Iu)n={update:Ec(e,t.key,t.data),updateMask:Lc(t.fieldMask)};else{if(!(t instanceof Lu))return Za();n={verify:mc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof lu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof du)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof vu)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Za()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:dc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Za()}(e,t.precondition)),n}function Cc(e,t){return{documents:[kc(e,t.path)]}}function Tc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=kc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=kc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(vs(e.value))return{unaryFilter:{field:Rc(e.field),op:"IS_NAN"}};if(ps(e.value))return{unaryFilter:{field:Rc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vs(e.value))return{unaryFilter:{field:Rc(e.field),op:"IS_NOT_NAN"}};if(ps(e.value))return{unaryFilter:{field:Rc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rc(e.field),op:Pc(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Rc(e.field),direction:Nc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.dt||es(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Sc(e){var t=bc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$a(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Ic(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Fs(Ac(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return es(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ms(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ms(n,t)}(n.endAt)),Bs(t,i,s,o,u,"F",c,l)}function Ic(e){return e?void 0!==e.unaryFilter?[Oc(e)]:void 0!==e.fieldFilter?[Dc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Ic(e)})).reduce((function(e,t){return e.concat(t)})):Za():[]}function Nc(e){return uc[e]}function Pc(e){return cc[e]}function Rc(e){return{fieldPath:e.canonicalString()}}function Ac(e){return wo.fromServerFormat(e.fieldPath)}function Dc(e){return Ss.create(Ac(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Za()}}(e.fieldFilter.op),e.fieldFilter.value)}function Oc(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ac(e.unaryFilter.field);return Ss.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ac(e.unaryFilter.field);return Ss.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ac(e.unaryFilter.field);return Ss.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ac(e.unaryFilter.field);return Ss.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Za()}}function Lc(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Mc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Fc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Uc=([].concat(T(Fc),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),jc=Uc;[].concat(jc,["indexConfiguration","indexState","indexEntries"]);var Vc=function(){function e(t,n,r,i){S(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return N(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Eu(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=m(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=xu(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=m(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=xu(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ku();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=_u(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(mo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Xu())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&vo(this.mutations,e.mutations,(function(e,t){return Tu(e,t)}))&&vo(this.baseMutations,e.baseMutations,(function(e,t){return Tu(e,t)}))}}]),e}(),qc=function(){function e(t,n,r,i){S(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return N(e,null,[{key:"from",value:function(t,n,r){$a(t.mutations.length===r.length);for(var i=Qu,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Bc=function(){function e(t,n){S(this,e),this.largestBatchId=t,this.mutation=n}return N(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),zc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:mo.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wo.EMPTY_BYTE_STRING;S(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return N(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Wc=N((function e(t){S(this,e),this.ne=t}));function Hc(e){var t=Sc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ys(t,t.limit,"L"):t}var Kc=function(){function e(){S(this,e)}return N(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Go(e.integerValue));else if("doubleValue"in e){var n=Go(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),ts(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Qo(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?gs(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Za()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),_o.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();Kc.ye=new Kc;var Gc=function(){function e(){S(this,e),this.ze=new Qc}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Ao.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ao.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ao.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ao.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ao.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ao.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ao.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ao.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ao.resolve(To.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ao.resolve(To.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ao.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ao.resolve()}}]),e}(),Qc=function(){function e(){S(this,e),this.index={}}return N(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new qo(ko.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new qo(ko.comparator)).toArray()}}]),e}();new Uint8Array(0);var Yc=function(){function e(t,n,r){S(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return N(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Yc.DEFAULT_COLLECTION_PERCENTILE=10,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yc.DEFAULT=new Yc(41943040,Yc.DEFAULT_COLLECTION_PERCENTILE,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yc.DISABLED=new Yc(-1,0,0);var Xc=function(){function e(t){S(this,e),this.En=t}return N(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}();var Jc=function(){function e(){S(this,e),this.changes=new ju((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return N(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ws.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ao.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Zc=N((function e(t,n){S(this,e),this.overlayedDocument=t,this.mutatedFields=n})),$c=function(){function e(t,n,r,i){S(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return N(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&xu(r.mutation,e,zo.empty(),yo.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Xu()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xu(),i=Hu();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=zu();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Hu();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Xu())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=qu(),a=Gu(),o=Gu();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Iu)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),xu(o.mutation,t,o.mutation.getFieldMask(),yo.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Zc(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Gu(),i=new Uo((function(e,t){return e-t})),a=Xu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=m(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||zo.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Xu()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Ku();c.forEach((function(e){if(!a.has(e)){var n=_u(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Ao.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return _o.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ks(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ao.resolve(Hu()),s=-1,u=a;return o.next((function(t){return Ao.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Ao.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Xu())})).next((function(e){return{batchId:s,changes:Wu(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new _o(t)).next((function(e){var t=zu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=zu();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ao.forEach(o,(function(o){var s=function(e,t){return new qs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,ws.newInvalidDocument(n)))}));var n=zu();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&xu(a.mutation,i,zo.empty(),yo.now()),$s(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ao.resolve(ws.newInvalidDocument(t))}}]),e}(),el=function(){function e(t){S(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return N(e,[{key:"getBundleMetadata",value:function(e,t){return Ao.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:pc(n.createTime)}),Ao.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ao.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Hc(e.bundledQuery),readTime:pc(e.readTime)}}(t)),Ao.resolve()}}]),e}(),tl=function(){function e(){S(this,e),this.overlays=new Uo(_o.comparator),this.Xn=new Map}return N(e,[{key:"getOverlay",value:function(e,t){return Ao.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Hu();return Ao.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Ao.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Ao.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Hu(),i=t.length+1,a=new _o(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Ao.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Uo((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Hu(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Hu(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Ao.resolve(u)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Bc(t,n));var a=this.Xn.get(t);void 0===a&&(a=Xu(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),nl=function(){function e(){S(this,e),this.Zn=new qo(rl.ts),this.es=new qo(rl.ns)}return N(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new rl(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new rl(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new _o(new ko([])),r=new rl(n,e),i=new rl(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new _o(new ko([])),n=new rl(t,e),r=new rl(t,e+1),i=Xu();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new rl(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),rl=function(){function e(t,n){S(this,e),this.key=t,this.ls=n}return N(e,null,[{key:"ts",value:function(e,t){return _o.comparator(e.key,t.key)||po(e.ls,t.ls)}},{key:"ns",value:function(e,t){return po(e.ls,t.ls)||_o.comparator(e.key,t.key)}}]),e}(),il=function(){function e(t,n){S(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new qo(rl.ts)}return N(e,[{key:"checkEmpty",value:function(e){return Ao.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Vc(i,t,n,r);this.mutationQueue.push(a);var o,s=m(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new rl(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Ao.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ao.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Ao.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ao.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Ao.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new rl(t,0),i=new rl(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Ao.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new qo(po);return t.forEach((function(e){var t=new rl(e,0),i=new rl(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Ao.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;_o.isDocumentKey(i)||(i=i.child(""));var a=new rl(new _o(i),0),o=new qo(po);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Ao.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;$a(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Ao.forEach(t.mutations,(function(i){var a=new rl(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new rl(t,0),r=this.ds.firstAfterOrEqual(n);return Ao.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ao.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),al=function(){function e(t){S(this,e),this.ps=t,this.docs=new Uo(_o.comparator),this.size=0}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ao.resolve(n?n.document.mutableCopy():ws.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=qu();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ws.newInvalidDocument(e))})),Ao.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=qu(),i=new _o(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||So(Co(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Ao.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Za()}},{key:"Is",value:function(e,t){return Ao.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ol(this)}},{key:"getSize",value:function(e){return Ao.resolve(this.size)}}]),e}(),ol=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this)).zn=e,r}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Ao.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Jc),sl=function(){function e(t){S(this,e),this.persistence=t,this.Ts=new ju((function(e){return xs(e)}),Cs),this.lastRemoteSnapshotVersion=mo.min(),this.highestTargetId=0,this.Es=0,this.As=new nl,this.targetCount=0,this.Rs=Xc.An()}return N(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Ao.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ao.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ao.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Ao.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Ao.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Xc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Ao.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Ao.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Ao.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ao.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ao.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Ao.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Ao.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ao.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Ao.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Ao.resolve(n)}},{key:"containsKey",value:function(e,t){return Ao.resolve(this.As.containsKey(t))}}]),e}(),ul=function(){function e(t,n){var r=this;S(this,e),this.bs={},this.overlays={},this.Ps=new Oo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new sl(this),this.indexManager=new Gc,this.remoteDocumentCache=new al((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Wc(n),this.Ds=new el(this.wt)}return N(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new tl,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new il(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Qa("MemoryPersistence","Starting transaction:",e);var i=new cl(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Ao.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),cl=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return N(n)}(No),ll=function(){function e(t){S(this,e),this.persistence=t,this.ks=new nl,this.Os=null}return N(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw Za()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Ao.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Ao.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Ao.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ao.forEach(this.Fs,(function(r){var i=_o.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,mo.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Ao.or([function(){return Ao.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}();var hl=function(){function e(t,n,r,i){S(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return N(e,null,[{key:"Vi",value:function(t,n){var r,i=Xu(),a=Xu(),o=m(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fl=function(){function e(){S(this,e),this.Si=!1}return N(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return Ao.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(mo.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(Ga()<=Te.DEBUG&&Qa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zs(t)),i.Mi(e,o,t,xo(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new qo(tu(e));return t.forEach((function(t,r){$s(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Ga()<=Te.DEBUG&&Qa("QueryEngine","Using full collection scan to execute query:",Zs(t)),this.Di.getDocumentsMatchingQuery(e,t,To.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),dl=function(){function e(t,n,r,i){S(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Uo(po),this.Bi=new ju((function(e){return xs(e)}),Cs),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return N(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $c(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function pl(e,t,n,r){return new dl(e,t,n,r)}function vl(e,t){return yl.apply(this,arguments)}function yl(){return yl=w(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Xu(),u=m(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=m(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(b){h.e(b)}finally{h.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=m(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,g=m(v.mutations);try{for(g.s();!(y=g.n()).done;){var k=y.value;s=s.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function ml(e,t){var n=eo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ao.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);$a(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Xu(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function gl(e){var t=eo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function kl(e,t){var n=eo(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Wo.EMPTY_BYTE_STRING,mo.min()).withLastLimboFreeSnapshotVersion(mo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var s=qu(),u=Xu();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bl(e,a,t.documentUpdates).next((function(e){s=e.Gi,u=e.Qi}))),!r.isEqual(mo.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ao.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.$i=i,e}))}function bl(e,t,n){var r=Xu(),i=Xu();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=qu();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(mo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Qa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function wl(e,t){var n=eo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function _l(e,t){var n=eo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Ao.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new zc(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function El(e,t,n){return xl.apply(this,arguments)}function xl(){return xl=w(k().mark((function e(t,n,r){var i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eo(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Do(e.t1)){e.next=12;break}throw e.t1;case 12:Qa("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),xl.apply(this,arguments)}function Cl(e,t,n){var r=eo(e),i=mo.min(),a=Xu();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=eo(e),i=r.Bi.get(n);return void 0!==i?Ao.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Qs(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:mo.min(),n?a:Xu())})).next((function(e){return Tl(r,eu(t),e),{documents:e,ji:a}}))}))}function Tl(e,t,n){var r=mo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}var Sl=function(){function e(){S(this,e),this.activeTargetIds=Zu()}return N(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Il=function(){function e(){S(this,e),this.Fr=new Sl,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return N(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Sl,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Nl=function(){function e(){S(this,e)}return N(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Pl=function(){function e(){var t=this;S(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return N(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Qa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=m(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Qa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=m(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Rl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Al=function(){function e(t){S(this,e),this.jr=t.jr,this.Wr=t.Wr}return N(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Dl=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return N(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Ba;o.listenOnce(Fa.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ma.NO_ERROR:var t=o.getResponseJson();Qa("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ma.TIMEOUT:Qa("Connection",'RPC "'+e+'" timed out'),a(new no(to.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:var n=o.getStatus();if(Qa("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(to).indexOf(t)>=0?t:to.UNKNOWN}(r.status);a(new no(s,r.message))}else a(new no(to.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new no(to.UNAVAILABLE,"Connection failed."));break;default:Za()}}finally{Qa("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Oa(),a=La(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Va({})),this.uo(o.initMessageHeaders,t,n),H()||G()||W().indexOf("Electron/")>=0||Q()||W().indexOf("MSAppHost/")>=0||K()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Qa("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new Al({jr:function(e){l?Qa("Connection","Not sending because WebChannel is closed:",e):(c||(Qa("Connection","Opening WebChannel transport."),u.open(),c=!0),Qa("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,qa.EventType.OPEN,(function(){l||Qa("Connection","WebChannel transport opened.")})),f(u,qa.EventType.CLOSE,(function(){l||(l=!0,Qa("Connection","WebChannel transport closed"),h.eo())})),f(u,qa.EventType.ERROR,(function(e){l||(l=!0,Xa("Connection","WebChannel transport errored:",e),h.eo(new no(to.UNAVAILABLE,"The operation could not be completed")))})),f(u,qa.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];$a(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Qa("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Au[e];if(void 0!==t)return Uu(t)}(a),s=i.message;void 0===o&&(o=to.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.eo(new no(o,s)),u.close()}else Qa("Connection","WebChannel received:",n),h.no(n)}})),f(a,Ua.STAT_EVENT,(function(e){e.stat===ja.PROXY?Qa("Connection","Detected buffering proxy"):e.stat===ja.NOPROXY&&Qa("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){S(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return N(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Qa("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Qa("RestConnection","Received: ",e),e}),(function(t){throw Xa("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ha,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Rl[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Ol(){return"undefined"!=typeof document?document:null}function Ll(e){return new lc(e,!0)}var Ml=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;S(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return N(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Qa("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),Fl=function(){function e(t,n,r,i,a,o,s,u){S(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Ml(t,n)}return N(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===to.RESOURCE_EXHAUSTED?(Ya(n.toString()),Ya("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===to.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new no(to.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(w(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Qa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Qa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Ul=function(e){_(n,e);var t=C(n);function n(e,r,i,a,o,s){var u;return S(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u}return N(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Za()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?($a(void 0===t||"string"==typeof t),Wo.fromBase64String(t||"")):($a(void 0===t||t instanceof Uint8Array),Wo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?to.UNKNOWN:Uu(e.code);return new no(t,e.message||"")}(o);n=new rc(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=gc(e,u.document.name),l=pc(u.document.updateTime),h=new ks({mapValue:{fields:u.document.fields}}),f=ws.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new tc(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=gc(e,v.document),m=v.readTime?pc(v.readTime):mo.min(),g=ws.newNoDocument(y,m),k=v.removedTargetIds||[];n=new tc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=gc(e,b.document),_=b.removedTargetIds||[];n=new tc([],_,w,null)}else{if(!("filter"in t))return Za();t.filter;var E=t.filter;E.targetId;var x=E.count||0,C=new Mu(x),T=E.targetId;n=new nc(T,C)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return mo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?mo.min():t.readTime?pc(t.readTime):mo.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=wc(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Ts(r)?{documents:Cc(e,r)}:{query:Tc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=fc(e,t.resumeToken):t.snapshotVersion.compareTo(mo.min())>0&&(n.readTime=hc(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Za()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=wc(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(Fl),jl=function(e){_(n,e);var t=C(n);function n(e,r,i,a,o,s){var u;return S(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u.Wo=!1,u}return N(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,y(p(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if($a(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?($a(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?pc(e.updateTime):pc(t);return n.isEqual(mo.min())&&(n=pc(t)),new gu(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=pc(e.commitTime);return this.listener.Jo(n,t)}return $a(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=wc(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return xc(t.wt,e)}))};this.Mo(n)}}]),n}(Fl),Vl=function(e){_(n,e);var t=C(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return N(n,[{key:"tu",value:function(){if(this.Zo)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.bo.ao(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return N((function e(){S(this,e)}))}()),ql=function(){function e(t,n){S(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return N(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Ya(t),this.su=!1):Qa("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Bl=N((function e(t,n,r,i,a){var o=this;S(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=$l(o),!e.t0){e.next=5;break}return Qa("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eo(t)).lu.add(4),e.next=4,Hl(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,zl(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new ql(r,i)}));function zl(e){return Wl.apply(this,arguments)}function Wl(){return Wl=w(k().mark((function e(t){var n,r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$l(t)){e.next=18;break}n=m(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Wl.apply(this,arguments)}function Hl(e){return Kl.apply(this,arguments)}function Kl(){return Kl=w(k().mark((function e(t){var n,r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=m(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Kl.apply(this,arguments)}function Gl(e,t){var n=eo(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Zl(n)?Jl(n):Ih(n).Co()&&Yl(n,t))}function Ql(e,t){var n=eo(e),r=Ih(n);n.hu.delete(t),r.Co()&&Xl(n,t),0===n.hu.size&&(r.Co()?r.ko():$l(n)&&n._u.set("Unknown"))}function Yl(e,t){e.wu.Nt(t.targetId),Ih(e).Qo(t)}function Xl(e,t){e.wu.Nt(t),Ih(e).jo(t)}function Jl(e){e.wu=new ac({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),Ih(e).start(),e._u.iu()}function Zl(e){return $l(e)&&!Ih(e).Do()&&e.hu.size>0}function $l(e){return 0===eo(e).lu.size}function eh(e){e.wu=void 0}function th(e){return nh.apply(this,arguments)}function nh(){return nh=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Yl(t,e)}));case 1:case"end":return e.stop()}}),e)}))),nh.apply(this,arguments)}function rh(e,t){return ih.apply(this,arguments)}function ih(){return ih=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:eh(t),Zl(t)?(t._u.uu(n),Jl(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ih.apply(this,arguments)}function ah(e,t,n){return oh.apply(this,arguments)}function oh(){return oh=w(k().mark((function e(t,n,r){var i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof rc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=w(k().mark((function e(t,n){var r,i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=m(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Qa("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,sh(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof tc?t.wu.Ut(n):n instanceof nc?t.wu.zt(n):t.wu.Gt(n),r.isEqual(mo.min())){e.next=29;break}return e.prev=14,e.next=17,gl(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Wo.EMPTY_BYTE_STRING,n.snapshotVersion)),Xl(e,t);var r=new zc(n.target,t,1,n.sequenceNumber);Yl(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Qa("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,sh(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),oh.apply(this,arguments)}function sh(e,t,n){return uh.apply(this,arguments)}function uh(){return uh=w(k().mark((function e(t,n,r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Do(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Hl(t);case 5:t._u.set("Offline"),r||(r=function(){return gl(t.localStore)}),t.asyncQueue.enqueueRetryable(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qa("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,zl(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),uh.apply(this,arguments)}function ch(e,t){return t().catch((function(n){return sh(e,n,t)}))}function lh(e){return hh.apply(this,arguments)}function hh(){return hh=w(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eo(t),r=Nh(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!fh(n)){e.next=19;break}return e.prev=3,e.next=6,wl(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,dh(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,sh(n,e.t0);case 17:e.next=2;break;case 19:ph(n)&&vh(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),hh.apply(this,arguments)}function fh(e){return $l(e)&&e.au.length<10}function dh(e,t){e.au.push(t);var n=Nh(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function ph(e){return $l(e)&&!Nh(e).Do()&&e.au.length>0}function vh(e){Nh(e).start()}function yh(e){return mh.apply(this,arguments)}function mh(){return mh=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nh(t).Xo();case 1:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}function gh(e){return kh.apply(this,arguments)}function kh(){return kh=w(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Nh(t),r=m(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),kh.apply(this,arguments)}function bh(e,t,n){return wh.apply(this,arguments)}function wh(){return wh=w(k().mark((function e(t,n,r){var i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=qc.from(i,n,r),e.next=3,ch(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,lh(t);case 5:case"end":return e.stop()}}),e)}))),wh.apply(this,arguments)}function _h(e,t){return Eh.apply(this,arguments)}function Eh(){return Eh=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Nh(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fu(i=n.code)||i===to.ABORTED){e.next=7;break}return r=t.au.shift(),Nh(t).No(),e.next=5,ch(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,lh(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ph(t)&&vh(t);case 5:case"end":return e.stop()}}),e)}))),Eh.apply(this,arguments)}function xh(e,t){return Ch.apply(this,arguments)}function Ch(){return Ch=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=eo(t)).asyncQueue.verifyOperationInProgress(),Qa("RemoteStore","RemoteStore received new credentials"),i=$l(r),r.lu.add(3),e.next=6,Hl(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,zl(r);case 12:case"end":return e.stop()}}),e)}))),Ch.apply(this,arguments)}function Th(e,t){return Sh.apply(this,arguments)}function Sh(){return Sh=w(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,zl(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Hl(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Ih(e){return e.mu||(e.mu=function(e,t,n){var r=eo(e);return r.tu(),new Ul(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:th.bind(null,e),Jr:rh.bind(null,e),Go:ah.bind(null,e)}),e.fu.push(function(){var t=w(k().mark((function t(n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Zl(e)?Jl(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:eh(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Nh(e){return e.gu||(e.gu=function(e,t,n){var r=eo(e);return r.tu(),new jl(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:yh.bind(null,e),Jr:_h.bind(null,e),Yo:gh.bind(null,e),Jo:bh.bind(null,e)}),e.fu.push(function(){var t=w(k().mark((function t(n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,lh(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Qa("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Ph=function(){function e(t,n,r,i,a){S(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return N(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new no(to.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Rh(e,t){if(Ya("AsyncQueue","".concat(t,": ").concat(e)),Do(e))return new no(to.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ah=function(){function e(t){S(this,e),this.comparator=t?function(e,n){return t(e,n)||_o.comparator(e.key,n.key)}:function(e,t){return _o.comparator(e.key,t.key)},this.keyedMap=zu(),this.sortedSet=new Uo(this.comparator)}return N(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Dh=function(){function e(){S(this,e),this.yu=new Uo(_o.comparator)}return N(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Za():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Oh=function(){function e(t,n,r,i,a,o,s,u){S(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return N(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Ah.emptySet(n),a,r,i,!0,!1)}}]),e}(),Lh=N((function e(){S(this,e),this.Iu=void 0,this.listeners=[]})),Mh=N((function e(){S(this,e),this.queries=new ju((function(e){return Js(e)}),Xs),this.onlineState="Unknown",this.Tu=new Set}));function Fh(e,t){return Uh.apply(this,arguments)}function Uh(){return Uh=w(k().mark((function e(t,n){var r,i,a,o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Lh),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Rh(e.t0,"Initialization of query '".concat(Zs(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&zh(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Uh.apply(this,arguments)}function jh(e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=w(k().mark((function e(t,n){var r,i,a,o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Vh.apply(this,arguments)}function qh(e,t){var n,r=eo(e),i=!1,a=m(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=m(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&zh(r)}function Bh(e,t,n){var r=eo(e),i=r.queries.get(t);if(i){var a,o=m(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function zh(e){e.Tu.forEach((function(e){e.next()}))}var Wh=function(){function e(t,n,r){S(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return N(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=m(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Oh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Oh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}();var Hh=N((function e(t){S(this,e),this.key=t})),Kh=N((function e(t){S(this,e),this.key=t})),Gh=function(){function e(t,n){S(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Xu(),this.mutatedKeys=Xu(),this.Lu=tu(t),this.Uu=new Ah(this.Lu)}return N(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new Dh,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=$s(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||c&&n.Lu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Za()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new Oh(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Dh,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Xu(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Kh(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new Hh(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Xu();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Oh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Qh=N((function e(t,n,r){S(this,e),this.query=t,this.targetId=n,this.view=r})),Yh=N((function e(t){S(this,e),this.key=t,this.Xu=!1})),Xh=function(){function e(t,n,r,i,a,o){S(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new ju((function(e){return Js(e)}),Xs),this.ec=new Map,this.nc=new Set,this.sc=new Uo(_o.comparator),this.ic=new Map,this.rc=new nl,this.oc={},this.uc=new Map,this.cc=Xc.Rn(),this.onlineState="Unknown",this.ac=void 0}return N(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function Jh(e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=w(k().mark((function e(t,n){var r,i,a,o,s,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sf(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,_l(r.localStore,Qs(n));case 8:return s=e.sent,r.isPrimaryClient&&Gl(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,$h(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Zh.apply(this,arguments)}function $h(e,t,n,r){return ef.apply(this,arguments)}function ef(){return ef=w(k().mark((function e(t,n,r,i){var a,o,s,u,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=w(k().mark((function e(t,n,r,i){var a,o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,Cl(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(kf(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Cl(t.localStore,n,!0);case 3:return a=e.sent,o=new Gh(n,a.ji),s=o.Ku(a.documents),u=ec.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),kf(t,r,c.zu),l=new Qh(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),ef.apply(this,arguments)}function tf(e,t){return nf.apply(this,arguments)}function nf(){return nf=w(k().mark((function e(t,n){var r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Xs(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,El(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ql(r.remoteStore,i.targetId),mf(r,i.targetId)})).catch(Po);case 9:e.next=14;break;case 11:return mf(r,i.targetId),e.next=14,El(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),nf.apply(this,arguments)}function rf(e,t,n){return af.apply(this,arguments)}function af(){return af=w(k().mark((function e(t,n,r){var i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=If(t),e.prev=1,e.next=4,function(e,t){var n,r,i=eo(e),a=yo.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Xu());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=qu(),u=Xu();return i.Ui.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=m(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Cu(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Iu(c.key,l,bs(l.value.mapValue),ku.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Wu(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Uo(po)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,_f(i,a.changes);case 9:return e.next=11,lh(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Rh(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),af.apply(this,arguments)}function of(e,t){return sf.apply(this,arguments)}function sf(){return sf=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.prev=1,e.next=4,kl(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&($a(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?$a(n.Xu):e.removedDocuments.size>0&&($a(n.Xu),n.Xu=!1))})),e.next=8,_f(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Po(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),sf.apply(this,arguments)}function uf(e,t,n){var r=eo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=eo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=m(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&zh(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function cf(e,t,n){return lf.apply(this,arguments)}function lf(){return lf=w(k().mark((function e(t,n,r){var i,a,o,s,u,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=eo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Uo(_o.comparator)).insert(o,ws.newNoDocument(o,mo.min())),u=Xu().add(o),c=new $u(mo.min(),new Map,new qo(po),s,u),e.next=9,of(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),wf(i),e.next=16;break;case 14:return e.next=16,El(i.localStore,n,!1).then((function(){return mf(i,n,r)})).catch(Po);case 16:case"end":return e.stop()}}),e)}))),lf.apply(this,arguments)}function hf(e,t){return ff.apply(this,arguments)}function ff(){return ff=w(k().mark((function e(t,n){var r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),i=n.batch.batchId,e.prev=1,e.next=4,ml(r.localStore,n);case 4:return a=e.sent,yf(r,i,null),vf(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,_f(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Po(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ff.apply(this,arguments)}function df(e,t,n){return pf.apply(this,arguments)}function pf(){return pf=w(k().mark((function e(t,n,r){var i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eo(t),e.prev=1,e.next=4,function(e,t){var n=eo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return $a(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,yf(i,n,r),vf(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,_f(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Po(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),pf.apply(this,arguments)}function vf(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function yf(e,t,n){var r=eo(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function mf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=m(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||gf(e,t)}))}function gf(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(Ql(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),wf(e))}function kf(e,t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Hh?(e.rc.addReference(a.key,t),bf(e,a)):a instanceof Kh?(Qa("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||gf(e,a.key)):Za()}}catch(o){i.e(o)}finally{i.f()}}function bf(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Qa("SyncEngine","New document in limbo: "+n),e.nc.add(r),wf(e))}function wf(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new _o(ko.fromString(t)),r=e.cc.next();e.ic.set(r,new Yh(n)),e.sc=e.sc.insert(n,r),Gl(e.remoteStore,new zc(Qs(zs(n.path)),r,2,Oo.ot))}}function _f(e,t,n){return Ef.apply(this,arguments)}function Ef(){return Ef=w(k().mark((function e(t,n,r){var i,a,o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eo(t),a=[],o=[],s=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){s.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=hl.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Go(a),e.next=9,function(){var e=w(k().mark((function e(t,n){var r,i,a,o,s,u,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ao.forEach(n,(function(t){return Ao.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ao.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Do(e.t0)){e.next=10;break}throw e.t0;case 10:Qa("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=m(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.$i.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Ef.apply(this,arguments)}function xf(e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=eo(t)).currentUser.isEqual(n)){e.next=11;break}return Qa("SyncEngine","User change. New user:",n.toKey()),e.next=5,vl(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new no(to.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,_f(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Tf(e,t){var n=eo(e),r=n.ic.get(t);if(r&&r.Xu)return Xu().add(r.key);var i=Xu(),a=n.ec.get(t);if(!a)return i;var o,s=m(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.tc.get(u);i=i.unionWith(c.view.qu)}}catch(l){s.e(l)}finally{s.f()}return i}function Sf(e){var t=eo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=of.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=cf.bind(null,t),t.Zu.Go=qh.bind(null,t.eventManager),t.Zu.lc=Bh.bind(null,t.eventManager),t}function If(e){var t=eo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=df.bind(null,t),t}var Nf=function(){function e(){S(this,e),this.synchronizeTabs=!1}return N(e,[{key:"initialize",value:function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=Ll(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return pl(this.persistence,new fl,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new ul(ll.Ms,this.wt)}},{key:"dc",value:function(e){return new Il}},{key:"terminate",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pf=function(){function e(){S(this,e)}return N(e,[{key:"initialize",value:function(){var e=w(k().mark((function e(t,n){var r=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return uf(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=xf.bind(null,this.syncEngine),e.next=12,Th(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Mh}},{key:"createDatastore",value:function(e){var t,n=Ll(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Dl(t));return function(e,t,n,r){return new Vl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return uf(o.syncEngine,e,0)},a=Pl.V()?new Pl:new Nl,new Bl(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Xh(e,t,n,r,i,a);return o&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eo(t),Qa("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Hl(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var Rf=function(){function e(t){S(this,e),this.observer=t,this.muted=!1}return N(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Af=function(){function e(t,n,r,i){var a=this;S(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Wa.UNAUTHENTICATED,this.clientId=fo.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qa("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Qa("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return N(e,[{key:"getConfiguration",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(w(k().mark((function n(){var r;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Rh(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Df(e,t){return Of.apply(this,arguments)}function Of(){return Of=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Qa("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,vl(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Of.apply(this,arguments)}function Lf(e,t){return Mf.apply(this,arguments)}function Mf(){return Mf=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Ff(t);case 3:return r=e.sent,Qa("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return xh(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return xh(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Mf.apply(this,arguments)}function Ff(e){return Uf.apply(this,arguments)}function Uf(){return Uf=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Qa("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Df(t,new Nf);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Uf.apply(this,arguments)}function jf(e){return Vf.apply(this,arguments)}function Vf(){return Vf=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Qa("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Lf(t,new Pf);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Vf.apply(this,arguments)}function qf(e){return jf(e).then((function(e){return e.syncEngine}))}function Bf(e){return zf.apply(this,arguments)}function zf(){return zf=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jf(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Jh.bind(null,n.syncEngine),r.onUnlisten=tf.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}function Wf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ro;return e.asyncQueue.enqueueAndForget(w(k().mark((function i(){return k().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Rf({next:function(a){t.enqueueAndForget((function(){return jh(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new no(to.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new no(to.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Wh(zs(n.path),a,{includeMetadataChanges:!0,Du:!0});return Fh(e,o)},i.next=3,Bf(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Hf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ro;return e.asyncQueue.enqueueAndForget(w(k().mark((function i(){return k().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Rf({next:function(n){t.enqueueAndForget((function(){return jh(e,o)})),n.fromCache&&"server"===r.source?i.reject(new no(to.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Wh(n,a,{includeMetadataChanges:!0,Du:!0});return Fh(e,o)},i.next=3,Bf(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Kf=new Map;function Gf(e,t,n){if(!n)throw new no(to.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Qf(e){if(!_o.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yf(e){if(_o.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Za()}function Jf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new no(to.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Xf(e);throw new no(to.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var Zf=function(){function e(t){var n;if(S(this,e),void 0===t.host){if(void 0!==t.ssl)throw new no(to.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new no(to.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new no(to.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return N(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),$f=function(){function e(t,n,r){S(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zf({}),this._settingsFrozen=!1,t instanceof $o?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new no(to.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(e.options.projectId)}(t))}return N(e,[{key:"app",get:function(){if(!this._app)throw new no(to.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new no(to.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ao;switch(e.type){case"gapi":var t=e.client;return $a(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new uo(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new no(to.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Kf.get(e);t&&(Qa("ComponentProvider","Removing Datastore"),Kf.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var ed=function(){function e(t,n,r){S(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return N(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new nd(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),td=function(){function e(t,n,r){S(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return N(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),nd=function(e){_(n,e);var t=C(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,zs(i)))._path=i,a.type="collection",a}return N(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ed(this.firestore,null,new _o(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(td);function rd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=we(e),Gf("collection","path",t),e instanceof $f){var a=ko.fromString.apply(ko,[t].concat(r));return Yf(a),new nd(e,null,a)}if(!(e instanceof ed||e instanceof nd))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ko.fromString.apply(ko,[t].concat(r)));return Yf(o),new nd(e.firestore,null,o)}function id(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=we(e),1===arguments.length&&(t=fo.I()),Gf("doc","path",t),e instanceof $f){var a=ko.fromString.apply(ko,[t].concat(r));return Qf(a),new ed(e,null,new _o(a))}if(!(e instanceof ed||e instanceof nd))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ko.fromString.apply(ko,[t].concat(r)));return Qf(o),new ed(e.firestore,e instanceof nd?e.converter:null,new _o(o))}var ad=function(){function e(){var t=this;S(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Ml(this,"async_queue_retry"),this.Kc=function(){var e=Ol();e&&Qa("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Ol();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return N(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=Ol();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new ro;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=w(k().mark((function e(){var t=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Do(e.t0)){e.next=12;break}throw e.t0;case 12:Qa("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ya("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=Ph.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&Za()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=m(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=m(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function od(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=m(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var sd=function(e){_(n,e);var t=C(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new ad,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return N(n,[{key:"_terminate",value:function(){return this._firestoreClient||cd(this),this._firestoreClient.terminate()}}]),n}($f);function ud(e){return e._firestoreClient||cd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cd(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Zo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Af(e._authCredentials,e._appCheckCredentials,e._queue,r)}var ld=function(){function e(){S(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new no(to.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wo(n)}return N(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var hd=function(){function e(t){S(this,e),this._byteString=t}return N(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Wo.fromBase64String(t))}catch(t){throw new no(to.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Wo.fromUint8Array(t))}}]),e}(),fd=N((function e(t){S(this,e),this._methodName=t})),dd=function(){function e(t,n){if(S(this,e),!isFinite(t)||t<-90||t>90)throw new no(to.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new no(to.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return N(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return po(this._lat,e._lat)||po(this._long,e._long)}}]),e}(),pd=/^__.*__$/,vd=function(){function e(t,n,r){S(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Iu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Su(e,this.data,t,this.fieldTransforms)}}]),e}(),yd=function(){function e(t,n,r){S(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return new Iu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function md(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Za()}}var gd=function(){function e(t,n,r,i,a,o){S(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return N(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return Dd(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(md(this.Zc)&&pd.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),kd=function(){function e(t,n,r){S(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||Ll(t)}return N(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new gd({Zc:e,methodName:t,ca:n,path:wo.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function bd(e){var t=e._freezeSettings(),n=Ll(e._databaseId);return new kd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wd(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);Nd("Data must be an object, but it was:",o,r);var s,u,c=Sd(r,o);if(a.merge)s=new zo(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=m(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=Pd(t,d,n);if(!o.contains(p))throw new no(to.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Od(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new zo(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new vd(new ks(c),s,u)}var _d=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(fd);function Ed(e,t,n,r){var i=e.aa(1,t,n);Nd("Data must be an object, but it was:",i,r);var a=[],o=ks.empty();Mo(r,(function(e,r){var s=Ad(t,e,n);r=we(r);var u=i.ia(s);if(r instanceof _d)a.push(s);else{var c=Td(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new zo(a);return new yd(o,s,i.fieldTransforms)}function xd(e,t,n,r,i,a){var o=e.aa(1,t,n),s=[Pd(t,r,n)],u=[i];if(a.length%2!=0)throw new no(to.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Pd(t,a[c])),u.push(a[c+1]);for(var l=[],h=ks.empty(),f=s.length-1;f>=0;--f)if(!Od(l,s[f])){var d=s[f],p=u[f];p=we(p);var v=o.ia(d);if(p instanceof _d)l.push(d);else{var y=Td(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new zo(l);return new yd(h,m,o.fieldTransforms)}function Cd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Td(n,e.aa(r?4:3,t))}function Td(e,t){if(Id(e=we(e)))return Nd("Unsupported field value:",t,e),Sd(e,t);if(e instanceof fd)return function(e,t){if(!md(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=m(e);try{for(a.s();!(n=a.n()).done;){var o=Td(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=we(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return au(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=yo.fromDate(e);return{timestampValue:hc(t.wt,n)}}if(e instanceof yo){var r=new yo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hc(t.wt,r)}}if(e instanceof dd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hd)return{bytesValue:fc(t.wt,e._byteString)};if(e instanceof ed){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:vc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(Xf(e)))}(e,t)}function Sd(e,t){var n={};return Fo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mo(e,(function(e,r){var i=Td(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Id(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yo||e instanceof dd||e instanceof hd||e instanceof ed||e instanceof fd)}function Nd(e,t,n){if(!Id(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Xf(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function Pd(e,t,n){if((t=we(t))instanceof ld)return t._internalPath;if("string"==typeof t)return Ad(e,t);throw Dd("Field path arguments must be of type string or ",e,!1,void 0,n)}var Rd=new RegExp("[~\\*/\\[\\]]");function Ad(e,t,n){if(t.search(Rd)>=0)throw Dd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return d(ld,T(t.split(".")))._internalPath}catch(r){throw Dd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Dd(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new no(to.INVALID_ARGUMENT,s+e+u)}function Od(e,t){return e.some((function(e){return e.isEqual(t)}))}var Ld=function(){function e(t,n,r,i,a){S(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return N(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ed(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Md(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Fd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Md=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){return y(p(n.prototype),"data",this).call(this)}}]),n}(Ld);function Fd(e,t){return"string"==typeof t?Ad(e,t):t instanceof ld?t._internalPath:t._delegate._internalPath}var Ud=function(){function e(t,n){S(this,e),this.hasPendingWrites=t,this.fromCache=n}return N(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),jd=function(e){_(n,e);var t=C(n);function n(e,r,i,a,o,s){var u;return S(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return N(n,[{key:"exists",value:function(){return y(p(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Fd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Ld),Vd=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(p(n.prototype),"data",this).call(this,e)}}]),n}(jd),qd=function(){function e(t,n,r,i){S(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ud(i.hasPendingWrites,i.fromCache),this.query=r}return N(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Vd(n._firestore,n._userDataWriter,r.key,r,new Ud(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new no(to.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Vd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ud(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Vd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ud(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Bd(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Bd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Za()}}function zd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new no(to.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wd=N((function e(){S(this,e)}));function Hd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Kd=function(e){_(n,e);var t=C(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return N(n,[{key:"_apply",value:function(e){var t=bd(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new no(to.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Xd(o,a);var u,c=[],l=m(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(Yd(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=Yd(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Xd(o,a),s=Cd(n,"where",o,"in"===a||"not-in"===a);var f=Ss.create(i,a,s);return function(e,t){if(t.ht()){var n=Hs(e);if(null!==n&&!n.isEqual(t.field))throw new no(to.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ws(e);null!==r&&Jd(e,t.field,r)}var i=function(e,t){var n,r=m(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new no(to.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new no(to.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new td(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new qs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Wd);function Gd(e,t,n){var r=t,i=Fd("where",e);return new Kd(i,r,n)}var Qd=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return N(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new no(to.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new no(to.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Fs(t,n);return function(e,t){if(null===Ws(e)){var n=Hs(e);null!==n&&Jd(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new td(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new qs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Wd);function Yd(e,t,n){if("string"==typeof(n=we(n))){if(""===n)throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ks(t)&&-1!==n.indexOf("/"))throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ko.fromString(n));if(!_o.isDocumentKey(r))throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return hs(e,new _o(r))}if(n instanceof ed)return hs(e,n._key);throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xf(n),"."))}function Xd(e,t){if(!Array.isArray(e)||0===e.length)throw new no(to.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new no(to.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Jd(e,t,n){if(!n.isEqual(t))throw new no(to.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Zd=function(){function e(){S(this,e)}return N(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Go(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Za()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Mo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new dd(Go(e.latitude),Go(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Xo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ko(e);return new yo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ko.fromString(e);$a(Mc(n));var r=new $o(n.get(1),n.get(3)),i=new _o(n.popFirst(5));return r.isEqual(t)||Ya("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $d(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}function ep(e){e=Jf(e,ed);var t=Jf(e.firestore,sd);return Wf(ud(t),e._key).then((function(n){return op(t,e,n)}))}var tp=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new hd(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ed(this.firestore,null,t)}}]),n}(Zd);function np(e){e=Jf(e,td);var t=Jf(e.firestore,sd),n=ud(t),r=new tp(t);return zd(e._query),Hf(n,e._query).then((function(n){return new qd(t,r,e,n)}))}function rp(e,t,n){e=Jf(e,ed);var r=Jf(e.firestore,sd),i=$d(e.converter,t,n);return ap(r,[wd(bd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ku.none())])}function ip(e,t,n){e=Jf(e,ed);for(var r=Jf(e.firestore,sd),i=bd(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return ap(r,[("string"==typeof(t=we(t))||t instanceof ld?xd(i,"updateDoc",e._key,t,n,o):Ed(i,"updateDoc",e._key,t)).toMutation(e._key,ku.exists(!0))])}function ap(e,t){return function(e,t){var n=new ro;return e.asyncQueue.enqueueAndForget(w(k().mark((function r(){return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=rf,r.next=3,qf(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ud(e),t)}function op(e,t,n){var r=n.docs.get(t._key),i=new tp(e);return new jd(e,i,t._key,r,new Ud(n.hasPendingWrites,n.fromCache),t.converter)}var sp;function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},up.apply(this,arguments)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ha="9.9.0",st(new _e("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new sd(i,new oo(e.getProvider("auth-internal")),new lo(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),pt(za,"3.4.12",e),pt(za,"3.4.12","esm2017")}(),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(sp||(sp={}));var cp,lp="popstate";function hp(e){return{usr:e.state,key:e.key}}function fp(e,t,n,r){return void 0===n&&(n=null),up({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?pp(t):t,{state:n,key:(null==t?void 0:t.key)||r||Math.random().toString(36).substr(2,8)})}function dp(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function pp(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vp(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,l=sp.Pop,h=null;function f(){l=sp.Pop,h&&h({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(lp,f),h=e,function(){o.removeEventListener(lp,f),h=null}},createHref:function(e){return t(o,e)},push:function(e,t){l=sp.Push;var r=fp(d.location,e,t);null==n||n(r,e);var i=hp(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(Lv){o.location.assign(a)}u&&h&&h({action:l,location:r})},replace:function(e,t){l=sp.Replace;var r=fp(d.location,e,t);null==n||n(r,e);var i=hp(r),a=d.createHref(r);c.replaceState(i,"",a),u&&h&&h({action:l,location:r})},go:function(e){return c.go(e)}};return d}function yp(e,t,n){void 0===n&&(n="/");var r=Ep(("string"===typeof t?pp(t):t).pathname||"/",n);if(null==r)return null;var i=mp(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=wp(i[o],r);return a}function mp(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(xp(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=Sp([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(xp(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),mp(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:bp(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(cp||(cp={}));var gp=/^:\w+$/,kp=function(e){return"*"===e};function bp(e,t){var n=e.split("/"),r=n.length;return n.some(kp)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!kp(e)})).reduce((function(e,t){return e+(gp.test(t)?3:""===t?1:10)}),r)}function wp(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=_p({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:Sp([i,l.pathname]),pathnameBase:Ip(Sp([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=Sp([i,l.pathnameBase]))}return a}function _p(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Cp("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Lv){return Cp(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Lv+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function Ep(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function xp(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Cp(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Tp(e,t,n,r){void 0===r&&(r=!1);var i,a="string"===typeof e?pp(e):up({},e),o=""===e||""===a.pathname,s=o?"/":a.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;a.pathname=c.join("/")}i=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?pp(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Np(a),hash:Pp(s)}}(a,i),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var Sp=function(e){return e.join("/").replace(/\/\/+/g,"/")},Ip=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Np=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Pp=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Rp=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(P(Error));var Ap=N((function e(t,n,r){S(this,e),this.status=t,this.statusText=n||"",this.data=r}));function Dp(e){return e instanceof Ap}function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Op.apply(this,arguments)}var Lp="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Mp=e.useState,Fp=e.useEffect,Up=e.useLayoutEffect,jp=e.useDebugValue;function Vp(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Lp(n,r)}catch(Lv){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var qp=e.createContext(null);var Bp=e.createContext(null);var zp=e.createContext(null);var Wp=e.createContext(null);var Hp=e.createContext(null);var Kp=e.createContext(null);var Gp=e.createContext({outlet:null,matches:[]});var Qp=e.createContext(null);function Yp(){return null!=e.useContext(Kp)}function Xp(){return Yp()||xp(!1),e.useContext(Kp).location}function Jp(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function Zp(){Yp()||xp(!1);var t=e.useContext(Hp),n=t.basename,r=t.navigator,i=e.useContext(Gp).matches,a=Xp().pathname,o=JSON.stringify(Jp(i).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);e.useEffect((function(){s.current=!0}));var u=e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=Tp(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:Sp([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return u}function $p(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(Gp).matches,a=Xp().pathname,o=JSON.stringify(Jp(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return Tp(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function ev(){var t=function(){var t,n=e.useContext(Qp),r=av(tv.UseRouteError),i=e.useContext(Gp),a=i.matches[i.matches.length-1];if(n)return n;return i||xp(!1),!a.route.id&&xp(!1),null==(t=r.errors)?void 0:t[a.route.id]}(),n=Dp(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unhandled Thrown Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",e.createElement("code",{style:o},"errorElement")," props on\xa0",e.createElement("code",{style:o},"<Route>")))}var tv,nv=function(t){_(r,t);var n=C(r);function r(e){var t;return S(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return N(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(Qp.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function rv(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(qp);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),e.createElement(Gp.Provider,{value:n},i)}function iv(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||xp(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(t,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||e.createElement(ev,null):null,l=function(){return e.createElement(rv,{match:o,routeContext:{outlet:t,matches:n.concat(i.slice(0,s+1))}},u?c:void 0!==o.route.element?o.route.element:t)};return r&&(o.route.errorElement||0===s)?e.createElement(nv,{location:r.location,component:c,error:u,children:l()}):l()}),null)}function av(t){var n=e.useContext(zp);return n||xp(!1),n}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(tv||(tv={}));var ov;function sv(t){var n=t.to,r=t.replace,i=t.state,a=t.relative;Yp()||xp(!1);var o=e.useContext(zp),s=Zp();return e.useEffect((function(){o&&"idle"!==o.navigation.state||s(n,{replace:r,state:i,relative:a})})),null}function uv(e){xp(!1)}function cv(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,u=void 0===s?sp.Pop:s,c=t.navigator,l=t.static,h=void 0!==l&&l;Yp()&&xp(!1);var f=r.replace(/^\/*/,"/"),d=e.useMemo((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=pp(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,E=p.key,x=void 0===E?"default":E,C=e.useMemo((function(){var e=Ep(y,f);return null==e?null:{pathname:e,search:g,hash:b,state:_,key:x}}),[f,y,g,b,_,x]);return null==C?null:e.createElement(Hp.Provider,{value:d},e.createElement(Kp.Provider,{children:a,value:{location:C,navigationType:u}}))}function lv(t){var n=t.children,r=t.location,i=e.useContext(Bp);return function(t,n){Yp()||xp(!1);var r,i=e.useContext(zp),a=e.useContext(Gp).matches,o=a[a.length-1],s=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,Xp());if(n){var l,h="string"===typeof n?pp(n):n;"/"===u||(null==(l=h.pathname)?void 0:l.startsWith(u))||xp(!1),r=h}else r=c;var f=r.pathname||"/",d=yp(t,{pathname:"/"===u?f:f.slice(u.length)||"/"}),p=iv(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:Sp([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Sp([u,e.pathnameBase])})})),a,i||void 0);return n?e.createElement(Kp.Provider,{value:{location:Op({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:sp.Pop}},p):p}(i&&!n?i.router.routes:fv(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ov||(ov={}));var hv=new Promise((function(){}));e.Component;function fv(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==uv&&xp(!1);var a=[].concat(T(n),[i]),o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(o.children=fv(t.props.children,a)),r.push(o)}else r.push.apply(r,fv(t.props.children,n))})),r}function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(this,arguments)}function pv(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var vv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function yv(t){var n,r=t.basename,i=t.children,a=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),vp((function(e,t){var n,r,i=e.location;return fp("",{pathname:i.pathname,search:i.search,hash:i.hash},(null==(n=t.state)?void 0:n.usr)||null,(null==(r=t.state)?void 0:r.key)||"default")}),(function(e,t){return"string"===typeof t?t:dp(t)}),null,n)));var s=o.current,u=l(e.useState({action:s.action,location:s.location}),2),c=u[0],h=u[1];return e.useLayoutEffect((function(){return s.listen(h)}),[s]),e.createElement(cv,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:s})}var mv=e.forwardRef((function(t,n){var r=t.onClick,i=t.relative,a=t.reloadDocument,o=t.replace,s=t.state,u=t.target,c=t.to,l=t.preventScrollReset,h=pv(t,vv),f=function(t,n){var r=(void 0===n?{}:n).relative;Yp()||xp(!1);var i=e.useContext(Hp),a=i.basename,o=i.navigator,s=$p(t,{relative:r}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==a&&(h="/"===c?a:Sp([a,c])),o.createHref({pathname:h,search:l,hash:u})}(c,{relative:i}),d=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,c=Zp(),l=Xp(),h=$p(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:dp(l)===dp(h);c(t,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,h,a,o,i,t,s,u])}(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:i});return e.createElement("a",dv({},h,{href:f,onClick:a?r:function(e){r&&r(e),e.defaultPrevented||d(e)},ref:n,target:u}))}));var gv="@firebase/database",kv="0.13.3",bv="";var wv=function(){function e(t){S(this,e),this.domStorage_=t,this.prefix_="firebase:"}return N(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),re(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ne(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),_v=function(){function e(){S(this,e),this.cache_={},this.isInMemoryStorage=!0}return N(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ae(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Ev=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new wv(t)}}catch(n){}return new _v},xv=Ev("localStorage"),Cv=Ev("sessionStorage"),Tv=new De("@firebase/database"),Sv=function(){var e=1;return function(){return e++}}(),Iv=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,O(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new pe;n.update(t);var r=n.digest();return F.encodeByteArray(r)},Nv=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?re(r):r,t+=" "}return t},Pv=null,Rv=!0,Av=function(e,t){O(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Tv.logLevel=Te.VERBOSE,Pv=Tv.log.bind(Tv),t&&Cv.set("logging_enabled",!0)):"function"===typeof e?Pv=e:(Pv=null,Cv.remove("logging_enabled"))},Dv=function(){if(!0===Rv&&(Rv=!1,null===Pv&&!0===Cv.get("logging_enabled")&&Av(!0)),Pv){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Nv.apply(null,t);Pv(r)}},Ov=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Dv.apply(void 0,[e].concat(n))}},Lv=function(){var e="FIREBASE INTERNAL ERROR: "+Nv.apply(void 0,arguments);Tv.error(e)},Mv=function(){var e="FIREBASE FATAL ERROR: ".concat(Nv.apply(void 0,arguments));throw Tv.error(e),new Error(e)},Fv=function(){var e="FIREBASE WARNING: "+Nv.apply(void 0,arguments);Tv.warn(e)},Uv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},jv="[MIN_NAME]",Vv="[MAX_NAME]",qv=function(e,t){if(e===t)return 0;if(e===jv||t===Vv)return-1;if(t===jv||e===Vv)return 1;var n=Jv(e),r=Jv(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Bv=function(e,t){return e===t?0:e<t?-1:1},zv=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+re(t))},Wv=function e(t){if("object"!==typeof t||null===t)return re(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=re(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Hv=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Kv(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Gv=function(e){O(!Uv(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Qv=new RegExp("^-?(0*)\\d{1,10}$"),Yv=-2147483648,Xv=2147483647,Jv=function(e){if(Qv.test(e)){var t=Number(e);if(t>=Yv&&t<=Xv)return t}return null},Zv=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Fv("Exception was thrown by user callback.",e),t}),Math.floor(0))}},$v=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},ey=function(){function e(t,n){var r=this;S(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return N(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Fv('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),ty=function(){function e(t,n,r){var i=this;S(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return N(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Dv("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fv(e)}}]),e}(),ny=function(){function e(t){S(this,e),this.accessToken=t}return N(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();ny.OWNER="owner";var ry="5",iy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ay="websocket",oy="long_polling",sy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];S(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xv.get("host:"+t)||this._host}return N(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xv.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function uy(e,t,n){var r;if(O("string"===typeof t,"typeof type must == string"),O("object"===typeof n,"typeof params must == object"),t===ay)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==oy)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Kv(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var cy=function(){function e(){S(this,e),this.counters_={}}return N(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ae(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return q(this.counters_)}}]),e}(),ly={},hy={};function fy(e){var t=e.toString();return ly[t]||(ly[t]=new cy),ly[t]}var dy=function(){function e(t){S(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return N(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Zv((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),py="start",vy="close",yy=function(){function e(t,n,r,i,a,o,s){var u=this;S(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ov(t),this.stats_=fy(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),uy(n,oy,e)}}return N(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dy(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Y()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new my((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===py)n.id=a,n.password=o;else{if(i!==vy)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ry,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&iy.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=re(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=U(t),r=Hv(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Y()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=re(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Y()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),my=function(){function e(t,n,r,i){if(S(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Y())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Sv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Dv("frame writing exception"),s.stack&&Dv(s.stack),Dv(s)}}}return N(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Y()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Dv("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Dv("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),gy=null;"undefined"!==typeof MozWebSocket?gy=MozWebSocket:"undefined"!==typeof WebSocket&&(gy=WebSocket);var ky=function(){function e(t,n,r,i,a,o,s){S(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ov(this.connId),this.stats_=fy(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return N(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xv.set("previous_websocket_failure",!0);try{var r;if(Y()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(ry,"/").concat(bv,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Chatster-chat_app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new gy(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){xv.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ne(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(O(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=re(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Hv(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=ry,!Y()&&"undefined"!==typeof location&&location.hostname&&iy.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),uy(e,ay,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==gy&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return xv.isInMemoryStorage||!0===xv.get("previous_websocket_failure")}}]),e}();ky.responsesRequiredToBeHealthy=2,ky.healthyTimeout=3e4;var by=function(){function e(t){S(this,e),this.initTransports_(t)}return N(e,[{key:"initTransports_",value:function(t){var n=ky&&ky.isAvailable(),r=n&&!ky.previouslyFailed();if(t.webSocketOnly&&(n||Fv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ky];else{var i,a=this.transports_=[],o=m(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[yy,ky]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();by.globalTransportInitialized_=!1;var wy=function(){function e(t,n,r,i,a,o,s,u,c,l){S(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ov("c:"+this.id+":"),this.transportManager_=new by(n),this.log_("Connection created"),this.start_()}return N(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=$v((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=zv("t",e),n=zv("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=zv("t",e),n=zv("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=zv("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Lv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lv("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ry!==n&&Fv("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$v((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$v((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xv.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),_y=function(){function e(){S(this,e)}return N(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ey=function(){function e(t){S(this,e),this.allowedEvents_=t,this.listeners_={},O(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return N(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=T(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){O(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),xy=function(e){_(n,e);var t=C(n);function n(){var e;return S(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||H()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return N(n,[{key:"getInitialEvent",value:function(e){return O("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ey),Cy=function(){function e(t,n){if(S(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return N(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Ty(){return new Cy("")}function Sy(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Iy(e){return e.pieces_.length-e.pieceNum_}function Ny(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Cy(e.pieces_,t)}function Py(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ry(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Ay(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Cy(t,0)}function Dy(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Cy)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Cy(n,0)}function Oy(e){return e.pieceNum_>=e.pieces_.length}function Ly(e,t){var n=Sy(e),r=Sy(t);if(null===n)return t;if(n===r)return Ly(Ny(e),Ny(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function My(e,t){for(var n=Ry(e,0),r=Ry(t,0),i=0;i<n.length&&i<r.length;i++){var a=qv(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Fy(e,t){if(Iy(e)!==Iy(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Uy(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Iy(e)>Iy(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var jy=N((function e(t,n){S(this,e),this.errorPrefix_=n,this.parts_=Ry(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ge(this.parts_[r]);Vy(this)}));function Vy(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qy(e))}function qy(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var By=function(e){_(n,e);var t=C(n);function n(){var e,r,i;return S(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return N(n,[{key:"getInitialEvent",value:function(e){return O("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ey),zy=1e3,Wy=function(e){_(n,e);var t=C(n);function n(e,r,i,a,o,s,u,c){var l;if(S(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Ov("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=zy,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Y())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return By.getInstance().on("visible",l.onVisible_,E(l)),-1===e.host.indexOf("fblocal")&&xy.getInstance().on("online",l.onOnline_,E(l)),l}return N(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(re(i)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new z,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ie(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ie(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+re(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Lv("Unrecognized action received from server: "+re(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zy,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zy),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=w(k().mark((function e(){var t,r,i,a,o,s,u,c,h,f,d,p,v,y,m=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){O(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],y=p[1],s?Dv("getToken() completed but was canceled"):(Dv("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,u=new wy(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Fv(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Fv(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Dv("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Dv("Resuming connection for reason: "+e),delete this.interruptReasons_[e],se(this.interruptReasons_)&&(this.reconnectDelay_=zy,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Wv(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Cy(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Dv("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Dv("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=m(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=m(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Y()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+bv.replace(/\./g,"-")]=1,H()?e["framework.cordova"]=1:G()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=xy.getInstance().currentlyOnline();return se(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ae(e,"w")){var n=oe(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Fv("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(_y);Wy.nextPersistentConnectionId_=0,Wy.nextConnectionId_=0;var Hy,Ky=function(){function e(t,n){S(this,e),this.name=t,this.node=n}return N(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Gy=function(){function e(){S(this,e)}return N(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Ky(jv,e),r=new Ky(jv,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Ky.MIN}}]),e}(),Qy=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){return qv(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw L("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Ky.MIN}},{key:"maxPost",value:function(){return new Ky(Vv,Hy)}},{key:"makePost",value:function(e,t){return O("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ky(e,Hy)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Hy},set:function(e){Hy=e}}]),n}(Gy),Yy=new Qy,Xy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;S(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return N(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Jy=function(){function e(t,n,r,i,a){S(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:em.EMPTY_NODE,this.right=null!=a?a:em.EMPTY_NODE}return N(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return em.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return em.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Jy.RED=!0,Jy.BLACK=!1;var Zy,$y=function(){function e(){S(this,e)}return N(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Jy(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),em=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;S(this,e),this.comparator_=t,this.root_=n}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Jy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Jy.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Xy(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Xy(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Xy(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Xy(this.root_,null,this.comparator_,!0,e)}}]),e}();function tm(e,t){return qv(e.name,t.name)}function nm(e,t){return qv(e,t)}em.EMPTY_NODE=new $y;var rm,im,am,om=function(e){return"number"===typeof e?"number:"+Gv(e):"string:"+e},sm=function(e){if(e.isLeafNode()){var t=e.val();O("string"===typeof t||"number"===typeof t||"object"===typeof t&&ae(t,".sv"),"Priority must be a string or number.")}else O(e===Zy||e.isEmpty(),"priority of unexpected type.");O(e===Zy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},um=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;S(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,O(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),sm(this.priorityNode_)}return N(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Oy(t)?this:".priority"===Sy(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Sy(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(O(".priority"!==r||1===Iy(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ny(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+om(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Gv(this.value_):this.value_,this.lazyHash_=Iv(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(O(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return O(i>=0,"Unknown leaf type: "+n),O(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return rm},set:function(e){rm=e}}]),e}();um.VALUE_TYPE_ORDER=["object","boolean","number","string"];var cm,lm,hm=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?qv(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Ky.MIN}},{key:"maxPost",value:function(){return new Ky(Vv,new um("[PRIORITY-POST]",am))}},{key:"makePost",value:function(e,t){var n=im(e);return new Ky(t,new um("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Gy),fm=new hm,dm=Math.log(2),pm=function(){function e(t){S(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/dm,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return N(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),vm=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new Jy(o,a.node,Jy.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new Jy(o,a.node,Jy.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new Jy(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Jy.BLACK):(s(h,Jy.BLACK),s(h,Jy.RED))}return a}(new pm(e.length));return new em(r||t,a)},ym={},mm=function(){function e(t,n){S(this,e),this.indexes_=t,this.indexSet_=n}return N(e,[{key:"get",value:function(e){var t=oe(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof em?t:null}},{key:"hasIndex",value:function(e){return ae(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){O(t!==Yy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Ky.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?vm(i,t.getCompare()):ym;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(ue(this.indexes_,(function(e,i){var a=oe(r.indexSet_,i);if(O(a,"Missing index implementation for "+i),e===ym){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Ky.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),vm(o,a.getCompare())}return ym}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Ky(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(ue(this.indexes_,(function(e){if(e===ym)return e;var r=n.get(t.name);return r?e.remove(new Ky(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return O(ym&&fm,"ChildrenNode.ts has not been loaded"),cm=cm||new e({".priority":ym},{".priority":fm})}}]),e}(),gm=function(){function e(t,n,r){S(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&sm(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return N(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||lm}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?lm:t}},{key:"getChild",value:function(e){var t=Sy(e);return null===t?this:this.getImmediateChild(t).getChild(Ny(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(O(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Ky(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?lm:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Sy(e);if(null===n)return t;O(".priority"!==Sy(e)||1===Iy(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ny(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(fm,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+om(this.getPriority().val())+":"),this.forEachChild(fm,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Iv(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ky(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Ky(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Ky(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Ky.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Ky.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===km?-1:0}},{key:"withIndex",value:function(t){if(t===Yy||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Yy||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(fm),r=t.getIterator(fm),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Yy?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return lm||(lm=new e(new em(nm),null,mm.Default))}}]),e}();gm.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var km=new(function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.call(this,new em(nm),gm.EMPTY_NODE,mm.Default)}return N(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return gm.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(gm));Object.defineProperties(Ky,{MIN:{value:new Ky(jv,gm.EMPTY_NODE)},MAX:{value:new Ky(Vv,km)}}),Qy.__EMPTY_NODE=gm.EMPTY_NODE,um.__childrenNodeConstructor=gm,Zy=km,function(e){am=e}(km);function bm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return gm.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),O(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new um(n,bm(t))}if(e instanceof Array){var r=gm.EMPTY_NODE;return Kv(e,(function(t,n){if(ae(e,t)&&"."!==t.substring(0,1)){var i=bm(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(bm(t))}var i=[],a=!1,o=e;if(Kv(o,(function(e,t){if("."!==e.substring(0,1)){var n=bm(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Ky(e,n)))}})),0===i.length)return gm.EMPTY_NODE;var s=vm(i,tm,(function(e){return e.name}),nm);if(a){var u=vm(i,fm.getCompare());return new gm(s,bm(t),new mm({".priority":u},{".priority":fm}))}return new gm(s,bm(t),mm.Default)}!function(e){im=e}(bm);var wm=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this)).indexPath_=e,O(!Oy(e)&&".priority"!==Sy(e),"Can't create PathIndex with empty path or .priority key"),r}return N(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?qv(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=bm(e),r=gm.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ky(t,r)}},{key:"maxPost",value:function(){var e=gm.EMPTY_NODE.updateChild(this.indexPath_,km);return new Ky(Vv,e)}},{key:"toString",value:function(){return Ry(this.indexPath_,0).join("/")}}]),n}(Gy),_m=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?qv(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Ky.MIN}},{key:"maxPost",value:function(){return Ky.MAX}},{key:"makePost",value:function(e,t){var n=bm(e);return new Ky(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Gy),Em=new _m,xm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function Cm(e){return{type:"value",snapshotNode:e}}function Tm(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Sm(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Im(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Nm=function(){function e(t){S(this,e),this.index_=t}return N(e,[{key:"updateChild",value:function(e,t,n,r,i,a){O(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Sm(t,o)):O(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Tm(t,n)):a.trackChildChange(Im(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(fm,(function(e,r){t.hasChild(e)||n.trackChildChange(Sm(e,r))})),t.isLeafNode()||t.forEachChild(fm,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Im(t,r,i))}else n.trackChildChange(Tm(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?gm.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Pm=function(){function e(t){S(this,e),this.indexedFilter_=new Nm(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return N(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Ky(t,n))||(n=gm.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=gm.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(gm.EMPTY_NODE);var i=this;return t.forEachChild(fm,(function(e,t){i.matches(new Ky(e,t))||(r=r.updateImmediateChild(e,gm.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Rm=function(){function e(t){S(this,e),this.rangedFilter_=new Pm(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return N(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Ky(t,n))||(n=gm.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=gm.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=gm.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(gm.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,gm.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;O(s.numChildren()===this.limit_,"");var u=new Ky(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Im(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Sm(t,h));var p=s.updateImmediateChild(t,gm.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Tm(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(Sm(c.name,c.node)),i.trackChildChange(Tm(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,gm.EMPTY_NODE)):e}}]),e}(),Am=function(){function e(){S(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fm}return N(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jv}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vv}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===fm}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Dm(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Om(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Lm(e,t){var n=e.copy();return n.index_=t,n}function Mm(e){var t,n={};return e.isDefault()||(e.index_===fm?t="$priority":e.index_===Em?t="$value":e.index_===Yy?t="$key":(O(e.index_ instanceof wm,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=re(t),e.startSet_&&(n.startAt=re(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+re(e.indexStartName_))),e.endSet_&&(n.endAt=re(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+re(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Fm(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==fm&&(t.i=e.index_.toString()),t}var Um=function(e){_(n,e);var t=C(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Ov("p:rest:"),o.listens_={},o}return N(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Mm(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),oe(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Mm(e._queryParams),r=e._path.toString(),i=new z;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+he(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ne(c.responseText)}catch(n){Fv("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Fv("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(_y),jm=function(){function e(){S(this,e),this.rootNode_=gm.EMPTY_NODE}return N(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Vm(){return{value:null,children:new Map}}function qm(e,t,n){if(Oy(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Sy(t);e.children.has(r)||e.children.set(r,Vm()),qm(e.children.get(r),t=Ny(t),n)}}function Bm(e,t){if(Oy(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(fm,(function(t,n){qm(e,new Cy(t),n)})),Bm(e,t)}if(e.children.size>0){var r=Sy(t);if(t=Ny(t),e.children.has(r))Bm(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function zm(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){zm(r,new Cy(t.toString()+"/"+e),n)}))}var Wm,Hm=function(){function e(t){S(this,e),this.collection_=t,this.last_=null}return N(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Kv(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Km=function(){function e(t,n){S(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Hm(t);var r=1e4+2e4*Math.random();$v(this.reportStats_.bind(this),Math.floor(r))}return N(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Kv(t,(function(t,i){i>0&&ae(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),$v(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Gm(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Wm||(Wm={}));var Qm,Ym=function(){function e(t,n,r){S(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Wm.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return N(e,[{key:"operationForChild",value:function(t){if(Oy(this.path)){if(null!=this.affectedTree.value)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Cy(t));return new e(Ty(),n,this.revert)}return O(Sy(this.path)===t,"operationForChild called for unrelated child."),new e(Ny(this.path),this.affectedTree,this.revert)}}]),e}(),Xm=function(){function e(t,n){S(this,e),this.source=t,this.path=n,this.type=Wm.LISTEN_COMPLETE}return N(e,[{key:"operationForChild",value:function(t){return Oy(this.path)?new e(this.source,Ty()):new e(this.source,Ny(this.path))}}]),e}(),Jm=function(){function e(t,n,r){S(this,e),this.source=t,this.path=n,this.snap=r,this.type=Wm.OVERWRITE}return N(e,[{key:"operationForChild",value:function(t){return Oy(this.path)?new e(this.source,Ty(),this.snap.getImmediateChild(t)):new e(this.source,Ny(this.path),this.snap)}}]),e}(),Zm=function(){function e(t,n,r){S(this,e),this.source=t,this.path=n,this.children=r,this.type=Wm.MERGE}return N(e,[{key:"operationForChild",value:function(t){if(Oy(this.path)){var n=this.children.subtree(new Cy(t));return n.isEmpty()?null:n.value?new Jm(this.source,Ty(),n.value):new e(this.source,Ty(),n)}return O(Sy(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ny(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),$m=function(){function e(t,n,r){S(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return N(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Oy(e))return this.isFullyInitialized()&&!this.filtered_;var t=Sy(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),eg=N((function e(t){S(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function tg(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw L("Should only compare child_ events.");var r=new Ky(t.childName,t.snapshotNode),i=new Ky(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function ng(e,t){return{eventCache:e,serverCache:t}}function rg(e,t,n,r){return ng(new $m(t,n,r),e.serverCache)}function ig(e,t,n,r){return ng(e.eventCache,new $m(t,n,r))}function ag(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function og(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var sg=function(){return Qm||(Qm=new em(Bv)),Qm},ug=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sg();S(this,e),this.value=t,this.children=n}return N(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Ty(),value:this.value};if(Oy(e))return null;var n=Sy(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ny(e),t);return null!=i?{path:Dy(new Cy(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Oy(t))return this;var n=Sy(t),r=this.children.get(n);return null!==r?r.subtree(Ny(t)):new e(null)}},{key:"set",value:function(t,n){if(Oy(t))return new e(n,this.children);var r=Sy(t),i=(this.children.get(r)||new e(null)).set(Ny(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Oy(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Sy(t),r=this.children.get(n);if(r){var i,a=r.remove(Ny(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Oy(e))return this.value;var t=Sy(e),n=this.children.get(t);return n?n.get(Ny(e)):null}},{key:"setTree",value:function(t,n){if(Oy(t))return n;var r,i=Sy(t),a=(this.children.get(i)||new e(null)).setTree(Ny(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Ty(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Dy(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Ty(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Oy(e))return null;var i=Sy(e),a=this.children.get(i);return a?a.findOnPath_(Ny(e),Dy(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Ty(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Oy(t))return this;this.value&&r(n,this.value);var i=Sy(t),a=this.children.get(i);return a?a.foreachOnPath_(Ny(t),Dy(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Ty(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Dy(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Kv(t,(function(e,t){n=n.set(new Cy(e),t)})),n}}]),e}(),cg=function(){function e(t){S(this,e),this.writeTree_=t}return N(e,null,[{key:"empty",value:function(){return new e(new ug(null))}}]),e}();function lg(e,t,n){if(Oy(t))return new cg(new ug(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Ly(i,t);return a=a.updateChild(o,n),new cg(e.writeTree_.set(i,a))}var s=new ug(n),u=e.writeTree_.setTree(t,s);return new cg(u)}function hg(e,t,n){var r=e;return Kv(n,(function(e,n){r=lg(r,Dy(t,e),n)})),r}function fg(e,t){if(Oy(t))return cg.empty();var n=e.writeTree_.setTree(t,new ug(null));return new cg(n)}function dg(e,t){return null!=pg(e,t)}function pg(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ly(n.path,t)):null}function vg(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(fm,(function(e,n){t.push(new Ky(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Ky(e,n.value))})),t}function yg(e,t){if(Oy(t))return e;var n=pg(e,t);return new cg(null!=n?new ug(n):e.writeTree_.subtree(t))}function mg(e){return e.writeTree_.isEmpty()}function gg(e,t){return kg(Ty(),e.writeTree_,t)}function kg(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(O(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=kg(Dy(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Dy(e,".priority"),r)),n}function bg(e,t){return Og(t,e)}function wg(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function _g(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));O(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Eg(s,r.path)?i=!1:Uy(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Cg(e.allWrites,xg,Ty()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=fg(e.visibleWrites,r.path):Kv(r.children,(function(t){e.visibleWrites=fg(e.visibleWrites,Dy(r.path,t))}));return!0}return!1}function Eg(e,t){if(e.snap)return Uy(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Uy(Dy(e.path,n),t))return!0;return!1}function xg(e){return e.visible}function Cg(e,t,n){for(var r=cg.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Uy(n,o)?r=lg(r,s=Ly(n,o),a.snap):Uy(o,n)&&(s=Ly(o,n),r=lg(r,Ty(),a.snap.getChild(s)));else{if(!a.children)throw L("WriteRecord should have .snap or .children");if(Uy(n,o))r=hg(r,s=Ly(n,o),a.children);else if(Uy(o,n))if(Oy(s=Ly(o,n)))r=hg(r,Ty(),a.children);else{var u=oe(a.children,Sy(s));if(u){var c=u.getChild(Ny(s));r=lg(r,Ty(),c)}}}}}return r}function Tg(e,t,n,r,i){if(r||i){var a=yg(e.visibleWrites,t);if(!i&&mg(a))return n;if(i||null!=n||dg(a,Ty())){return gg(Cg(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Uy(e.path,t)||Uy(t,e.path))}),t),n||gm.EMPTY_NODE)}return null}var o=pg(e.visibleWrites,t);if(null!=o)return o;var s=yg(e.visibleWrites,t);return mg(s)?n:null!=n||dg(s,Ty())?gg(s,n||gm.EMPTY_NODE):null}function Sg(e,t,n,r){return Tg(e.writeTree,e.treePath,t,n,r)}function Ig(e,t){return function(e,t,n){var r=gm.EMPTY_NODE,i=pg(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(fm,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=yg(e.visibleWrites,t);return n.forEachChild(fm,(function(e,t){var n=gg(yg(a,new Cy(e)),t);r=r.updateImmediateChild(e,n)})),vg(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return vg(yg(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ng(e,t,n,r){return function(e,t,n,r,i){O(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Dy(t,n);if(dg(e.visibleWrites,a))return null;var o=yg(e.visibleWrites,a);return mg(o)?i.getChild(n):gg(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Pg(e,t){return function(e,t){return pg(e.visibleWrites,t)}(e.writeTree,Dy(e.treePath,t))}function Rg(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=yg(e.visibleWrites,t),c=pg(u,Ty());if(null!=c)s=c;else{if(null==n)return[];s=gg(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Ag(e,t,n){return function(e,t,n,r){var i=Dy(t,n),a=pg(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?gg(yg(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Dg(e,t){return Og(Dy(e.treePath,t),e.writeTree)}function Og(e,t){return{treePath:e,writeTree:t}}var Lg=function(){function e(){S(this,e),this.changeMap=new Map}return N(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;O("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),O(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Im(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Sm(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Tm(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw L("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Im(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Mg=new(function(){function e(){S(this,e)}return N(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Fg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;S(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return N(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new $m(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ag(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:og(this.viewCache_),i=Rg(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Ug(e,t,n,r,i){var a,o,s=new Lg;if(n.type===Wm.OVERWRITE){var u=n;u.source.fromUser?a=qg(e,t,u.path,u.snap,r,i,s):(O(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Oy(u.path),a=Vg(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Wm.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=Dy(n,r);Bg(t,Sy(c))&&(s=qg(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=Dy(n,r);Bg(t,Sy(c))||(s=qg(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(O(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Wg(e,t,c.path,c.children,r,i,o,s))}else if(n.type===Wm.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Pg(r,n))return t;var s,u=new Fg(r,t,i),c=t.eventCache.getNode();if(Oy(n)||".priority"===Sy(n)){var l;if(t.serverCache.isFullyInitialized())l=Sg(r,og(t));else{var h=t.serverCache.getNode();O(h instanceof gm,"serverChildren would be complete if leaf node"),l=Ig(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=Sy(n),d=Ag(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Ny(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,gm.EMPTY_NODE,Ny(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Sg(r,og(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Pg(r,Ty()),rg(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Pg(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Oy(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Vg(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Oy(n)){var c=new ug(null);return u.getNode().forEachChild(Yy,(function(e,t){c=c.set(new Cy(e),t)})),Wg(e,t,n,c,i,a,s,o)}return t}var l=new ug(null);return r.foreach((function(e,t){var r=Dy(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Wg(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Wm.LISTEN_COMPLETE)throw L("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=ig(t,a.getNode(),a.isFullyInitialized()||Oy(n),a.isFiltered());return jg(e,o,n,r,Mg,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ag(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Cm(ag(t)))}}(t,a,h),{viewCache:a,changes:h}}function jg(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Pg(r,n))return t;if(Oy(n))if(O(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=og(t),l=Ig(r,c instanceof gm?c:gm.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Sg(r,og(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Sy(n);if(".priority"===f){O(1===Iy(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Ng(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=Ny(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=Ng(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=Ag(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return rg(t,o,u.isFullyInitialized()||Oy(n),e.filter.filtersNodes())}function Vg(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Oy(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Sy(n);if(!c.isCompleteForPath(n)&&Iy(n)>1)return t;var d=Ny(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Mg,null)}var v=ig(t,u,c.isFullyInitialized()||Oy(n),l.filtersNodes());return jg(e,v,n,i,new Fg(i,v,a),s)}function qg(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new Fg(i,t,a);if(Oy(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=rg(t,u,!0,e.filter.filtersNodes());else{var h=Sy(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=rg(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Ny(n),p=c.getNode().getImmediateChild(h);if(Oy(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Py(d)&&v.getChild(Ay(d)).isEmpty()?v:v.updateChild(d,r):gm.EMPTY_NODE}if(p.equals(f))s=t;else s=rg(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Bg(e,t){return e.eventCache.isCompleteForChild(t)}function zg(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Wg(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Oy(n)?r:new ug(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=zg(0,t.serverCache.getNode().getImmediateChild(n),r);c=Vg(e,c,new Cy(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=zg(0,t.serverCache.getNode().getImmediateChild(n),r);c=Vg(e,c,new Cy(n),h,i,a,o,s)}})),c}var Hg,Kg=function(){function e(t,n){S(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Nm(i.getIndex()),o=(r=i).loadsAllData()?new Nm(r.getIndex()):r.hasLimit()?new Rm(r):new Pm(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(gm.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(gm.EMPTY_NODE,u.getNode(),null),h=new $m(c,s.isFullyInitialized(),a.filtersNodes()),f=new $m(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=ng(f,h),this.eventGenerator_=new eg(this.query_)}return N(e,[{key:"query",get:function(){return this.query_}}]),e}();function Gg(e,t){var n=og(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Oy(t)&&!n.getImmediateChild(Sy(t)).isEmpty())?n.getChild(t):null}function Qg(e){return 0===e.eventRegistrations_.length}function Yg(e,t,n){var r=[];if(n){O(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Xg(e,t,n,r){t.type===Wm.MERGE&&null!==t.source.queryId&&(O(og(e.viewCache_),"We should always have a full cache before handling merges"),O(ag(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Ug(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,O(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),O(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),O(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Jg(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Jg(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),tg(e,i,"child_removed",t,r,n),tg(e,i,"child_added",t,r,n),tg(e,i,"child_moved",a,r,n),tg(e,i,"child_changed",t,r,n),tg(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Zg,$g=N((function e(){S(this,e),this.views=new Map}));function ek(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return O(null!=a,"SyncTree gave us an op for an invalid query."),Xg(a,t,n,r)}var o,s=[],u=m(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(Xg(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function tk(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Sg(n,i?r:null),u=!1;s?u=!0:r instanceof gm?(s=Ig(n,r),u=!1):(s=gm.EMPTY_NODE,u=!1);var c=ng(new $m(s,u,!1),new $m(r,i,!1));return new Kg(t,c)}return o}function nk(e,t,n,r,i,a){var o=tk(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(fm,(function(e,t){r.push(Tm(e,t))})),n.isFullyInitialized()&&r.push(Cm(n.getNode())),Jg(e,r,n.getNode(),t)}(o,n)}function rk(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=uk(e);if("default"===i){var u,c=m(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];o=o.concat(Yg(d,n,r)),Qg(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Yg(p,n,r)),Qg(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!uk(e)&&a.push(new(O(Hg,"Reference.ts has not been loaded"),Hg)(t._repo,t._path)),{removed:a,events:o}}function ik(e){var t,n=[],r=m(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function ak(e,t){var n,r=null,i=m(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Gg(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function ok(e,t){if(t._queryParams.loadsAllData())return ck(e);var n=t._queryIdentifier;return e.views.get(n)}function sk(e,t){return null!=ok(e,t)}function uk(e){return null!=ck(e)}function ck(e){var t,n=m(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var lk=1,hk=N((function e(t){S(this,e),this.listenProvider_=t,this.syncPointTree_=new ug(null),this.pendingWriteTree_={visibleWrites:cg.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function fk(e,t,n,r,i){return function(e,t,n,r,i){O(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=lg(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?bk(e,new Jm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function dk(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=wg(e.pendingWriteTree_,t),i=_g(e.pendingWriteTree_,t);if(i){var a=new ug(null);return null!=r.snap?a=a.set(Ty(),!0):Kv(r.children,(function(e){a=a.set(new Cy(e),!0)})),bk(e,new Ym(r.path,a,n))}return[]}function pk(e,t,n){return bk(e,new Jm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function vk(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||sk(a,t))){var s=rk(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return uk(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&uk(t))return[ck(t)];var r=[];return t&&(r=ik(t)),Kv(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=Ek(e,p);e.listenProvider_.startListening(Nk(v),xk(e,v),y.hashFn,y.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(Nk(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(Ck(t));e.listenProvider_.stopListening(Nk(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Ck(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function yk(e,t,n,r){var i=Tk(e,r);if(null!=i){var a=Sk(i),o=a.path,s=a.queryId,u=Ly(o,t);return Ik(e,o,new Jm(Gm(s),u,n))}return[]}function mk(e,t){var n=e._path,r=null,i=!1;t.syncPointTree_.foreachOnPath(n,(function(e,t){var a=Ly(e,n);r=r||ak(t,a),i=i||uk(t)}));var a,o=t.syncPointTree_.get(n);(o?(i=i||uk(o),r=r||ak(o,Ty())):(o=new $g,t.syncPointTree_=t.syncPointTree_.set(n,o)),null!=r)?a=!0:(a=!1,r=gm.EMPTY_NODE,t.syncPointTree_.subtree(n).foreachChild((function(e,t){var n=ak(t,Ty());n&&(r=r.updateImmediateChild(e,n))})));var s=sk(o,e);if(!s&&!e._queryParams.loadsAllData()){var u=Ck(e);O(!t.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=lk++;t.queryToTagMap.set(u,c),t.tagToQueryMap.set(c,u)}return{syncPoint:o,writesCache:bg(t.pendingWriteTree_,n),serverCache:r,serverCacheComplete:a,foundAncestorDefaultView:i,viewAlreadyExists:s}}function gk(e,t,n){var r=mk(t,e),i=r.syncPoint,a=r.serverCache,o=r.writesCache,s=r.serverCacheComplete,u=r.viewAlreadyExists,c=r.foundAncestorDefaultView,l=nk(i,t,n,o,a,s);if(!u&&!c){var h=ok(i,t);l=l.concat(function(e,t,n){var r=t._path,i=xk(e,t),a=Ek(e,n),o=e.listenProvider_.startListening(Nk(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)O(!uk(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!Oy(e)&&t&&uk(t))return[ck(t).query];var r=[];return t&&(r=r.concat(ik(t).map((function(e){return e.query})))),Kv(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(Nk(l),xk(e,l))}return o}(e,t,h))}return l}function kk(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ak(n,Ly(e,t));if(r)return r}));return Tg(r,t,i,n,!0)}function bk(e,t){return wk(t,e.syncPointTree_,null,bg(e.pendingWriteTree_,Ty()))}function wk(e,t,n,r){if(Oy(e.path))return _k(e,t,n,r);var i=t.get(Ty());null==n&&null!=i&&(n=ak(i,Ty()));var a=[],o=Sy(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Dg(r,o);a=a.concat(wk(s,u,c,l))}return i&&(a=a.concat(ek(i,e,r,n))),a}function _k(e,t,n,r){var i=t.get(Ty());null==n&&null!=i&&(n=ak(i,Ty()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Dg(r,t),u=e.operationForChild(t);u&&(a=a.concat(_k(u,i,o,s)))})),i&&(a=a.concat(ek(i,e,r,n))),a}function Ek(e,t){var n=t.query,r=xk(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||gm.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Tk(e,n);if(r){var i=Sk(r),a=i.path,o=i.queryId,s=Ly(a,t);return Ik(e,a,new Xm(Gm(o),s))}return[]}(e,n._path,r):function(e,t){return bk(e,new Xm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return vk(e,n,null,i)}}}function xk(e,t){var n=Ck(t);return e.queryToTagMap.get(n)}function Ck(e){return e._path.toString()+"$"+e._queryIdentifier}function Tk(e,t){return e.tagToQueryMap.get(t)}function Sk(e){var t=e.indexOf("$");return O(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Cy(e.substr(0,t))}}function Ik(e,t,n){var r=e.syncPointTree_.get(t);return O(r,"Missing sync point for query tag that we're tracking"),ek(r,n,bg(e.pendingWriteTree_,t),null)}function Nk(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(O(Zg,"Reference.ts has not been loaded"),Zg)(e._repo,e._path):e}var Pk=function(){function e(t){S(this,e),this.node_=t}return N(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Rk=function(){function e(t,n){S(this,e),this.syncTree_=t,this.path_=n}return N(e,[{key:"getImmediateChild",value:function(t){var n=Dy(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return kk(this.syncTree_,this.path_)}}]),e}(),Ak=function(e,t,n){return e&&"object"===typeof e?(O(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Dk(e[".sv"],t,n):"object"===typeof e[".sv"]?Ok(e[".sv"],t):void O(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Dk=function(e,t,n){if("timestamp"===e)return n.timestamp;O(!1,"Unexpected server value: "+e)},Ok=function(e,t,n){e.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&O(!1,"Unexpected increment value: "+r);var i=t.node();if(O(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Lk=function(e,t,n,r){return Fk(t,new Rk(n,e),r)},Mk=function(e,t,n){return Fk(e,new Pk(t),n)};function Fk(e,t,n){var r,i=e.getPriority().val(),a=Ak(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Ak(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new um(s,bm(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new um(a))),u.forEachChild(fm,(function(e,i){var a=Fk(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Uk=N((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};S(this,e),this.name=t,this.parent=n,this.node=r}));function jk(e,t){for(var n=t instanceof Cy?t:new Cy(t),r=e,i=Sy(n);null!==i;){var a=oe(r.node.children,i)||{children:{},childCount:0};r=new Uk(i,r,a),i=Sy(n=Ny(n))}return r}function Vk(e){return e.node.value}function qk(e,t){e.node.value=t,Kk(e)}function Bk(e){return e.node.childCount>0}function zk(e,t){Kv(e.node.children,(function(n,r){t(new Uk(n,e,r))}))}function Wk(e,t,n,r){n&&!r&&t(e),zk(e,(function(e){Wk(e,t,!0,r)})),n&&r&&t(e)}function Hk(e){return new Cy(null===e.parent?e.name:Hk(e.parent)+"/"+e.name)}function Kk(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Vk(e)&&!Bk(e)}(n),i=ae(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Kk(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Kk(e))}(e.parent,e.name,e)}var Gk=/[\[\].#$\/\u0000-\u001F\u007F]/,Qk=/[\[\].#$\u0000-\u001F\u007F]/,Yk=10485760,Xk=function(e){return"string"===typeof e&&0!==e.length&&!Gk.test(e)},Jk=function(e){return"string"===typeof e&&0!==e.length&&!Qk.test(e)},Zk=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Uv(e)||e&&"object"===typeof e&&ae(e,".sv")},$k=function(e,t,n,r){r&&void 0===t||eb(me(e,"value"),t,n)},eb=function e(t,n,r){var i=r instanceof Cy?new jy(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+qy(i));if("function"===typeof n)throw new Error(t+"contains a function "+qy(i)+" with contents = "+n.toString());if(Uv(n))throw new Error(t+"contains "+n.toString()+" "+qy(i));if("string"===typeof n&&n.length>Yk/3&&ge(n)>Yk)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+qy(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Kv(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Xk(n)))throw new Error(t+" contains an invalid key ("+n+") "+qy(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ge(t),Vy(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ge(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+qy(i)+" in addition to actual children.")}},tb=function(e,t,n,r){if(!r||void 0!==t){var i=me(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Kv(t,(function(e,t){var r=new Cy(e);if(eb(i,t,Dy(n,r)),".priority"===Py(r)&&!Zk(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Ry(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Xk(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(My);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Uy(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},nb=function(e,t,n){if(!n||void 0!==t){if(Uv(t))throw new Error(me(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zk(t))throw new Error(me(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rb=function(e,t,n,r){if((!r||void 0!==n)&&!Xk(n))throw new Error(me(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ib=function(e,t,n,r){if((!r||void 0!==n)&&!Jk(n))throw new Error(me(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ab=function(e,t){if(".info"===Sy(t))throw new Error(e+" failed = Can't modify data under /.info/")},ob=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Xk(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Jk(e)}(n))throw new Error(me(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},sb=N((function e(){S(this,e),this.eventLists_=[],this.recursionDepth_=0}));function ub(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Fy(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function cb(e,t,n){ub(e,n),hb(e,(function(e){return Fy(e,t)}))}function lb(e,t,n){ub(e,n),hb(e,(function(e){return Uy(e,t)||Uy(t,e)}))}function hb(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(fb(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function fb(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Pv&&Dv("event: "+n.toString()),Zv(r)}}}var db="repo_interrupt",pb=function(){function e(t,n,r,i){S(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vm(),this.transactionQueueTree_=new Uk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return N(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function vb(e,t,n){if(e.stats_=fy(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Um(e.repoInfo_,(function(t,n,r,i){gb(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return kb(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{re(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Wy(e.repoInfo_,t,(function(t,n,r,i){gb(e,t,n,r,i)}),(function(t){kb(e,t)}),(function(t){!function(e,t){Kv(t,(function(t,n){bb(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return hy[n]||(hy[n]=t()),hy[n]}(e.repoInfo_,(function(){return new Km(e.stats_,e.server_)})),e.infoData_=new jm,e.infoSyncTree_=new hk({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=pk(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),bb(e,"connected",!1),e.serverSyncTree_=new hk({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);lb(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function yb(e){var t=e.infoData_.getNode(new Cy(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function mb(e){return(t=(t={timestamp:yb(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function gb(e,t,n,r,i){e.dataUpdateCount++;var a=new Cy(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=ue(n,(function(e){return bm(e)}));o=function(e,t,n,r){var i=Tk(e,r);if(i){var a=Sk(i),o=a.path,s=a.queryId,u=Ly(o,t),c=ug.fromObject(n);return Ik(e,o,new Zm(Gm(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=bm(n);o=yk(e.serverSyncTree_,a,u,i)}else if(r){var c=ue(n,(function(e){return bm(e)}));o=function(e,t,n){var r=ug.fromObject(n);return bk(e,new Zm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=bm(n);o=pk(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=Ab(e,a)),lb(e.eventQueue_,h,o)}function kb(e,t){bb(e,"connected",t),!1===t&&function(e){Sb(e,"onDisconnectEvents");var t=mb(e),n=Vm();zm(e.onDisconnect_,Ty(),(function(r,i){var a=Lk(r,i,e.serverSyncTree_,t);qm(n,r,a)}));var r=[];zm(n,Ty(),(function(t,n){r=r.concat(pk(e.serverSyncTree_,t,n));var i=Fb(e,t);Ab(e,i)})),e.onDisconnect_=Vm(),lb(e.eventQueue_,Ty(),r)}(e)}function bb(e,t,n){var r=new Cy("/.info/"+t),i=bm(n);e.infoData_.updateSnapshot(r,i);var a=pk(e.infoSyncTree_,r,i);lb(e.eventQueue_,r,a)}function wb(e){return e.nextWriteId_++}function _b(e,t,n,r,i){Sb(e,"set",{path:t.toString(),value:n,priority:r});var a=mb(e),o=bm(n,r),s=kk(e.serverSyncTree_,t),u=Mk(o,s,a),c=wb(e),l=fk(e.serverSyncTree_,t,u,c,!0);ub(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Fv("set at "+t+" failed: "+n);var o=dk(e.serverSyncTree_,c,!a);lb(e.eventQueue_,t,o),Ib(e,i,n,r)}));var h=Fb(e,t);Ab(e,h),lb(e.eventQueue_,h,[])}function Eb(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Bm(e.onDisconnect_,t),Ib(e,n,r,i)}))}function xb(e,t,n,r){var i=bm(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&qm(e.onDisconnect_,t,i),Ib(e,r,n,a)}))}function Cb(e,t,n){var r;r=".info"===Sy(t._path)?vk(e.infoSyncTree_,t,n):vk(e.serverSyncTree_,t,n),cb(e.eventQueue_,t._path,r)}function Tb(e){e.persistentConnection_&&e.persistentConnection_.interrupt(db)}function Sb(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Dv.apply(void 0,[t].concat(r))}function Ib(e,t,n,r){t&&Zv((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Nb(e,t,n){return kk(e.serverSyncTree_,t,n)||gm.EMPTY_NODE}function Pb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Mb(e,t),Vk(t)){var n=Ob(e,t);O(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Rb(e,Hk(t),n)}else Bk(t)&&zk(t,(function(t){Pb(e,t)}))}function Rb(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Nb(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];O(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Ly(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Sb(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(dk(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Mb(e,jk(e.transactionQueueTree_,t)),Pb(e,e.transactionQueueTree_),lb(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)Zv(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Fv("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Ab(e,t)}}),o)}function Ab(e,t){var n=Db(e,t),r=Hk(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=Ly(n,u.path),l=!1,h=void 0;if(O(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(dk(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(dk(e.serverSyncTree_,u.currentWriteId,!0));else{var f=Nb(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){eb("transaction failed: Data returned ",d,u.path);var p=bm(d);"object"===typeof d&&null!=d&&ae(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=mb(e),m=Mk(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=wb(e),o.splice(o.indexOf(v),1),i=(i=i.concat(fk(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(dk(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(dk(e.serverSyncTree_,u.currentWriteId,!0))}lb(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);Mb(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Zv(r[c]);Pb(e,e.transactionQueueTree_)}(e,Ob(e,n),r),r}function Db(e,t){var n,r=e.transactionQueueTree_;for(n=Sy(t);null!==n&&void 0===Vk(r);)r=jk(r,n),n=Sy(t=Ny(t));return r}function Ob(e,t){var n=[];return Lb(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Lb(e,t,n){var r=Vk(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);zk(t,(function(t){Lb(e,t,n)}))}function Mb(e,t){var n=Vk(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,qk(t,n.length>0?n:void 0)}zk(t,(function(t){Mb(e,t)}))}function Fb(e,t){var n=Hk(Db(e,t)),r=jk(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Ub(e,t)})),Ub(e,r),Wk(r,(function(t){Ub(e,t)})),n}function Ub(e,t){var n=Vk(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(O(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(O(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(dk(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?qk(t,void 0):n.length=a+1,lb(e.eventQueue_,Hk(t),i);for(var s=0;s<r.length;s++)Zv(r[s])}}var jb=function(e,t){var n=Vb(e),r=n.namespace;"firebase.com"===n.domain&&Mv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Mv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new sy(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Cy(n.pathString)}},Vb=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=m(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Fv("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},qb=function(){function e(t,n,r,i){S(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return N(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+re(this.snapshot.exportVal())}}]),e}(),Bb=function(){function e(t,n,r){S(this,e),this.eventRegistration=t,this.error=n,this.path=r}return N(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),zb=function(){function e(t,n){S(this,e),this.snapshotCallback=t,this.cancelCallback=n}return N(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Wb=function(){function e(t,n){S(this,e),this._repo=t,this._path=n}return N(e,[{key:"cancel",value:function(){var e=new z;return Eb(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){ab("OnDisconnect.remove",this._path);var e=new z;return xb(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){ab("OnDisconnect.set",this._path),$k("OnDisconnect.set",e,this._path,!1);var t=new z;return xb(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){ab("OnDisconnect.setWithPriority",this._path),$k("OnDisconnect.setWithPriority",e,this._path,!1),nb("OnDisconnect.setWithPriority",t,!1);var n=new z;return function(e,t,n,r,i){var a=bm(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&qm(e.onDisconnect_,t,a),Ib(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){ab("OnDisconnect.update",this._path),tb("OnDisconnect.update",e,this._path,!1);var t=new z;return function(e,t,n,r){if(se(n))return Dv("onDisconnect().update() called with empty data.  Don't do anything."),void Ib(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Kv(n,(function(n,r){var i=bm(r);qm(e.onDisconnect_,Dy(t,n),i)})),Ib(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Hb=function(){function e(t,n,r,i){S(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return N(e,[{key:"key",get:function(){return Oy(this._path)?null:Py(this._path)}},{key:"ref",get:function(){return new Yb(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Fm(this._queryParams),t=Wv(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Fm(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=we(t))instanceof e))return!1;var n=this._repo===t._repo,r=Fy(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Kb(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Gb(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Yy){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==jv)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Vv)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===fm){if(null!=t&&!Zk(t)||null!=n&&!Zk(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(O(e.getIndex()instanceof wm||e.getIndex()===Em,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qb(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Yb=function(e){_(n,e);var t=C(n);function n(e,r){return S(this,n),t.call(this,e,r,new Am,!1)}return N(n,[{key:"parent",get:function(){var e=Ay(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Hb),Xb=function(){function e(t,n,r){S(this,e),this._node=t,this.ref=n,this._index=r}return N(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Cy(t),r=Zb(this.ref,t);return new e(this._node.getChild(n),r,fm)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Zb(n.ref,r),fm))}))}},{key:"hasChild",value:function(e){var t=new Cy(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Jb(e,t){return(e=we(e))._checkNotDeleted("ref"),void 0!==t?Zb(e._root,t):e._root}function Zb(e,t){var n,r,i,a;return null===Sy((e=we(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ib(n,r,i,a)):ib("child","path",t,!1),new Yb(e._repo,Dy(e._path,t))}function $b(e,t){e=we(e),ab("set",e._path),$k("set",t,e._path,!1);var n=new z;return _b(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}var ew=function(){function e(t){S(this,e),this.callbackContext=t}return N(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new qb("value",this,new Xb(e.snapshotNode,new Yb(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Bb(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),tw=function(){function e(t,n){S(this,e),this.eventType=t,this.callbackContext=n}return N(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Bb(this,e,t):null}},{key:"createEvent",value:function(e,t){O(null!=e.childName,"Child events should have a childName.");var n=Zb(new Yb(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new qb(e.type,this,new Xb(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function nw(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){Cb(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new zb(n,a||void 0),c="value"===t?new ew(u):new tw(t,u);return function(e,t,n){var r;r=".info"===Sy(t._path)?gk(e.infoSyncTree_,t,n):gk(e.serverSyncTree_,t,n),cb(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return Cb(e._repo,e,c)}}function rw(e,t,n,r){return nw(e,"value",t,n,r)}var iw=N((function e(){S(this,e)})),aw=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this))._value=e,i._key=r,i}return N(n,[{key:"_apply",value:function(e){$k("endAt",this._value,e._path,!0);var t=Om(e._queryParams,this._value,this._key);if(Qb(t),Gb(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hb(e._repo,e._path,t,e._orderByCalled)}}]),n}(iw);var ow=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this))._value=e,i._key=r,i}return N(n,[{key:"_apply",value:function(e){$k("startAt",this._value,e._path,!0);var t=Dm(e._queryParams,this._value,this._key);if(Qb(t),Gb(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Hb(e._repo,e._path,t,e._orderByCalled)}}]),n}(iw);var sw=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this))._path=e,r}return N(n,[{key:"_apply",value:function(e){Kb(e,"orderByChild");var t=new Cy(this._path);if(Oy(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new wm(t),r=Lm(e._queryParams,n);return Gb(r),new Hb(e._repo,e._path,r,!0)}}]),n}(iw);var uw=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this))._value=e,i._key=r,i}return N(n,[{key:"_apply",value:function(e){if($k("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new aw(this._value,this._key)._apply(new ow(this._value,this._key)._apply(e))}}]),n}(iw);!function(e){O(!Hg,"__referenceConstructor has already been defined"),Hg=e}(Yb),function(e){O(!Zg,"__referenceConstructor has already been defined"),Zg=e}(Yb);var cw={},lw=!1;function hw(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Mv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Dv("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=jb(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Chatster-chat_app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=jb(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new ny(ny.OWNER):new ty(e.name,e.options,t);ob("Invalid Firebase Database URL",s),Oy(s.path)||Mv("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=cw[t.name];i||(i={},cw[t.name]=i);var a=i[e.toURLString()];a&&Mv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new pb(e,lw,n,r),i[e.toURLString()]=a,a}(u,e,l,new ey(e.name,n));return new fw(h,e)}var fw=function(){function e(t,n){S(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return N(e,[{key:"_repo",get:function(){return this._instanceStarted||(vb(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Yb(this._repo,Ty())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=cw[t];n&&n[e.key]===e||Mv("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Tb(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Mv("Cannot call "+e+" on a deleted database.")}}]),e}();Wy.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Wy.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){bv=e}(ft),st(new _e("database",(function(e,t){var n=t.instanceIdentifier;return hw(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),pt(gv,kv,e),pt(gv,kv,"esm2017")}();var dw=n.p+"static/media/logo.b3a64821cfcc104cb997970d35cec6db.svg";function pw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var vw;Object.create;function yw(){return a({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var mw=yw,gw=new $("auth","Firebase",yw()),kw=new De("@firebase/auth");function bw(e){if(kw.logLevel<=Te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kw.error.apply(kw,["Auth (".concat(ft,"): ").concat(e)].concat(n))}}function ww(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw xw.apply(void 0,[e].concat(n))}function _w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xw.apply(void 0,[e].concat(n))}function Ew(e,t,n){var r=Object.assign(Object.assign({},mw()),a({},t,n));return new $("auth","Firebase",r).create(t,{appName:e.name})}function xw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=T(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(T(o)))}return gw.create.apply(gw,[e].concat(n))}function Cw(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw xw.apply(void 0,[t].concat(r))}}function Tw(e){var t="INTERNAL ASSERTION FAILED: "+e;throw bw(t),new Error(t)}function Sw(e,t){e||Tw(t)}var Iw=new Map;function Nw(e){Sw(e instanceof Function,"Expected a class definition");var t=Iw.get(e);return t?(Sw(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Iw.set(e,t),t)}function Pw(e,t){var n=ut(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(ce(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;ww(r,"already-initialized")}return n.initialize({options:t})}function Rw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Aw(){return"http:"===Dw()||"https:"===Dw()}function Dw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Ow=function(){function e(t,n){S(this,e),this.shortDelay=t,this.longDelay=n,Sw(n>t,"Short delay should be less than long delay!"),this.isMobile=H()||G()}return N(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Aw()||K()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Lw(e,t){Sw(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Mw=function(){function e(){S(this,e)}return N(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Tw("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Tw("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Tw("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Fw=(a(vw={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),a(vw,"MISSING_CUSTOM_TOKEN","internal-error"),a(vw,"INVALID_IDENTIFIER","invalid-email"),a(vw,"MISSING_CONTINUE_URI","internal-error"),a(vw,"INVALID_PASSWORD","wrong-password"),a(vw,"MISSING_PASSWORD","internal-error"),a(vw,"EMAIL_EXISTS","email-already-in-use"),a(vw,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),a(vw,"INVALID_IDP_RESPONSE","invalid-credential"),a(vw,"INVALID_PENDING_TOKEN","invalid-credential"),a(vw,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),a(vw,"MISSING_REQ_TYPE","internal-error"),a(vw,"EMAIL_NOT_FOUND","user-not-found"),a(vw,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),a(vw,"EXPIRED_OOB_CODE","expired-action-code"),a(vw,"INVALID_OOB_CODE","invalid-action-code"),a(vw,"MISSING_OOB_CODE","internal-error"),a(vw,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),a(vw,"INVALID_ID_TOKEN","invalid-user-token"),a(vw,"TOKEN_EXPIRED","user-token-expired"),a(vw,"USER_NOT_FOUND","user-token-expired"),a(vw,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),a(vw,"INVALID_CODE","invalid-verification-code"),a(vw,"INVALID_SESSION_INFO","invalid-verification-id"),a(vw,"INVALID_TEMPORARY_PROOF","invalid-credential"),a(vw,"MISSING_SESSION_INFO","missing-verification-id"),a(vw,"SESSION_EXPIRED","code-expired"),a(vw,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),a(vw,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),a(vw,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),a(vw,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),a(vw,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),a(vw,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),a(vw,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),a(vw,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),a(vw,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),a(vw,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),a(vw,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),vw),Uw=new Ow(3e4,6e4);function jw(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Vw(e,t,n,r){return qw.apply(this,arguments)}function qw(){return qw=w(k().mark((function e(t,n,r,i){var a,o=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Bw(t,a,w(k().mark((function e(){var a,o,s,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=he(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Mw.fetch()(Kw(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function Bw(e,t,n){return zw.apply(this,arguments)}function zw(){return zw=w(k().mark((function e(t,n,r){var i,a,o,s,u,c,h,f,d,p;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Fw),n),e.prev=2,a=new Gw(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Qw(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Qw(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Qw(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Qw(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Ew(t,p,d);case 34:ww(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Z)){e.next=41;break}throw e.t0;case 41:ww(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),zw.apply(this,arguments)}function Ww(e,t,n,r){return Hw.apply(this,arguments)}function Hw(){return Hw=w(k().mark((function e(t,n,r,i){var a,o,s=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Vw(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ww(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Kw(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Lw(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Gw=function(){function e(t){var n=this;S(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(_w(n.auth,"network-request-failed"))}),Uw.get())}))}return N(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Qw(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=_w(e,t,r);return i.customData._tokenResponse=n,i}function Yw(e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vw(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}function Jw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vw(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function $w(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function e_(){return e_=w(k().mark((function e(t){var n,r,i,a,o,s,u=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=we(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Cw((a=n_(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:$w(t_(a.auth_time)),issuedAtTime:$w(t_(a.iat)),expirationTime:$w(t_(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e){return 1e3*Number(e)}function n_(e){var t,n=l(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return bw("JWT malformed, contained fewer than 3 sections"),null;try{var o=V(i);return o?JSON.parse(o):(bw("Failed to decode base64 JWT payload"),null)}catch(s){return bw("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=w(k().mark((function e(t,n){var r=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Z&&a_(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),i_.apply(this,arguments)}function a_(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var o_=function(){function e(t){S(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return N(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(w(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),s_=function(){function e(t,n){S(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return N(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=$w(this.lastLoginAt),this.creationTime=$w(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function u_(e){return c_.apply(this,arguments)}function c_(){return c_=w(k().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,r_(t,Jw(r,{idToken:i}));case 6:Cw(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?f_(o.providerUserInfo):[],u=h_(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new s_(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(){return(l_=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=we(t),e.next=3,u_(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h_(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(T(n),T(t))}function f_(e){return e.map((function(e){var t=e.providerId,n=pw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function d_(e,t){return p_.apply(this,arguments)}function p_(){return p_=w(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bw(t,{},w(k().mark((function e(){var r,i,a,o,s,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=he({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Kw(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Mw.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),p_.apply(this,arguments)}var v_=function(){function e(){S(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return N(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Cw(e.idToken,"internal-error"),Cw("undefined"!==typeof e.idToken,"internal-error"),Cw("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=n_(e);return Cw(t,"internal-error"),Cw("undefined"!==typeof t.exp,"internal-error"),Cw("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=w(k().mark((function e(t){var n,r=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Cw(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=w(k().mark((function e(t,n){var r,i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d_(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Tw("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Cw("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Cw("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Cw("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function y_(e,t){Cw("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var m_=function(){function e(t){S(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=pw(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new o_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?T(a.providerData):[],this.metadata=new s_(a.createdAt||void 0,a.lastLoginAt||void 0)}return N(e,[{key:"getIdToken",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r_(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Cw(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return e_.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return l_.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Cw(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Cw(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=w(k().mark((function e(t){var n,r,i=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,u_(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,r_(this,Yw(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,E=n.stsTokenManager;Cw(k&&E,t,"internal-error");var x=v_.fromJSON(this.name,E);Cw("string"===typeof k,t,"internal-error"),y_(h,t.name),y_(f,t.name),Cw("boolean"===typeof b,t,"internal-error"),Cw("boolean"===typeof w,t,"internal-error"),y_(d,t.name),y_(p,t.name),y_(v,t.name),y_(y,t.name),y_(m,t.name),y_(g,t.name);var C=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(C.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(C._redirectEventId=y),C}},{key:"_fromIdTokenResponse",value:function(){var t=w(k().mark((function t(n,r){var i,a,o,s=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new v_).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,u_(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),g_=function(){function e(){S(this,e),this.type="NONE",this.storage={}}return N(e,[{key:"_isAvailable",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();g_.type="NONE";var k_=g_;function b_(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var w_=function(){function e(t,n,r){S(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=b_(this.userKey,a.apiKey,o),this.fullPersistenceKey=b_("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return N(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?m_._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=w(k().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Nw(k_),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Nw(k_),s=b_(i,n.config.apiKey,n.name),u=null,c=m(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=m_._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function __(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(T_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(E_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(I_(t))return"Blackberry";if(N_(t))return"Webos";if(x_(t))return"Safari";if((t.includes("chrome/")||C_(t))&&!t.includes("edge/"))return"Chrome";if(S_(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function E_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/firefox\//i.test(e)}function x_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function C_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/crios\//i.test(e)}function T_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/iemobile/i.test(e)}function S_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/android/i.test(e)}function I_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/blackberry/i.test(e)}function N_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/webos/i.test(e)}function P_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function R_(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return P_(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function A_(){return Q()&&10===document.documentMode}function D_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return P_(e)||S_(e)||N_(e)||I_(e)||/windows phone/i.test(e)||T_(e)}function O_(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=__(W());break;case"Worker":t="".concat(__(W()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ft,"/").concat(r)}var L_=function(){function e(t){S(this,e),this.auth=t,this.queue=[]}return N(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=w(k().mark((function e(t){var n,r,i,a,o,s,u,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=m(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),s=m(r);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(l){}}}catch(h){s.e(h)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),M_=function(){function e(t,n,r){S(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U_(this),this.idTokenSubscription=new U_(this),this.beforeStateQueue=new L_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gw,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return N(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Nw(t)),this._initializationPromise=this.queue(w(k().mark((function r(){var i,a;return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,w_.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=w(k().mark((function e(t){var n,r,i,a,o,s,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Cw(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u_(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?we(t):null)&&Cw(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=w(k().mark((function e(t){var n,r=this,i=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Cw(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(w(k().mark((function n(){return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Nw(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=w(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Cw(n=t&&Nw(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,w_.create(this,[Nw(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=w(k().mark((function e(t){var n=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Cw(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Cw(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O_(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=w(k().mark((function e(){var t,n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function F_(e){return we(e)}var U_=function(){function e(t){var n=this;S(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new ve(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return N(e,[{key:"next",get:function(){return Cw(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();var j_=function(){function e(t,n){S(this,e),this.providerId=t,this.signInMethod=n}return N(e,[{key:"toJSON",value:function(){return Tw("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Tw("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Tw("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Tw("not implemented")}}]),e}();function V_(e,t){return q_.apply(this,arguments)}function q_(){return q_=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}function B_(e,t){return z_.apply(this,arguments)}function z_(){return z_=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ww(t,"POST","/v1/accounts:signInWithPassword",jw(t,n)));case 1:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function W_(e,t){return H_.apply(this,arguments)}function H_(){return H_=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ww(t,"POST","/v1/accounts:signInWithEmailLink",jw(t,n)));case 1:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function K_(e,t){return G_.apply(this,arguments)}function G_(){return G_=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ww(t,"POST","/v1/accounts:signInWithEmailLink",jw(t,n)));case 1:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}var Q_=function(e){_(n,e);var t=C(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return N(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",B_(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",W_(t,{email:this._email,oobCode:this._password}));case 5:ww(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",V_(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",K_(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ww(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(j_);function Y_(e,t){return X_.apply(this,arguments)}function X_(){return X_=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ww(t,"POST","/v1/accounts:signInWithIdp",jw(t,n)));case 1:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}var J_=function(e){_(n,e);var t=C(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return N(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Y_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Y_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Y_(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=he(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ww("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=pw(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(j_);function Z_(e,t){return $_.apply(this,arguments)}function $_(){return $_=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vw(t,"POST","/v1/accounts:sendVerificationCode",jw(t,n)));case 1:case"end":return e.stop()}}),e)}))),$_.apply(this,arguments)}function eE(){return eE=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ww(t,"POST","/v1/accounts:signInWithPhoneNumber",jw(t,n)));case 1:case"end":return e.stop()}}),e)}))),eE.apply(this,arguments)}function tE(){return tE=w(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ww(t,"POST","/v1/accounts:signInWithPhoneNumber",jw(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Qw(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}var nE=a({},"USER_NOT_FOUND","user-not-found");function rE(){return rE=w(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ww(t,"POST","/v1/accounts:signInWithPhoneNumber",jw(t,r),nE));case 2:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}var iE=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone","phone")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return eE.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return tE.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return rE.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(j_);var aE=function(){function e(t){var n,r,i,a,o,s;S(this,e);var u=fe(de(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Cw(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return N(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=fe(de(e)).link,n=t?fe(de(t)).deep_link_id:null,r=fe(de(e)).deep_link_id;return(r?fe(de(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Kf){return null}}}]),e}();var oE=function(){function e(){S(this,e),this.providerId=e.PROVIDER_ID}return N(e,null,[{key:"credential",value:function(e,t){return Q_._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=aE.parseLink(t);return Cw(n,"argument-error"),Q_._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();oE.PROVIDER_ID="password",oE.EMAIL_PASSWORD_SIGN_IN_METHOD="password",oE.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var sE=function(){function e(t){S(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return N(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),uE=function(e){_(n,e);var t=C(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).scopes=[],e}return N(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return T(this.scopes)}}]),n}(sE),cE=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.call(this,"facebook.com")}return N(n,null,[{key:"credential",value:function(e){return J_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Kf){return null}}}]),n}(uE);cE.FACEBOOK_SIGN_IN_METHOD="facebook.com",cE.PROVIDER_ID="facebook.com";var lE=function(e){_(n,e);var t=C(n);function n(){var e;return S(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return N(n,null,[{key:"credential",value:function(e,t){return J_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Kf){return null}}}]),n}(uE);lE.GOOGLE_SIGN_IN_METHOD="google.com",lE.PROVIDER_ID="google.com";var hE=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.call(this,"github.com")}return N(n,null,[{key:"credential",value:function(e){return J_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Kf){return null}}}]),n}(uE);hE.GITHUB_SIGN_IN_METHOD="github.com",hE.PROVIDER_ID="github.com";var fE=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.call(this,"twitter.com")}return N(n,null,[{key:"credential",value:function(e,t){return J_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Kf){return null}}}]),n}(uE);function dE(e,t){return pE.apply(this,arguments)}function pE(){return pE=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ww(t,"POST","/v1/accounts:signUp",jw(t,n)));case 1:case"end":return e.stop()}}),e)}))),pE.apply(this,arguments)}fE.TWITTER_SIGN_IN_METHOD="twitter.com",fE.PROVIDER_ID="twitter.com";var vE=function(){function e(t){S(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return N(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=w(k().mark((function t(n,r,i){var a,o,s,u,c=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,m_._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=yE(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=w(k().mark((function t(n,r,i){var a;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=yE(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function yE(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var mE=function(e){_(n,e);var t=C(n);function n(e,r,i,a){var o,s;return S(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(E(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return N(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Z);function gE(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw mE._fromErrorAndOperation(e,n,t,r);throw n}))}function kE(e,t){return bE.apply(this,arguments)}function bE(){return bE=w(k().mark((function e(t,n){var r,i,a=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=r_,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",vE._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),bE.apply(this,arguments)}function wE(e,t){return _E.apply(this,arguments)}function _E(){return _E=w(k().mark((function e(t,n){var r,i,a,o,s,u,c,l=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,r_(t,gE(a,o,n,t),r);case 6:return Cw((s=e.sent).idToken,a,"internal-error"),Cw(u=n_(s.idToken),a,"internal-error"),c=u.sub,Cw(t.uid===c,a,"user-mismatch"),e.abrupt("return",vE._forOperation(t,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&ww(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),_E.apply(this,arguments)}function EE(e,t){return xE.apply(this,arguments)}function xE(){return xE=w(k().mark((function e(t,n){var r,i,a,o,s=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,gE(t,i,n);case 4:return a=e.sent,e.next=7,vE._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),xE.apply(this,arguments)}function CE(e,t){return TE.apply(this,arguments)}function TE(){return TE=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EE(F_(t),n));case 1:case"end":return e.stop()}}),e)}))),TE.apply(this,arguments)}function SE(e,t,n){return IE.apply(this,arguments)}function IE(){return IE=w(k().mark((function e(t,n,r){var i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=F_(t),e.next=3,dE(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,vE._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),IE.apply(this,arguments)}function NE(e,t,n){return CE(we(e),oE.credential(t,n))}function PE(e){return we(e).signOut()}function RE(e,t){return Vw(e,"POST","/v2/accounts/mfaEnrollment:start",jw(e,t))}new WeakMap;var AE="__sak",DE=function(){function e(t,n){S(this,e),this.storageRetriever=t,this.type=n}return N(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(AE,"1"),this.storage.removeItem(AE),Promise.resolve(!0)):Promise.resolve(!1)}catch(Kf){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var OE=function(e){_(n,e);var t=C(n);function n(){var e;return S(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=W();return x_(e)||P_(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=D_(),e._shouldAllowMigration=!0,e}return N(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);A_()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=w(k().mark((function e(t,r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(p(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=w(k().mark((function e(t){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(p(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(p(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(DE);OE.type="LOCAL";var LE=OE,ME=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return N(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(DE);ME.type="SESSION";var FE=ME;function UE(e){return Promise.all(e.map(function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var jE=function(){function e(t){S(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return N(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=w(k().mark((function e(t){var n,r,i,a,o,s,u,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,UE(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function VE(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}jE.receivers=[];var qE=function(){function e(t){S(this,e),this.target=t,this.handlers=new Set}return N(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=w(k().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=VE("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function BE(){return window}function zE(){return"undefined"!==typeof BE().WorkerGlobalScope&&"function"===typeof BE().importScripts}function WE(){return HE.apply(this,arguments)}function HE(){return(HE=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function KE(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var GE="firebaseLocalStorageDb",QE="firebaseLocalStorage",YE="fbase_key",XE=function(){function e(t){S(this,e),this.request=t}return N(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function JE(e,t){return e.transaction([QE],t?"readwrite":"readonly").objectStore(QE)}function ZE(){var e=indexedDB.deleteDatabase(GE);return new XE(e).toPromise()}function $E(){var e=indexedDB.open(GE,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(QE,{keyPath:YE})}catch(r){n(r)}})),e.addEventListener("success",w(k().mark((function n(){var r;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(QE)){n.next=12;break}return r.close(),n.next=5,ZE();case 5:return n.t0=t,n.next=8,$E();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ex(e,t,n){return tx.apply(this,arguments)}function tx(){return tx=w(k().mark((function e(t,n,r){var i,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=JE(t,!0).put((a(i={},YE,n),a(i,"value",r),i)),e.abrupt("return",new XE(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function nx(e,t){return rx.apply(this,arguments)}function rx(){return rx=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JE(t,!1).get(n),e.next=3,new XE(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ix(e,t){var n=JE(e,!0).delete(t);return new XE(n).toPromise()}var ax=function(){function e(){S(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return N(e,[{key:"_openDb",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,$E();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=w(k().mark((function e(){var t=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=jE._getInstance(zE()?self:null),this.receiver._subscribe("keyChanged",function(){var e=w(k().mark((function e(n,r){var i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=w(k().mark((function e(){var t,n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WE();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new qE(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&KE()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,$E();case 5:return t=e.sent,e.next=8,ex(t,AE,"1");case 8:return e.next=10,ix(t,AE);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=w(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=w(k().mark((function e(t,n){var r=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ex(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return nx(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=w(k().mark((function e(t){var n=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ix(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=w(k().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=JE(e,!1).getAll();return new XE(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=m(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(w(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ax.type="LOCAL";var ox=ax;function sx(e,t){return Vw(e,"POST","/v2/accounts/mfaSignIn:start",jw(e,t))}function ux(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=_w("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function cx(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}cx("rcb"),new Ow(3e4,6e4);var lx="recaptcha";function hx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=w(k().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Cw("string"===typeof a,t,"argument-error"),Cw(r.type===lx,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Cw("enroll"===s.type,t,"internal-error"),e.next=13,RE(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Cw("signin"===s.type,t,"internal-error"),Cw(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,sx(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Z_(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),fx.apply(this,arguments)}var dx=function(){function e(t){S(this,e),this.providerId=e.PROVIDER_ID,this.auth=F_(t)}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return hx(this.auth,e,we(t))}}],[{key:"credential",value:function(e,t){return iE._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?iE._fromTokenResponse(n,r):null}}]),e}();function px(e,t){return t?Nw(t):(Cw(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}dx.PROVIDER_ID="phone",dx.PHONE_SIGN_IN_METHOD="phone";var vx=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this,"custom","custom")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return Y_(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Y_(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Y_(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(j_);function yx(e){return EE(e.auth,new vx(e),e.bypassAuthState)}function mx(e){var t=e.auth,n=e.user;return Cw(n,t,"internal-error"),wE(n,new vx(e),e.bypassAuthState)}function gx(e){return kx.apply(this,arguments)}function kx(){return kx=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Cw(r=t.user,n,"internal-error"),e.abrupt("return",kE(r,new vx(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}var bx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];S(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return N(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=w(k().mark((function t(n,r){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=w(k().mark((function e(t){var n,r,i,a,o,s,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yx;case"linkViaPopup":case"linkViaRedirect":return gx;case"reauthViaPopup":case"reauthViaRedirect":return mx;default:ww(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Sw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Sw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),wx=new Ow(2e3,1e4);var _x=function(e){_(n,e);var t=C(n);function n(e,r,i,a,o){var s;return S(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=E(s),s}return N(n,[{key:"executeNotNull",value:function(){var e=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Cw(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=w(k().mark((function e(){var t,n=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sw(1===this.filter.length,"Popup operations only handle one event"),t=VE(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(_w(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(_w(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(_w(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,wx.get())}()}}]),n}(bx);_x.currentPopupAction=null;var Ex=new Map,xx=function(e){_(n,e);var t=C(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return N(n,[{key:"execute",value:function(){var e=w(k().mark((function e(){var t,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ex.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Cx(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,y(p(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ex.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ex.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=w(k().mark((function e(t){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",y(p(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",y(p(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(bx);function Cx(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=w(k().mark((function e(t,n){var r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nx(n),i=Ix(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Sx(e,t){Ex.set(e._key(),t)}function Ix(e){return Nw(e._redirectPersistence)}function Nx(e){return b_("pendingRedirect",e.config.apiKey,e.name)}function Px(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=w(k().mark((function e(t,n){var r,i,a,o,s,u=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=F_(t),a=px(i,n),o=new xx(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}var Ax=function(){function e(t){S(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return N(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ox(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ox(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_w(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dx(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Dx(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Dx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ox(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Lx(e){return Mx.apply(this,arguments)}function Mx(){return Mx=w(k().mark((function e(t){var n,r=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Vw(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}var Fx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ux=/^https?/;function jx(){return jx=w(k().mark((function e(t){var n,r,i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lx(t);case 4:n=e.sent,r=n.authorizedDomains,i=m(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Vx(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ww(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),jx.apply(this,arguments)}function Vx(e){var t=Rw(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ux.test(r))return!1;if(Fx.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var qx=new Ow(3e4,6e4);function Bx(){var e=BE().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=T(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var zx=null;function Wx(e){return zx=zx||function(e){return new Promise((function(t,n){var r,i,a;function o(){Bx(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Bx(),n(_w(e,"network-request-failed"))},timeout:qx.get()})}if(null===(i=null===(r=BE().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=BE().gapi)||void 0===a?void 0:a.load)){var s=cx("iframefcb");return BE()[s]=function(){gapi.load?o():n(_w(e,"network-request-failed"))},ux("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw zx=null,e}))}(e),zx}var Hx=new Ow(5e3,15e3),Kx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qx(e){var t=e.config;Cw(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Lw(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ft},i=Gx.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(he(r).slice(1))}function Yx(e){return Xx.apply(this,arguments)}function Xx(){return Xx=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wx(t);case 2:return n=e.sent,Cw(r=BE().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Qx(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kx,dontclear:!0},(function(e){return new Promise(function(){var n=w(k().mark((function n(r,i){var a,o,s;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){BE().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=_w(t,"network-request-failed"),o=BE().setTimeout((function(){i(a)}),Hx.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}var Jx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zx="_blank",$x="http://localhost",eC=function(){function e(t){S(this,e),this.window=t,this.associatedEvent=null}return N(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function tC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Jx),{width:r.toString(),height:i.toString(),top:a,left:o}),c=W().toLowerCase();n&&(s=C_(c)?Zx:n),E_(c)&&(t=t||$x,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(R_(c)&&"_self"!==s)return nC(t||"",s),new eC(null);var f=window.open(t||"",s,h);Cw(f,e,"popup-blocked");try{f.focus()}catch(d){}return new eC(f)}function nC(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rC="__/auth/handler",iC="emulator/auth/handler";function aC(e,t,n,r,i,a){Cw(e.config.authDomain,e,"auth-domain-config-required"),Cw(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ft,eventId:i};if(t instanceof sE){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",se(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=l(u[s],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof uE){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(rC);return Lw(t,iC)}(e),"?").concat(he(p).slice(1))}var oC="webStorageSupport",sC=function(){function e(){S(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FE,this._completeRedirectFn=Px,this._overrideRedirectResult=Sx}return N(e,[{key:"_openPopup",value:function(){var e=w(k().mark((function e(t,n,r,i){var a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sw(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=aC(t,n,r,Rw(),i),e.abrupt("return",tC(t,o,VE()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=w(k().mark((function e(t,n,r,i){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=aC(t,n,r,Rw(),i),BE().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Sw(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yx(t);case 2:return n=e.sent,r=new Ax(t),n.register("authEvent",(function(e){return Cw(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(oC,{type:oC},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),ww(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return jx.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return D_()||x_()||P_()}}]),e}(),uC=sC,cC=function(){function e(t){S(this,e),this.factorId=t}return N(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Tw("unexpected MultiFactorSessionType")}}}]),e}(),lC=function(e){_(n,e);var t=C(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone")).credential=e,r}return N(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Vw(e,"POST","/v2/accounts/mfaEnrollment:finalize",jw(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Vw(e,"POST","/v2/accounts/mfaSignIn:finalize",jw(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(cC);(function(){function e(){S(this,e)}return N(e,null,[{key:"assertion",value:function(e){return lC._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var hC,fC="@firebase/auth",dC="0.20.5",pC=function(){function e(t){S(this,e),this.auth=t,this.internalListeners=new Map}return N(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Cw(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();hC="Browser",st(new _e("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Cw(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Cw(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:hC,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O_(hC)},i=new M_(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),st(new _e("auth-internal",(function(e){return function(e){return new pC(e)}(F_(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),pt(fC,dC,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(hC)),pt(fC,dC,"esm2017");var vC=n(184),yC=function(){var e=w(k().mark((function e(t,n,r,i,a,o){var s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=16;break}return s=Hd(rd(a,"users"),Gd("username","==",n)),e.next=5,np(s);case 5:if(!e.sent.empty){e.next=13;break}return e.next=9,SE(t,r,i);case 9:rp(id(a,"users",t.currentUser.uid),{username:n,profilePic:"https://cdn-icons-png.flaticon.com/512/847/847969.png"}).catch((function(e){return console.log(e)})),o("SignIn"),e.next=14;break;case 13:document.getElementById("errorP").innerHTML="Username is already in use.";case 14:e.next=17;break;case 16:document.getElementById("errorP").innerHTML="No username entered.";case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),document.getElementById("errorP").innerHTML=e.t0.code;case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),mC=function(){var e=w(k().mark((function e(t,n,r,i,a,o){var s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!r){e.next=18;break}return e.prev=1,e.next=4,NE(t,n,r);case 4:if(!t){e.next=11;break}return i(t),e.next=8,ep(id(a,"users",t.currentUser.uid));case 8:s=e.sent.data(),o(s),sessionStorage.setItem("username",s.username);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),document.getElementById("errorP").innerHTML=e.t0.code;case 16:e.next=19;break;case 18:document.getElementById("errorP").innerHTML="Enter both an email and a password.";case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),gC=function(t){var n=l((0,e.useState)(!1),2),r=n[0],i=n[1];return(0,vC.jsx)("div",{id:"App",className:t.lightTheme?"lightApp":"darkApp",children:(0,vC.jsxs)("div",{className:"App-header",children:[(0,vC.jsx)("img",{src:dw,alt:"logo"}),(0,vC.jsxs)("div",{className:"center",children:[!r&&(0,vC.jsxs)("div",{children:[(0,vC.jsx)("p",{children:"Choose one to start chatting:"}),(0,vC.jsxs)("div",{className:"center",children:[(0,vC.jsx)("button",{className:"button1",onClick:function(){return i("SignIn")},children:(0,vC.jsx)("p",{children:"Sign in"})}),(0,vC.jsx)("button",{className:"button1",onClick:function(){return i("SignUp")},children:(0,vC.jsx)("p",{children:"Sign up"})})]})]}),"SignUp"===r&&(0,vC.jsxs)("div",{id:"formcheto1",children:[(0,vC.jsx)("input",{type:"text",id:"usernameInput",className:"inputche",placeholder:"Username.."}),(0,vC.jsx)("input",{type:"password",id:"passwordInput",className:"inputche",placeholder:"password.."}),(0,vC.jsx)("input",{type:"email",id:"emailInput",className:"inputche",placeholder:"email@example.com.."}),(0,vC.jsx)("input",{type:"submit",id:"submit",value:"Submit",className:"inputche",onClick:function(){return yC(bN,document.getElementById("usernameInput").value,document.getElementById("emailInput").value,document.getElementById("passwordInput").value,t.db,i)}}),(0,vC.jsx)("p",{id:"errorP",style:{fontSize:"20px",color:"red",marginBottom:"0",marginTop:"5px",fontWeight:"normal"}})]}),"SignIn"===r&&(0,vC.jsxs)("div",{id:"formcheto1",children:[(0,vC.jsx)("input",{type:"email",id:"emailInput",className:"inputche",placeholder:"email@example.com.."}),(0,vC.jsx)("input",{type:"password",id:"passwordInput",className:"inputche",placeholder:"password.."}),(0,vC.jsx)("input",{type:"submit",id:"submit",value:"Submit",className:"inputche",onClick:function(){return mC(bN,document.getElementById("emailInput").value,document.getElementById("passwordInput").value,t.changeAuth,t.db,t.changeUser)}}),(0,vC.jsx)("p",{id:"errorP",style:{fontSize:"20px",color:"red",marginBottom:"0",marginTop:"5px",fontWeight:"normal"}})]})]})]})})};var kC=n.p+"static/media/close-svgrepo-com.ca8c67c13ad6df4a63f1856827946a47.svg";var bC=function(e){return e.showCreate?(0,vC.jsx)("div",{children:(0,vC.jsx)("div",{id:"gray",children:(0,vC.jsxs)("div",{id:"roomCreate",className:e.lightTheme?"lightCreate":"dark1",children:[(0,vC.jsx)("button",{id:"close",onClick:function(){return e.changeShow(!1)},children:(0,vC.jsx)("img",{src:kC,alt:"close"})}),(0,vC.jsxs)("div",{id:"centerItems",children:[(0,vC.jsx)("label",{children:"Chatroom name: "}),(0,vC.jsx)("br",{}),(0,vC.jsx)("input",{type:"text",id:"roomName",placeholder:"Enter Chatroom name.."}),(0,vC.jsx)("br",{}),(0,vC.jsx)("input",{type:"submit",className:"button",value:"Create Room",onClick:function(){return t=e.changeShow,n=e.newRoom,r=document.getElementById("roomName").value,t(!1),void n(r);var t,n,r}})]})]})})}):void 0};var wC=n.p+"static/media/chat-plus.e8f3e8aa11abf8afcae3a6eab9c37592.svg";var _C=function(e){return document.getElementById("headerot").classList.remove("back-option"),(0,vC.jsx)("div",{children:(0,vC.jsx)("div",{id:"App",className:e.lightTheme?"lightApp":"darkApp",children:(0,vC.jsxs)("div",{id:"Lobby",className:e.lightTheme?"light2":"dark4",children:[(0,vC.jsx)("h1",{children:"Current Chatrooms"}),(0,vC.jsx)("div",{className:"buttonDiv",children:(0,vC.jsxs)("button",{className:"button",onClick:function(){e.changeShow(!0)},children:[(0,vC.jsx)("img",{src:wC,alt:"add new chatroom"}),(0,vC.jsx)("p",{children:"Create a new Chatroom"})]})}),(0,vC.jsx)("div",{id:"Lobby-select",children:e.chatrooms.map((function(t){return(0,vC.jsx)(mv,{to:"/chatroom/".concat(t.id),className:"room",onClick:function(){return e.changeRoom(t.id)},children:(0,vC.jsxs)("div",{className:"room-div",children:[(0,vC.jsx)("h2",{children:t.name}),(0,vC.jsxs)("h3",{children:["Created by: ",t.owner]}),(0,vC.jsxs)("p",{children:["Time created: ",-1*t.timeCreated[1],":",-1*t.timeCreated[2]]})]})},t.id)}))})]})})})},EC=n.p+"static/media/moon.d3d1bfafeb9fe256beb5.png",xC="firebasestorage.googleapis.com",CC=function(e){_(n,e);var t=C(n);function n(e,r){var i;return S(this,n),(i=t.call(this,TC(e),"Firebase Storage: ".concat(r," (").concat(TC(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(E(i),n.prototype),i}return N(n,[{key:"_codeEquals",value:function(e){return TC(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Z);function TC(e){return"storage/"+e}function SC(){return new CC("unknown","An unknown error occurred, please check the error payload for server response.")}function IC(){return new CC("canceled","User canceled the upload/download.")}function NC(){return new CC("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function PC(e){return new CC("invalid-argument",e)}function RC(){return new CC("app-deleted","The Firebase app was deleted.")}function AC(e,t){return new CC("invalid-format","String does not match format '"+e+"': "+t)}function DC(e){throw new CC("internal-error","Internal error: "+e)}var OC,LC=function(){function e(t,n){S(this,e),this.bucket=t,this.path_=n}return N(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new CC("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===xC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new CC("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),MC=function(){function e(t){S(this,e),this.promise_=Promise.reject(t)}return N(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function FC(e){return"string"===typeof e||e instanceof String}function UC(e){return jC()&&e instanceof Blob}function jC(){return"undefined"!==typeof Blob}function VC(e,t,n,r){if(r<t)throw PC("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw PC("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function qC(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function BC(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(OC||(OC={}));var zC=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this;S(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return N(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=SC();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?RC():IC());else i(new CC("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new WC(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new WC(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===OC.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new WC(o,r))}else{var s=r.getErrorCode()===OC.ABORT;t(!1,new WC(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),WC=N((function e(t,n,r){S(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function HC(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function KC(){for(var e=HC(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(jC())return new Blob(n);throw new CC("unsupported-environment","This browser doesn't seem to support creating Blobs")}var GC="raw",QC="base64",YC="base64url",XC="data_url",JC=N((function e(t,n){S(this,e),this.data=t,this.contentType=n||null}));function ZC(e,t){switch(e){case GC:return new JC($C(t));case QC:case YC:return new JC(eT(e,t));case XC:return new JC(function(e){var t=new tT(e);return t.base64?eT(QC,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw AC(XC,"Malformed data URL.")}return $C(t)}(t.rest)}(t),new tT(t).contentType)}throw SC()}function $C(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function eT(e,t){switch(e){case QC:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw AC(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case YC:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw AC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw AC(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var tT=N((function e(t){S(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw AC(XC,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var nT=function(){function e(t,n){S(this,e);var r=0,i="";UC(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return N(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(UC(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(jC()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(KC.apply(null,i))}var a=n.map((function(e){return FC(e)?ZC(GC,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function rT(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function iT(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function aT(e,t){return t}var oT=N((function e(t,n,r,i){S(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||aT})),sT=null;function uT(){if(sT)return sT;var e=[];e.push(new oT("bucket")),e.push(new oT("generation")),e.push(new oT("metageneration")),e.push(new oT("name","fullPath",!0));var t=new oT("name");t.xform=function(e,t){return function(e){return!FC(e)||e.length<2?e:iT(e)}(t)},e.push(t);var n=new oT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new oT("timeCreated")),e.push(new oT("updated")),e.push(new oT("md5Hash",null,!0)),e.push(new oT("cacheControl",null,!0)),e.push(new oT("contentDisposition",null,!0)),e.push(new oT("contentEncoding",null,!0)),e.push(new oT("contentLanguage",null,!0)),e.push(new oT("contentType",null,!0)),e.push(new oT("metadata","customMetadata",!0)),sT=e}function cT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new LC(n,r);return t._makeStorageReference(i)}})}(r,e),r}function lT(e,t,n){var r=rT(t);return null===r?null:cT(e,r,n)}function hT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var fT=N((function e(t,n,r,i){S(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function dT(e){if(!e)throw SC()}function pT(e,t){return function(n,r){var i=lT(e,r,t);return dT(null!==i),i}}function vT(e,t){return function(n,r){var i=lT(e,r,t);return dT(null!==i),function(e,t,n,r){var i=rT(t);if(null===i)return null;if(!FC(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return qC("/b/"+o(i)+"/o/"+o(a),n,r)+BC({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function yT(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new CC("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new CC("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new CC("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new CC("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function mT(e){var t=yT(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new CC("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function gT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function kT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=gT(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+hT(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=nT.getBlob(c,r,l);if(null===h)throw NC();var f={name:u.fullPath},d=qC(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new fT(d,"POST",pT(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=yT(t),v}var bT=function(){function e(){var t=this;S(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=OC.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=OC.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=OC.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return N(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw DC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw DC("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw DC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw DC("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw DC("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),wT=function(e){_(n,e);var t=C(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(bT);function _T(){return new wT}var ET=function(){function e(t,n){S(this,e),this._service=t,this._location=n instanceof LC?n:LC.makeFromUrl(n,t.host)}return N(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new LC(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return iT(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new LC(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new CC("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function xT(e,t,n){e._throwIfRoot("uploadBytes");var r=kT(e.storage,e._location,uT(),new nT(t,!0),n);return e.storage.makeRequestWithTokens(r,_T).then((function(t){return{metadata:t,ref:e}}))}function CT(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=qC(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new fT(r,"GET",vT(e,n),i);return a.errorHandler=mT(t),a}(e.storage,e._location,uT());return e.storage.makeRequestWithTokens(t,_T).then((function(e){if(null===e)throw new CC("no-download-url","The given file does not have any download URLs.");return e}))}function TT(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new LC(e._location.bucket,n);return new ET(e.storage,r)}function ST(e,t){if(e instanceof PT){var n=e;if(null==n._bucket)throw new CC("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ET(n,n._bucket);return null!=t?ST(r,t):r}return void 0!==t?TT(e,t):e}function IT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof PT)return new ET(e,t);throw PC("To use ref(service, url), the first argument must be a Storage instance.")}return ST(e,t)}function NT(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:LC.makeFromBucketSpec(n,e)}var PT=function(){function e(t,n,r,i,a){S(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=xC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?LC.makeFromBucketSpec(i,this._host):NT(this._host,this.app.options)}return N(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=LC.makeFromBucketSpec(this._url,e):this._bucket=NT(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){VC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){VC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=w(k().mark((function e(){var t,n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=w(k().mark((function e(){var t,n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new ET(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new MC(RC());var a=function(e,t,n,r,i,a){var o=BC(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new zC(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=w(k().mark((function e(t,n){var r,i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),RT="@firebase/storage",AT="0.9.9",DT="storage";function OT(e,t,n){return xT(e=we(e),t,n)}function LT(e){return CT(e=we(e))}function MT(e,t){return IT(e=we(e),t)}function FT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new PT(r,i,a,n,ft)}function UT(){return UT=w(k().mark((function e(t,n,r,i){var a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(n),e.prev=2,a=MT(wN,"profile pictures/"+n+".jpg"),e.next=6,OT(a,t);case 6:return console.log("uploaded!"),e.next=9,LT(a);case 9:return o=e.sent,e.next=12,ip(id(i,"users",n),{profilePic:o});case 12:r(o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])}))),UT.apply(this,arguments)}st(new _e(DT,FT,"PUBLIC").setMultipleInstances(!0)),pt(RT,AT,""),pt(RT,AT,"esm2017");var jT=function(){var e=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=MT(wN,"profile pictures/"+t+".jpg"),e.prev=1,e.next=4,LT(r);case 4:i=e.sent,n(i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}();var VT=function(){var e=w(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PE(bN);case 2:t(bN.currentUser),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qT=function(t){var n=l((0,e.useState)(!1),2),r=n[0],i=n[1];return(0,e.useEffect)((function(){t.authot&&jT(bN.currentUser.uid,t.changePP)}),[t.authot]),(0,vC.jsxs)("div",{id:"headerot",className:t.lightTheme?"light1":"dark1",children:[(0,vC.jsxs)("div",{id:"headerLeft",children:[(0,vC.jsx)("div",{id:"backButton",children:(0,vC.jsx)(mv,{to:"/Lobby-select",title:"Back to Lobby list",children:(0,vC.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/ae/Google_material_icons_arrow_back_24px.svg",alt:"back button",id:"back-button"})})}),(0,vC.jsx)("div",{id:"navLogo",children:(0,vC.jsx)(mv,{to:"/Lobby-select",title:"Return to start page",children:(0,vC.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbQAAABZCAQAAAD8kBklAAAAAmJLR0QA/4ePzL8AACQZSURBVHja7V15YBRFui9gFQV9rqi7uq7H4gUkmdA1M8GQFaKIiIjCQ5DHCvJAVFzhgYgHyyGggBAEAWFB7lPDTRAUCIFwBAhHAiTcCZCQY5KZTK5JMjOZ7/2RSTJHVfXX3cOxONX/dlV9XfX9ur67CAm2YAu2YAu2YAu2m9ygCTwDL0BvGAavBlcj2IItEKC6C/4CeugK78NXMB/i4CjkQH0bEFyhYAs29fAaDythL5yBUhC31sG1CrZgUwuz+8AFmFYBdwRXK9h+R+JdfnhOn7xROV/nz8mdlz3z6qSro65+cmlAWofYh0gD5eNZXkfBDKzZ0nhpvDTeMDK8E7k/uA/BdnvCq0F+VOFka3xlruj8qbQWn8vdnDp46sN4yBVMwwEtGWjNUyrtMPQOQi3YbjeINTL3Kt5sLwIFzWkvSDk6NPqPmPGt8bgx19cCLQi1YLvdWmEL60K7BVQ2a97xmO5/kpuj4hputAn1QAtCLdhun5bftuw3VzVobAVZS/uRxgLB8V5AzeGEjp5AC0It2G6HVvBc+XakLVC2VTp2Tot+mAvnTrhRTN4wC0It2P7jdbLGxXNcdghgc7q2rg5pxRFOv8aNkeIPtN8F1KBxYbeMvhl9M/pmvIPTeW+qFNQp6x811K55kjQKYknQLH+vysCxvgMKIReqUO9Wub5Z10bPNIVsx822mQW02x5qBbTqfO0KlFnp/97KUCt81La3brtcw4dHPhqEGrcVj3Y5MWxvhlXwJlCgEA07UDLmZadxDQtqFVdwQBvPBtptDDVoUDzOU7JIBWPKrQs1Sx+H1UMzB/3psI+DUGO2nCblmzEs74J4iPZi9kQUVL61+UMtpwkO2HZ4gQc0oKV0UWjL2203ip6sOOK9BhuA3qJQK7i3PNab1uNAg1Dj/JHuq0jGCYwL/Vj9TZQAeQhoqS/Ucl/EnWeX+TADCnR56FO3125YBzn94j7HAb0loWbt4PBz0KwFGoQaq+U+VJmGM7L/wGT1FETfXKB+UCsYiwPaHhHMnPop5J7bZy8KW9j2sc70KPf33kpQy3mwdDVLcxjlpjUINa+W17QyBcfwSznMvgrRt9Qt6HlCzRKHm3euCGgW3f+pibG8NcX3kphqpnhwxeOLbw2oQYPijz31Mg+HDjxfR2sQavUL1siWgGP3RC6zj0T0LqvTqeqhZruE0wp7ioCWHtHz9jB+WAbbTbi1v/lQs3SuPMejNcOL1iDUai2Nc3Awy64TXvwfjNc538N8UQM1uNPlwMx8TayhxdMX/vN3wdyr4pxoDX70+eqbCbX8KJvQ/pXgQ2sQaoQQcy9cBIgdhgvZXR4xJ7wshcY1bfT5UTiIxzNn7AnDYBxMgJkJG3ukP0H+cB3Pmrtyn8wIz4rO7HS+XTr9tRlWUIUG5seywshdsifZP8QgAwDo7/f9yqFW8EhW2MWoKx0zO6U/n/pcwh/VCNxF7cv3y3HMPD9a1UAtr2nOE1m6jHYZr5yNOtfiwJ8CD9T8P2e2YIcHWu+/EpIVffHFk2EH/kQaBsIw+4izGMfs28SnClTKjrDQ1yi/5uR83NzfePQbCpsgFUzgG7risJVkZq9PHRiovzw0KDCY/mXdVnbWXuTLWJXWorSrS4+/5WmCgYaWx7NfvDYgd5zpR/PW4iPll6qsLifAtRNSOz7U8ppaP6/MQoRnM9dcHmrQ2PyKeaplW9lZu9XPkeKqKLQcu7wgvp0oFtXzC4v62VIx+9WbQSsOanBn/svmadb48gv2EobuV2RNz9mQPnzhE2qYHxoUPZHbOWdY3mzL5tKjFdeqKwEy9rQ1en59YYui6SXJdi/Ns8KcfyB9zMiHNbFTGdIYYYGXZIBmk2UVP09Y6UkTZm6bW7XuCXEg36GsMGV22z9pglijwm7FW5ylCPOO6eo287bio7ZMu5UXGr29nK5kQ63QWLTCUYpb/8swwesZKAs1818to8qOV6NC6axXk0aJAZvfvGiGPR9Ha6kPrZ+goFbczDy8/CiOXqfDdOLoEHKfvCRS0DX384IfLb+Vnqo0sdSU2CLj3FqoWV6vOMk/q8uLU+dGqwVbUXdstOICGZhR2XIfSxh9cPkxKUChC+xEBnsBAORd/vpNdYJGcTPrVIeizDu5NgMksy/U8p+yfGO7oGXUn4SnmuX1sj2gMO/ClDnrLXIHy/Fj/qQsGTRkcRyRPdVML5TtUh5da8n+ZShpKpTXusqNMQ5ojnFuW+OppyoQURdXz33cWcVZCo2rcnCflCsLMwplwhFOMnpEAW5tY+BbsCpNzikZ2YPcqWw9TPcU/1BtgwC3nkB9oFZ1SHtexGjPlTwQ2tHjnHy54pS6Mcsq147whWzZYlzkjqjFetJ6KqSP974Uvmw7rHbkaldqXFgLAdCmyvSvSb3KWbarqgw34yVTVEfFUCsag/2geQigiXS0C9CJ0eNL1NxFsEUVX57O03VVAjVLH6xopCj11f2t9VAz3aMdZnZv++9F+o9aFb50k5bRy+1fDot+0HNVKq9pX4MxXuqCYWT9iZb7UPlarauRkia153L4LnHfQqBAYQ44FMyXcFF6WRHUCu7Fikj5CJhR4P/40nwiI2uf1ajZ1R4xLpiSgoVaXtPyjZgxK0CpfHOu7mtroZbXRjvrZnuto5RgiCaEkIJoRz5vLY7B19AJXoKxcETI2eetusH1UIOG1Q6ttDq8dfPzhv+p+7X1dgo5sBL2wSToCRTGwGWRTfo8D2oVMmamNKAwDZR9og167FcENeu3qo5+ztOTG7L1m0eUgPeTBNe3HQZ6EAO13JCqC3KLuxs+d5uDhsAOqEDT4OmYqIFaEk1ev8WyHtbDejiO1Z9gvdczw3slV4Q8TUjRAFcVj2FjvN5fLxSmhpyrh1rW3WkLt+bWzIks7AKVPrT6xBLFS+1qLIAlMeKzzASDPPp1gWLB+T7kIAtqeU3l6gPsgL5QqpivtgDdi4Ya3OWwYhHcCQE0dmRIDowV9LmqWGC6BGmAL2BSChQBtcI2Tqucu3yQD+X9Aanc+riZJTNdGdrR2NY4Q59FgcJu5CgHhWtvnEmaWQfyzBUOmOjXQ0T9VtCfroNaA/KYbqT+HAUKPyJpvSrmlNhWIYRA4/KdclFE7/v0FAH9GEgJ/lDLf1mO1vlwwccWkQZmeT0NKB5qRUOx7HoIIzi6Zub7CivZfrEMPuyhwIoIAHAAerhNKHhdf6gs1EwvOEvkdMReDOpPIyn40KefN9SwhsfVMsyb9AnfZMFKmN0qYyNkQW13YPjlgO6NJX+07ZEzUkzx67lQeBhEMaCW/5UcrZ76QglMBwoUnodDMr2qajRkHNQq0MblrzFAy3x10uL5G/J+g3jYD7tgtd//yP8Zodpy9S7a1uwWW7hQK6DOMjlNj51wWoCUBvx7ekINK7aMFq7kwJyKKgXeS6DwnWCus25DvC/UsAzzk3jfi6M3mGT/lKxcjW+EPSYD9YOaXMB6lcfpVQrD6mbqLht84fYMykOtIBrtq0DATFdk/N7YnDwe8gW9QAH7LFd0mnn3vYzsF1fbgwk1818debK2SybtHZFQz2T2roXayCWqzAl+z3lB3/3MHqMEPVLrfF7eUCtH2gzGyex7sqwgU8JUVqYI+yx3m4U8oYYLWHcbzrzmkvupTKp9Uw5q1lVYEvbLQ8Zp2NrmeUJIA2VQ269A1+rs0/cIsufu+j5+UIM75TPwXHVRDd7POJU/CG+oJSHLEuUJ13GWsO8yxUDb5+FerofaJqSt1MmxMNc+saqNb2IdcWudBbYWanAH3mLqm5VyDO/uEkENGtrNWBJmykPmLO3vdsUqglomGmjr/fpiLWA7PHv5QA2Ts8DL616DnH8l9+slM118YTNulOPCdRQ7uthpulOR5pt6qOW/EwhX0BiQ937zjG9rUUCrhxrejVKi+EfuZX3gQ83cCUtClWyEIy0zzDI+Vje0AqhhTeTFDMHpF6Wiox/UrB0wpWF5RoiDyPm/FK1AYi5S7dksGOUbmb4bFP4o7G6Tky/UCuci3ccCWqMgV4MUcAB9CtZALf9TLJf777KcqDPJ+30e1CzLsCRkyAMmSfeqV7IFEmpD0OfZbkZvrAVsrW9PN9SgEaakngO6aDqNHYL8PQo0tgKZN/GtSOOR6ZulkGn3MaLudYOjHyxG/lu2CGjdhtKWhnF6i8PJ5/i48KX2lp9xFBcx/LxyzDHUtwcbanglcY8czIr1E0kzn+FRUFuszETv8xxC9mU4GA6GdSYNi1AmT35BoHLU7DlCh8hQ5BK43GX92C4Sebsl60zL4Zq+ejITXPTvVSLdlzFcWvug3Dm8Ne8r0883W09KMCODx7YptilXsfTQvfQlXw3tfnwk9nw5oCX6DY+E2h4kBSbFdjbP9hmLOeNGtHOg2OY3Du0DkLMfE62cbd167XbfTxD9qz30l1qmreboKp9w5ul/EssxPbi07kP138rpvUXhGhmhChVDWQ19/Pp2lQm/PMemcZH+cW+gvYk3q8t4w0r0EzmFS2WhdhFJQRKzNy76t5ppATNaD+DKUHrfXuPxICs/cPQj93PlONLsmi4YBekfgNNeQvB65rmZzkzXVPbFRdwR3kFGibKh/pJM9sZ+Vb8gAHYcS4xMn3VMGvUZtL+X+AhfY2FmB6MQaNLhsM5cD4IM1MqRNCxgCkx2DWeBESwos28FN0ZzG5L2ScK1u4Y8lndo1HpqJYMRHgFkiVBQd6o54RrsZ5799c9vyFnOaKTUrKo3ywmzFEnxL4zZxDXqy6Arz5+8kDzmCbTN2M2RidqvMszSPyJw1gmg9n4llgbWX3YYsu8FJt2zNfWmQAEnR7m4phQKFCI2VSBjTUUpSgkKnP4O2OZlnImGPvCRQP/zfNKRc+zk6pI4f9IBjtfPIXNe+/dBCi0wWYEGW9M28tfpkO5VT6ChTSFnxct/SeonU9yFBTWXrogmbtyBo4BdKWOhSjdkzZOK7B3P/XJU/QV3rhPveQ9t+R0o0nQVZu3keueGoR9syjlPp5+qof+7MmKjDQYweuGYvNrPg0ZhuLBHtsAhL5nDh9TDTEHaYbJw8cM2PBsuG1LZgDwe/iFdboyjO+keKcGwlS4wjKQv5SDZjC2K7ETSv5wp7WMP0zmc744GXMrxaaE08PMGHBXlwj3YZgKFzQm7a3yjNrqT7qV2DMx6atbpsX7HdxmGpwIZuWGBBtWkUCF3WaGvWJmaXA+0EPym7BYNWi6NR5XhbkDuDX0qwqD/uyFaat/WaHyM3ElICdI+z7b7pSHp/4LRdy7663tyoxvUm43rNiQvGWkKuSQMflu0H1S0ApgE9IzUL7wT3YmB2gzkuDbuCIUq5ZdJIJNawYgaokBhkGqdsqPAYVICn8uslHFOPdBewW+IKCKBnmn5tvo6U1UWLacKbtvYobjYZFMz98uxYaKzRWHYJ64iTSH7hMHcXSY4qtRAzQVHS94dTBqHv4KBGjYOhxfe8DGyf7pPzt8RGT+Ug1ugfr7qo4SfaJ8pFOLdz+J6oPXHb0esUJl/WlJdS/IvWAr6MIU/nBuQbcrBJmymag6Gfke0IdvLkL+a5cIoU8P/ZMeDymYti/2YNMNADZt7xwtAX6nQAtgd5kOqbIGBfEFS8S7kjMv81IJijttitYwFvjbXvR5oo/BbsYo/oEMXo/7qv4LeuPmLmXOP1QCVzoAt6cS3LeHU7BLhhvRZhdWURWZ3KcEQHdfBqbpKlaP64PKwFvJQw0agr9CooV2Cs5AFFsTS2GCrMEvgLHJGX9NQFzjhxSEuMMEhmMt19IhOtKn4jVjKHzBf95H6+1sKZ2mxemIj51kxBmgXItPsiymrJ+8coECdKzdhPZnCLV4T1oLceXI1aGjJJ0I7iqH2Jtp69gVnhMsQyGaGrVxPVu2DCyJ1F5vzebrDt7AYFkIMfCG+WoUl582uB9os/Cet5WsHx3RdNVyqgYvG4bhqDyCp/05DsqmLu5XIbBG/ax68r5lKQn6E8HIPV/h35H5CdH/LvKiFcY9kiqE2De2ni1JZwxrbiiAJpiLYvRdyPIsqV4fgcegn1gNtAf7DfuVbVzY/TdUDrRJplJ6jIXLeBd01OAb4W/A9coRFwmumMpGmEKGDpSzis5qQn04vpl7VwsC/nBFBDVkznhtC3VEjvCohB5JhNTeqX/0enQ800HLCP6gHmoIKAvzaS/p5qquQk5wHsbLIOxo8JGyr4THkl/NDibYiRxgi2pDdJUhTyHphnRapX+2aGqI3pdlVs7IdRiZxoebCOviPcujExvGUwzXIhPNwBo5DMuyHX2AFTPOrP4Z5sIFpiYEGWqLUoR5oK/EbkM09IqXxSstte9Qm6qbFFIKNnD+pyQO3l7uYqci/sMhG1T3WhcyfEBZGOhjeqX5VDdFfHc5RDbWTICWEdgx/Rb+MptNy9/jV1GI8SX8uQlYQ4oVQT0fSsD1gDI+1kq4Sxz0dpiZF81ZGzI76Sz3QfsQvv5MTracr0g3VcFFUDG52tinkByTtcZrSa/iVnHB5A8Lahq6FW3BUsAKE+JE5hujoPbtU3kXhhHdBSgjtqHuuVS/DSP3E8G/1U+i48CGh//0vA/anwAuhxjLc0oABrRA543hhWm5In/D5SqBmPBnylkf0PlqABQD2DTAUdJdavSN3E1V+c96ZZ0WmR7MDVLcjKf9Wk/2Lp3K/gCwfnSTaktJ9SFOIOFrSOLfNn71X1hAtJYxHs5l3W1NfbaMBuYPcQ5rUMI18EdJanZgXQr1M45orfbogNRNh0He1LoY0e6Y1Hmq6It1Uj/OMELQbCgB49Zd0x3VviIFWusBRumGkX+51TUVJpITDLitzCnkWsBcxA/ndvBiALxWwLV8ouXQON4owWrJSP8b/V2aIlhI6QZKKeyOOMsq1EUJI/gStP4WfkBSMCxDQJmMd9sJMS+OnpCFpiIaaTbe2rdHL4QXvKtsAZrXhfR5KHwtmMwAAimyvfdjhAb96JfdhuaCvhsh5k4oKiJ7/Op6heoVKR6iXm3l/EfLQEd6xmkMHsdbeEC0lUIgBpVe8XfIr14YrQlrb0riUIhPJPfLltD0bkfNdFIyhz5D6EkIIEmoVdLv0ss/dchCtbANs8JH/wL9GRAruZanbmtirkR/4Qs30Gm7eEk6mLS4MIkWTmsyPmMdlOTmEUQvRG7CxHLNEogpXqqiBWhdIUbTPOX7l2mpaObJS16+aKjkCgPCWBiUP9uKQA7iUZlmoSWbd2vBXyN2+2lMzpXJFnp9/nO9FK2xTed7L8nfKF2qmSbhZz2kKv9rEWZRjms5DbAEGccHTGOwvlxnpWbe9vzwbYbqnsHvhD5a4ov2WvabtWfPPfDD7L6RBLdQoxAI+Oivbr1yb+9omZFbRHC6lWClgOhpK7wh9annI+X4W6b9xEYY6lhVBrZwe1U9so2faI9Cmt7pW4FOfULc+VMe6lLZkmbeFKgeoH9SsyKx4tikEG230DWi5KIrr1kBe8SMseFrx624tZ3rt89HPpnVOP5ei034tKa4ruasWarPRF4lc8CvXRggheaFYHnlXc72RDUiYPQ+XoJxXRqjqpTNO5EEySRiz2PpJD9Zu+Exr3Tya72k5piU03bBVmhz+Ove+dHRFFy9h6KCn6zC2VYiPyvyUdb7/teduddMLanJXw9W2uRrCr6q5F03ham9l8i6TQK6WKL1In3U6RQ3r+2bVVXD900lpkd3qoTZdpZ3UXYT0AxytZQJav9Dk+fRPu63xhTLK0pXpThjnrh6P5ekeAptj+Lc+uZYNW4aGfayboV+mX61fpp+nm2YYaewVYRAG1iupguVtIsiAeJgNPUG3rkVY7S3YBe3N08qS2b6WukCmOqjJXw0n/kPirIZ8C1icJhbHllCYJmKV5DxkuBT/1oNFQm/ZcKBJnlDDmdfXMHIDpPZmZMDeZcEXd3a5kD/zd2Rh9glks4wn5fRs+EZpQqs3yWN5XwRAXig1fsoImW9E7jc21z1nbK5/hNzrf+G9P9DudlaBplbtqrJVmGz5DhtWwa6FGtYrU6KpdgU/gArnPOVlNWPLtop0K+OWUmTWSRw3jdIur196QS0V8RMdwBSg8pAZLqdEX2w1Iy+bSBfG0/SBRK/TeYNbR6KL9GNa9m7bmvwXIYQUrcXNJazBfZn2J4Fo1/bCDWlewsCpyA86PJCPPNh54Z64eD5+KC7OD5bFqeSETb4Q/pUX2JHB7Es4I4g9iUfqSrXXQI0uoZcHyYqPHK0081qh1tOXAk0/hw55PsM61SqpaWrxMb97gxNqKp8sbtvafcUKIYSQsjO4mYTXJSa37hIQoO3ofmOA5pMRdiryg3xkPvAudoygZsNtFAqq7NzsKcjZq0RbaO/8Ndbqy7bjdZb5Ao86hUmR3chdrZ/UfSQdlisXx7v1xoQU9HeKvjk+fgWeZ+yQAithNAyCPjAcvoONkFpdzjSe1hR5MKZIA+o1JWjoRFpJheHa256NCAjQyN25J28E0Pwi2E9ZSnA92bUMsXeEim40wdhi2EkyyF8lOEVbaBqPre3DKSQhd3uMV3J+UmQ3chdpEvbaznPiGAneRYfI7RKm80irPuvosAeeu2qDkD2hlq/D9hbp0fplxuaBARpZ3U19Ajy2Zap2N/tfWVDzTET2NosqISKybFg2tNEK3I8jubMbUj/Eph9wyvLIaZk+Ro0aqJFk4XG8UHMRg0xBCHXYdNIsKzHw/FVfZq4eaqZ/Ynv3FlCsi6nR9wLRGqetu95A8w/r/QrZs1SjoZjnHKBAq6ehPARv+omcSlJQBDEHvzX/uwv5t7Ey76aTs3z6ZaUnRXYjd+V8oVwfpiB3yaGnXvqRyILXcEd3lyuw3FXtpc3VQs2CzLYUVsssD/kccQk8tkU/nZN1PWHGUjaRBiHu1r+Pnr2MFzlXoh9rRdyG953Kyle1TMCLk5CWGptXoG9bZeUADFe+dkmR3Qo38eHcKwClwAEyeVdWXpL6EkLuvnoosPzlm0RVA7XSE7jeV4SeTmkACWSb2M1Sdr1gdpXpMk5G9o7nVnDHi/qVsJ0lHpyP6JPynXzvVK9IhD2Kv98J8SwGduqnkHsKD+DHSWPcDpcrM7N/5kHfZDvHoWOD0UIbaZyCb77GTlM9ENqREEJmRNtsgTzP/MO2jSnSAAeSo4+oiiJV2/4wvV9xxfWAWQ6nehBW/Po3dxGU5RCX+Sv5ewzRb/y5CBEOt9YN7VlwVTUz/OaXs2QYRhpcnKZsHF8z/0wZbfGCz1e/BLy4YBt8JeMgHqfwm/0vrqwL12u0c5wzYOIjO69hODaBnhsLKxcyr9r6OOWD/ICfamc5uWDYpElgO0+BAv6SeJ7oJa3SPUfIpn86EGZrK+SDtv/QWP+Cp70Jmd9CSXXhSv8iQxU7rHKC0YQ6GWAGN8i2EFXuJlfRF49jFMmuiwV8YO/PgUHaAY253AAzhUVQWz9DAt7u6zso3Rw4kDlgE9e7P1qjKaQmBAefql/iH6FRrYsh9xFCmiYtVbPlVbBJwdtHmQVPCSGNMnfgR9nI0CGMM1JkK4SWwTW4Jij0loy8sGmFAsM8I5i6Uhpdn6cV1iLugFZjdzXzRjOlv+H+4iJ+fyTXod0vDVieURoQmKXxbU8KCp+Ki4Adt2NBMYWVNzuiJoZN97f4PdWKfyJzwIgWJK+xKkOuCWtBCCGTpVLkNfGnGL8t3TFdV6n9Rg1Vrwrge3RKiu54JvIet1xWgb9c+r4ns0nt5h8v0cBhBcKYe2xaSoUwu0L/JSKOUS3Uup/crklMqobTsqnoWLNTvHAZem22FGNOs7GivFlCSETkgsNKtrzYXbv4I1Qg1kXmeWH83p3F0HDT8CqEHH2EXad4l/7vhEjtxx9WUwHYDD/hC1wDddEFo4dYEWaMTHY0fHqrXt7MJrUfsP8EqJEnLLCe61hXUp9YlAZFgV7Tv0euW7tfGmBM6QqxoLxgmQtyIE50FCuIyXBBGeSJffZZdNAP/QrKxCdPIrN4qq89SWrfIzEedVuaE5I8zDuDZb7EBrFs8blaGk/+4J78vxaNK7GLNcS5MtWvpPZSwkIwKziRz8Ac3FUNHuYb46ekyYQ+eSXiE2IzZ1zW5ctSeylhLKQpqtd1BX6U/T30QY1kg0LOZWC1tsvIboRcZ6jV/LE3wFlE6I0dsuEQLBNGqnun61X5nIFlkAcX4BjshvWwACbAQG6lDp+Nu/u1XvuyKjl/vZ2iy3W8KiHWbHkX+AkuCNwGVtgNH/p9yypO2bl82MyvrWTXf+nhx3x44JeJhZVM6SATlonWYmWtsi61lxKMEAOpwvROFxTAEVgiW6+e8o3zd3fsuTWDzRN5ECfQ9vyL/dTSTWEQbIEMGQOZEzJgI7KI6my/dSyFXLgAx2E3bISFMBkGM2vt+zw7DVGE3BCo1Ty9YTqshu1wAI5BCpyBk3AMkmEPbIU1EKOifuwAOA/JEA/rYD58BQOViC8eT/jGtq0JIU1C3uqaPA/i4SRcgkzIhDNwEGJly7v4e0hqtpxCNHwFsbAHUuECZEImXITTkAhrYLhgtGGwHg7BWff8h+Bn4dsUqIOO8pw78tGIzzpdmA373F9xFlLhV5gvf7HCT6EtfemPgtEQC4fgpJv+85AGh2AHrILxwtqQsrWdYtw2w7tDejx/+BvY5V6h83Aa4mGpPB8ksss41dJNIQo+h+WwDZLgFJyBTPdqHod9sBrGCGuv+GfppcMh2AE/wVwYA/0Vnt11MtNq3XOE3FCo3YqP8Qd3LcMmIW9JhxX3LzQM86lV5LHlN+DxyUyPfDTiM3pe8ShnjG/fGPqlw21eq3cFhfRQseLZPI3nhq67Eg773r9y2+8PahUexmJVUJP2h712E6FWEDbdOy5cHdT0C/WP3wD6TfoxXkynDmrclJNbEmqV0ug6Pfr3CzWfKLT/RKhdoV8HAGqX6L/a/PU602+TVvmVYFIDNZt+tXfp8utMt4vaMfdyc7gjz+M+mP9oqFmkX4xxtFCtKPO8tw3r9wu1i/ovryvUqujO0I6Mf7saqFnootoaM9cdatU0if6bHlENtVOGHoTcOKj1o0evi/xrpSueamtsS5eog5rbFKIZanS3vy3shkJtnPEx7VAzDI9+8DrRXyUlRHYjTdhhe8qhJpnDv/Mq33bd1l1/Tv+e9IQ0UDXU4qV25Aa2ew1v0YMBZ7D8VouejSCNyB1tnlcHNf9rHVRC7QL9x03UGVy1ESKaoOYwfu+9GgGjv5Ru03UlTfkRsoqh5qKxUSG84aT2dDd1BYTyy/oxbf5KSPSDqqHmYdG9Ma1xWGcaTx0BYy4nTddPbBnqTqhTBzWvuDkNUKugi8OfvXnquT5LN9SfjZVCTX+65du+oUIBoN+lz5J+lNp5lrsJANSyDcMEwCVSO7pGytMqNOrPSaN1f3N7KVVCLWL2Cw+RG9waSO2MM/WnA/EHl/J066S++kc8RlcDtWxpIIdWJVBz0L1hnXmWJak9/UnxljvpUbpYdxwrPuvnsT01iqCWS7/yWs96+hfTTA1nWaJxhO45RH6xEqgV0wW+J7hvC23ZcjQ9pekU3k3fj3zUIyBADdTs+rHMX/n1bi881KqXfpmGjQNaTXOMW4wjng0njX0GVw61Ix5eHbVQq6C7DW+Re0VbTkcZUpVY1ejeiD6tn5T6oaBWQJc8a+QxcuSjxhH0DOpMnMZjXekJ3WAVWivQMpqsmyp1IPdhU6xwUJPMdPkzbRBhug+0fJtuo8UqKC/XHdfF6F/03VUVUDPpBpOb1Boam9P/pfMNqbRS6TmmK6LJdFHYP1voOWIDHmouWkEL6BKe7aoGai27y+iVTnqJLgjtKBJiaoxBIT3oCnoF9RvJ1C0M70TuJYTc16oXTRKbGAyp+omhOtF5Ef2w/j0ZQ5SNJhk/DXlaBIGwzoZZCs4HJ82RdtBvwl9naMBCqOnekPbLnBCnpcnPtEZGw//BECGNlnboihTISma6R5qse4N1uiuEWhW10MTw18lNbA0jH43sph9Ll9B9NJc6ZUWzQnqKbtfPM45o3aX1k8KjmAW1alpBC/QZhlRpP91OY+ki40z9xIjPdR8ZomVqEzXWvSot5Zy/5fSUtFQaGPoUatMbhjwtDaT/lvZLZgHDp9Hl9P3Wz9SN2Di8k/EH40mmZltCjxp/COmBYOV7dG/Q5fQyE9aFNFE3TfeqsOI7IYSQDg8YeoRNp9uEYrCLltAzdLthVviHxrbyY7L2L7Qj/Tc9yxy7mB7VzWv5ttctmPKtqSHK+CldQg9Ri8wvroAepIuNI/QvEkEkBxNq1dRGTfSSIZUeoL/q1tElhlnSJDoqfEhEd0+Xibr2/zciPxnHaRGuAAAAAElFTkSuQmCC",alt:"logo",id:"logoto"})})})]}),(0,vC.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[t.authot&&(0,vC.jsx)("img",{className:"userPP",onClick:function(){return i(!r)},alt:"profilePic",src:t.profilePic}),(0,vC.jsx)("button",{id:"toggleButton",children:(0,vC.jsx)("img",{src:t.lightTheme?"https://cdn-icons-png.flaticon.com/512/606/606795.png":EC,alt:"nightToggle",id:"toggleot",onClick:function(){return function(e,t){e?(t(!1),localStorage.setItem("theme",!1)):(t(!0),localStorage.setItem("theme",!0))}(t.lightTheme,t.changeTheme)}})})]}),r&&(0,vC.jsxs)("div",{id:"ppDiv",className:t.lightTheme?"light1":"dark1",children:[(0,vC.jsxs)("p",{id:"hiText",className:t.lightTheme?"":"plight1",children:["Hi, ",t.currentUser&&t.currentUser.username]}),(0,vC.jsx)("img",{id:"profilePic",src:t.profilePic,alt:"profilePic"}),(0,vC.jsx)("input",{type:"file",style:{fontSize:"12px",display:"inline"},className:"ppButton",id:"ppUpload",accept:"image/png, image/jpeg",onSubmit:function(){return console.log("test")}}),(0,vC.jsx)("button",{className:"ppButton",style:{display:"inline"},onClick:function(){return function(e,t,n,r){return UT.apply(this,arguments)}(document.getElementById("ppUpload").files[0],bN.currentUser.uid,t.changePP,t.db)},children:"Upload profile picture"}),(0,vC.jsxs)("button",{className:"ppButton",onClick:function(){return VT(t.changeAuth,i)},children:[(0,vC.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/8566/8566238.png",alt:"leave"}),"Sign out"]})]})]})};var BT=function(){var e=w(k().mark((function e(t,n,r){var i,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],a=0;case 2:if(!(a<n.length)){e.next=10;break}return e.next=5,ep(id(t,"users",n[a]));case 5:o=e.sent.data(),i.push(o);case 7:++a,e.next=2;break;case 10:r(i);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function zT(t){document.getElementById("headerot").classList.add("back-option");var n=l((0,e.useState)([]),2),r=n[0],i=n[1],a=l((0,e.useState)([]),2),o=a[0],s=a[1];return(0,e.useEffect)((function(){rw(Jb(t.rtdb,"chatrooms/"+t.currentRoom),(function(e){i(e.val());var t=document.getElementById("dummy");t&&t.scrollIntoView()}));var e=bN.currentUser.uid,n=Jb(t.rtdb,"online/"+e);$b(n,{currentRoom:t.currentRoom});var r,a,o=function(e){for(var t=we(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}(Jb(t.rtdb,"online"),function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ib("orderByChild","path",e,!1),new sw(e)}("currentRoom"),(r=t.currentRoom,rb("equalTo","key",a,!0),new uw(r,a)));rw(o,(function(e){var n=[];e.forEach((function(e){n.push(e.key)})),BT(t.db,n,s)})),function(e){return e=we(e),new Wb(e._repo,e._path)}(n).remove()}),[]),(0,vC.jsxs)("div",{id:"container",children:[(0,vC.jsx)("div",{id:"roomInfo",className:t.lightTheme?"light3":"dark3",children:(0,vC.jsxs)(mv,{to:"/Lobby-select",className:"link",title:"Return to the Lobby list",children:[(0,vC.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/1828/1828427.png",alt:"exit"}),(0,vC.jsx)("p",{children:"Back to Lobby list"})]})}),(0,vC.jsxs)("div",{id:"chatArea",className:t.lightTheme?"light1":"dark1",children:[(0,vC.jsxs)("div",{id:"messages",children:[r&&r.map((function(e,n,r){return(0,vC.jsxs)("div",{className:sessionStorage.getItem("username")===e.author?"sent":"received",children:[(r.at(n-1).author!==e.author||0===n)&&(0,vC.jsx)("p",{className:t.lightTheme?"author":"plight1 author",children:e.author}),(0,vC.jsxs)("div",{className:"inline",children:[(0,vC.jsx)("img",{className:"profile-picture",src:e.authorPP?e.authorPP:"https://cdn-icons-png.flaticon.com/512/847/847969.png",alt:"profile pic"}),(0,vC.jsx)("div",{className:"message-content",children:(0,vC.jsx)("p",{children:e.value})})]})]})})),(0,vC.jsx)("div",{id:"dummy",children:(0,vC.jsx)("span",{children:Date().toString()})})]}),(0,vC.jsxs)("form",{id:"formcheto",className:t.lightTheme?"light3":"dark3",autoComplete:"Off",onSubmit:function(e){return e.preventDefault()},children:[(0,vC.jsx)("input",{type:"text",id:"chatInput",placeholder:"Type Something..."}),(0,vC.jsx)("button",{type:"submit",id:"submit",onClick:function(){return e=t.rtdb,n=t.currentRoom,i=r?r.length:0,a=document.getElementById("chatInput").value,o=t.profilePic,a&&$b(Jb(e,"chatrooms/"+n+"/"+i),{author:sessionStorage.getItem("username"),value:a,authorPP:o}),document.getElementById("dummy").scrollIntoView(),void document.getElementById("formcheto").reset();var e,n,i,a,o},children:(0,vC.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/2087/2087840.png",alt:"enter"})})]})]}),(0,vC.jsxs)("div",{id:"users",className:t.lightTheme?"light3":"dark3",children:[(0,vC.jsx)("p",{id:"currentUserP",style:{textAlign:"center",margin:"10px",fontWeight:"bold"},className:t.lightTheme?void 0:"plight1",children:"Current Users:"}),o&&o.map((function(e){return(0,vC.jsxs)("div",{className:"onlineUserDiv",children:[(0,vC.jsx)("img",{className:"profile-picture",src:e.profilePic?e.profilePic:"https://cdn-icons-png.flaticon.com/512/847/847969.png",alt:"profile pic"}),(0,vC.jsx)("p",{className:t.lightTheme?void 0:"plight1",children:e.username})]})}))]})]})}var WT=[4];var HT=function(){var t=new Date;WT[0]=-1*t.getDay(),WT[1]=-1*t.getHours(),WT[2]=-1*t.getMinutes(),WT[3]=-1*t.getSeconds();var n=function(){return ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt(),"firestore").getImmediate()}(),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt(),t=arguments.length>1?arguments[1]:void 0;return ut(e,"database").getImmediate({identifier:t})}(),i=rd(n,"chatrooms"),a=l((0,e.useState)(!1),2),o=a[0],u=a[1],c=l((0,e.useState)([]),2),h=c[0],f=c[1],d=l((0,e.useState)(""),2),p=d[0],v=d[1],y=l((0,e.useState)(null),2),m=y[0],g=y[1],b=l((0,e.useState)("false"!==localStorage.getItem("theme")),2),_=b[0],E=b[1],x=l((0,e.useState)(null),2),C=x[0],T=x[1],S=l((0,e.useState)("https://cdn-icons-png.flaticon.com/512/847/847969.png"),2),I=S[0],N=S[1];if(i){var P=Hd(i,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Fd("orderBy",e);return new Qd(n,t)}("timeCreated"));!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=we(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||od(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(od(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ed)l=Jf(e.firestore,sd),h=zs(e._key.path),c={next:function(t){n[u]&&n[u](op(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Jf(e,td);l=Jf(p.firestore,sd),h=p._query;var v=new tp(l);c={next:function(e){n[u]&&n[u](new qd(l,v,p,e))},error:n[u+1],complete:n[u+2]},zd(e._query)}(function(e,t,n,r){var i=new Rf(r),a=new Wh(t,i,n);e.asyncQueue.enqueueAndForget(w(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Fh,t.next=3,Bf(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))})(ud(l),h,f,c)}(P,(function(e){var t=[];e.forEach((function(e){t.push(s(s({},e.data()),{},{id:e.id}))})),f(t)}))}return(0,vC.jsxs)(yv,{children:[(0,vC.jsx)(qT,{lightTheme:_,changeTheme:E,authot:m,changeAuth:g,currentUser:C,profilePic:I,changePP:N,db:n}),(0,vC.jsxs)(lv,{children:[(0,vC.jsx)(uv,{exact:!0,path:"/",element:m?(0,vC.jsx)(sv,{replace:!0,to:"/Lobby-select"}):(0,vC.jsx)(gC,{db:n,changeAuth:g,lightTheme:_,changeUser:T})}),(0,vC.jsx)(uv,{exact:!0,path:"/Lobby-select",element:m?(0,vC.jsxs)("div",{children:[(0,vC.jsx)(bC,{showCreate:o,changeShow:u,newRoom:function(e){rp(id(i),{name:e,owner:sessionStorage.getItem("username"),users:0,timeCreated:WT})},lightTheme:_}),(0,vC.jsx)(_C,{chatrooms:h,changeShow:u,changeRoom:v,rtdb:r,lightTheme:_})," "]}):(0,vC.jsx)(sv,{replace:!0,to:"/"})}),(0,vC.jsx)(uv,{path:"/chatroom/:id",element:m?(0,vC.jsx)(zT,{currentRoom:p,rtdb:r,db:n,lightTheme:_,profilePic:I,changePP:N}):(0,vC.jsx)(sv,{replace:!0,to:"/"})})]})]})};pt("firebase","9.9.0","app");var KT,GT;var QT=new WeakMap,YT=new WeakMap,XT=new WeakMap,JT=new WeakMap,ZT=new WeakMap;var $T={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return YT.get(e);if("objectStoreNames"===t)return e.objectStoreNames||XT.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nS(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function eS(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(GT||(GT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(rS(this),n),nS(QT.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nS(e.apply(rS(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[rS(this),t].concat(r));return XT.set(a,t.sort?t.sort():[t]),nS(a)}}function tS(e){return"function"===typeof e?eS(e):(e instanceof IDBTransaction&&function(e){if(!YT.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));YT.set(e,t)}}(e),t=e,(KT||(KT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,$T):e);var t}function nS(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(nS(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&QT.set(t,e)})).catch((function(){})),ZT.set(t,e),t}(e);if(JT.has(e))return JT.get(e);var t=tS(e);return t!==e&&(JT.set(e,t),ZT.set(t,e)),t}var rS=function(e){return ZT.get(e)};var iS,aS=["get","getKey","getAll","getAllKeys","count"],oS=["put","add","delete","clear"],sS=new Map;function uS(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(sS.get(t))return sS.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=oS.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||aS.includes(n))){var a=function(){var e=w(k().mark((function e(t){var a,o,s,u,c,l,h=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return sS.set(t,a),a}}}!function(e){$T=e($T)}((function(e){return s(s({},e),{},{get:function(t,n,r){return uS(t,n)||e.get(t,n,r)},has:function(t,n){return!!uS(t,n)||e.has(t,n)}})}));var cS="@firebase/installations",lS="0.5.12",hS=1e4,fS="w:".concat(lS),dS="FIS_v2",pS=36e5,vS=(a(iS={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),a(iS,"not-registered","Firebase Installation is not registered."),a(iS,"installation-not-found","Firebase Installation not found."),a(iS,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),a(iS,"app-offline","Could not process request. Application offline."),a(iS,"delete-pending-registration","Can't delete installation while there is a pending registration request."),iS),yS=new $("installations","Installations",vS);function mS(e){return e instanceof Z&&e.code.includes("request-failed")}function gS(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function kS(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function bS(e,t){return wS.apply(this,arguments)}function wS(){return(wS=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",yS.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _S(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ES(e,t){var n=t.refreshToken,r=_S(e);return r.append("Authorization",function(e){return"".concat(dS," ").concat(e)}(n)),r}function xS(e){return CS.apply(this,arguments)}function CS(){return CS=w(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}function TS(e,t){return SS.apply(this,arguments)}function SS(){return(SS=w(k().mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,d,p;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=gS(r),s=_S(r),!(u=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,u.getHeartbeatsHeader();case 8:(c=e.sent)&&s.append("x-firebase-client",c);case 10:return l={fid:a,authVersion:dS,appId:r.appId,sdkVersion:fS},h={method:"POST",headers:s,body:JSON.stringify(l)},e.next=14,xS((function(){return fetch(o,h)}));case 14:if(!(f=e.sent).ok){e.next=23;break}return e.next=18,f.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:kS(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,bS("Create Installation",f);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IS(e){return new Promise((function(t){setTimeout(t,e)}))}var NS=/^[cdef][\w-]{21}$/;function PS(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,T(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return NS.test(t)?t:""}catch(Kf){return""}}function RS(e){return"".concat(e.appName,"!").concat(e.appId)}var AS=new Map;function DS(e,t){var n=RS(e);OS(n,t),function(e,t){var n=MS();n&&n.postMessage({key:e,fid:t});FS()}(n,t)}function OS(e,t){var n=AS.get(e);if(n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var LS=null;function MS(){return!LS&&"BroadcastChannel"in self&&((LS=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){OS(e.data.key,e.data.fid)}),LS}function FS(){0===AS.size&&LS&&(LS.close(),LS=null)}var US="firebase-installations-store",jS=null;function VS(){return jS||(jS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=nS(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(nS(s.result),e.oldVersion,e.newVersion,nS(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(US)}})),jS}function qS(e,t){return BS.apply(this,arguments)}function BS(){return BS=w(k().mark((function e(t,n){var r,i,a,o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=RS(t),e.next=3,VS();case 3:return i=e.sent,a=i.transaction(US,"readwrite"),o=a.objectStore(US),e.next=8,o.get(r);case 8:return s=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return s&&s.fid===n.fid||DS(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function zS(e){return WS.apply(this,arguments)}function WS(){return WS=w(k().mark((function e(t){var n,r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=RS(t),e.next=3,VS();case 3:return r=e.sent,i=r.transaction(US,"readwrite"),e.next=7,i.objectStore(US).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),WS.apply(this,arguments)}function HS(e,t){return KS.apply(this,arguments)}function KS(){return KS=w(k().mark((function e(t,n){var r,i,a,o,s,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=RS(t),e.next=3,VS();case 3:return i=e.sent,a=i.transaction(US,"readwrite"),o=a.objectStore(US),e.next=8,o.get(r);case 8:if(s=e.sent,void 0!==(u=n(s))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(u,r);case 17:return e.next=19,a.done;case 19:return!u||s&&s.fid===u.fid||DS(t,u.fid),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)}))),KS.apply(this,arguments)}function GS(e){return QS.apply(this,arguments)}function QS(){return(QS=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HS(t.appConfig,(function(e){var r=YS(e),i=XS(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YS(e){return tI(e||{fid:PS(),registrationStatus:0})}function XS(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(yS.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return JS.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ZS(e)}:{installationEntry:t}}function JS(){return(JS=w(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,TS(t,n);case 3:return r=e.sent,e.abrupt("return",qS(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!mS(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,zS(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,qS(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ZS(e){return $S.apply(this,arguments)}function $S(){return($S=w(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eI(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,IS(100);case 6:return e.next=8,eI(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,GS(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eI(e){return HS(e,(function(e){if(!e)throw yS.create("installation-not-found");return tI(e)}))}function tI(e){return 1===(t=e).registrationStatus&&t.registrationTime+hS<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function nI(e,t){return rI.apply(this,arguments)}function rI(){return(rI=w(k().mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=iI(r,n),o=ES(r,n),!(s=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,s.getHeartbeatsHeader();case 7:(u=e.sent)&&o.append("x-firebase-client",u);case 9:return c={installation:{sdkVersion:fS,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,xS((function(){return fetch(a,l)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return f=e.sent,d=kS(f),e.abrupt("return",d);case 22:return e.next=24,bS("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iI(e,t){var n=t.fid;return"".concat(gS(e),"/").concat(n,"/authTokens:generate")}function aI(e){return oI.apply(this,arguments)}function oI(){return oI=w(k().mark((function e(t){var n,r,i,a,o=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,HS(t.appConfig,(function(e){if(!fI(e))throw yS.create("not-registered");var i=e.authToken;if(!n&&dI(i))return e;if(1===i.requestStatus)return r=sI(t,n),e;if(!navigator.onLine)throw yS.create("app-offline");var a=pI(e);return r=lI(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}function sI(e,t){return uI.apply(this,arguments)}function uI(){return(uI=w(k().mark((function e(t,n){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cI(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,IS(100);case 6:return e.next=8,cI(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",aI(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cI(e){return HS(e,(function(e){if(!fI(e))throw yS.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+hS<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function lI(e,t){return hI.apply(this,arguments)}function hI(){return(hI=w(k().mark((function e(t,n){var r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nI(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,qS(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!mS(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,zS(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,qS(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function fI(e){return void 0!==e&&2===e.registrationStatus}function dI(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+pS}(e)}function pI(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function vI(){return(vI=w(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,GS(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):aI(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yI(){return yI=w(k().mark((function e(t){var n,r,i,a=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,mI(r);case 4:return e.next=6,aI(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),yI.apply(this,arguments)}function mI(e){return gI.apply(this,arguments)}function gI(){return(gI=w(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GS(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kI(e){return yS.create("missing-app-config-values",{valueName:e})}var bI,wI="installations",_I=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw kI("App Configuration");if(!e.name)throw kI("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw kI(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:ut(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},EI=function(e){var t=ut(e.getProvider("app").getImmediate(),wI).getImmediate(),n={getId:function(){return function(e){return vI.apply(this,arguments)}(t)},getToken:function(e){return function(e){return yI.apply(this,arguments)}(t,e)}};return n};st(new _e(wI,_I,"PUBLIC")),st(new _e("installations-internal",EI,"PRIVATE")),pt(cS,lS),pt(cS,lS,"esm2017");var xI="analytics",CI=6e4,TI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",SI="https://www.googletagmanager.com/gtag/js",II=new De("@firebase/analytics");function NI(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function PI(e,t){var n=document.createElement("script");n.src="".concat(SI,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function RI(e,t,n,r,i,a){return AI.apply(this,arguments)}function AI(){return AI=w(k().mark((function e(t,n,r,i,a,o){var s,u,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i[a],e.prev=1,!s){e.next=7;break}return e.next=5,n[s];case 5:e.next=14;break;case 7:return e.next=9,NI(r);case 9:if(u=e.sent,!(c=u.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),II.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),AI.apply(this,arguments)}function DI(e,t,n,r,i){return OI.apply(this,arguments)}function OI(){return OI=w(k().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return s=a.send_to,Array.isArray(s)||(s=[s]),e.next=7,NI(r);case 7:u=e.sent,c=m(s),e.prev=9,h=function(){var e=l.value,t=u.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((l=c.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),II.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),OI.apply(this,arguments)}function LI(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=w(k().mark((function i(a,o,s){return k().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,DI(e,t,n,o,s);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,RI(e,t,n,r,o,s);case 9:i.next=12;break;case 11:"consent"===a?e("consent","update",s):e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),II.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function MI(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(SI))return r}return null}var FI=(a(bI={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),a(bI,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),a(bI,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),a(bI,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),a(bI,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),a(bI,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),a(bI,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),a(bI,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),a(bI,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),a(bI,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),bI),UI=new $("analytics","Analytics",FI),jI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;S(this,e),this.throttleMetadata=t,this.intervalMillis=n}return N(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),VI=new jI;function qI(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function BI(e){return zI.apply(this,arguments)}function zI(){return zI=w(k().mark((function e(t){var n,r,i,a,o,s,u,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:qI(i)},o=TI.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(s=e.sent).status||304===s.status){e.next=18;break}return u="",e.prev=8,e.next=11,s.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(u=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw UI.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 18:return e.abrupt("return",s.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),zI.apply(this,arguments)}function WI(e){return HI.apply(this,arguments)}function HI(){return HI=w(k().mark((function e(t){var n,r,i,a,o,s,u,c,l=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:VI,r=l.length>2?l[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,s=i.measurementId,a){e.next=5;break}throw UI.create("no-app-id");case 5:if(o){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:a});case 8:throw UI.create("no-api-key");case 9:return u=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new ZI,setTimeout(w(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:CI),e.abrupt("return",KI({appId:a,apiKey:o,measurementId:s},u,c,n));case 13:case"end":return e.stop()}}),e)}))),HI.apply(this,arguments)}function KI(e,t,n){return GI.apply(this,arguments)}function GI(){return GI=w(k().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=v.length>3&&void 0!==v[3]?v[3]:VI,c=t.appId,l=t.measurementId,e.prev=3,e.next=6,QI(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!l){e.next=13;break}return II.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===(s=e.t0)||void 0===s?void 0:s.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,BI(t);case 17:return h=e.sent,o.deleteThrottleMetadata(c),e.abrupt("return",h);case 22:if(e.prev=22,e.t1=e.catch(14),YI(f=e.t1)){e.next=33;break}if(o.deleteThrottleMetadata(c),!l){e.next=32;break}return II.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===f||void 0===f?void 0:f.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 32:throw e.t1;case 33:return d=503===Number(null===(u=null===f||void 0===f?void 0:f.customData)||void 0===u?void 0:u.httpStatus)?be(a,o.intervalMillis,30):be(a,o.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:a+1},o.setThrottleMetadata(c,p),II.debug("Calling attemptFetch again in ".concat(d," millis")),e.abrupt("return",KI(t,p,r,o));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),GI.apply(this,arguments)}function QI(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(UI.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function YI(e){if(!(e instanceof Z)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var XI,JI,ZI=function(){function e(){S(this,e),this.listeners=[]}return N(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function $I(){return($I=w(k().mark((function e(t,n,r,i,a){var o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,s=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eN(e){JI=e}function tN(e){XI=e}function nN(){return rN.apply(this,arguments)}function rN(){return rN=w(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X()){e.next=5;break}return II.warn(UI.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,J();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),II.warn(UI.create("indexeddb-unavailable",{errorInfo:null===(t=e.t0)||void 0===t?void 0:t.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])}))),rN.apply(this,arguments)}function iN(){return iN=w(k().mark((function e(t,n,r,i,a,o,s){var u,c,h,f,d,p,v,y;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=WI(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&II.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return II.error(e)})),n.push(c),h=nN().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([c,h]);case 6:return f=e.sent,d=l(f,2),p=d[0],v=d[1],MI()||PI(o,p.measurementId),JI&&(a("consent","default",JI),eN(void 0)),a("js",new Date),(y=null!==(u=null===s||void 0===s?void 0:s.config)&&void 0!==u?u:{}).origin="firebase",y.update=!0,null!=v&&(y.firebase_id=v),a("config",p.measurementId,y),XI&&(a("set",XI),tN(void 0)),e.abrupt("return",p.measurementId);case 20:case"end":return e.stop()}}),e)}))),iN.apply(this,arguments)}var aN,oN,sN=function(){function e(t){S(this,e),this.app=t}return N(e,[{key:"_delete",value:function(){return delete uN[this.app.options.appId],Promise.resolve()}}]),e}(),uN={},cN=[],lN={},hN="dataLayer",fN="gtag",dN=!1;function pN(){var e=[];if(K()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=UI.create("invalid-analytics-context",{errorInfo:t});II.warn(n.message)}}function vN(e,t,n){pN();var r=e.options.appId;if(!r)throw UI.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw UI.create("no-api-key");II.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=uN[r])throw UI.create("already-exists",{id:r});if(!dN){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(hN);var i=LI(uN,cN,lN,hN,fN),a=i.wrappedGtag,o=i.gtagCore;oN=a,aN=o,dN=!0}return uN[r]=function(e,t,n,r,i,a,o){return iN.apply(this,arguments)}(e,cN,lN,t,aN,hN,n),new sN(e)}function yN(e,t,n,r){e=we(e),function(e,t,n,r,i){return $I.apply(this,arguments)}(oN,uN[e.app.options.appId],t,n,r).catch((function(e){return II.error(e)}))}var mN="@firebase/analytics",gN="0.8.0";st(new _e(xI,(function(e,t){var n=t.options;return vN(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),st(new _e("analytics-internal",(function(e){try{var t=e.getProvider(xI).getImmediate();return{logEvent:function(e,n,r){return yN(t,e,n,r)}}}catch(n){throw UI.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),pt(mN,gN),pt(mN,gN,"esm2017");var kN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:nt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw lt.create("bad-app-name",{appName:String(i)});var a=it.get(i);if(a){if(ce(e,a.options)&&ce(r,a.config))return a;throw lt.create("duplicate-app",{appName:i})}var o,s=new Se(i),u=m(at.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new ht(e,r,s);return it.set(i,l),l}({apiKey:"AIzaSyAxnCnkUuKTVCnGir7QCuBqiFQLWU2LPeg",authDomain:"chatster-45c51.firebaseapp.com",projectId:"chatster-45c51",storageBucket:"chatster-45c51.appspot.com",messagingSenderId:"741194242079",appId:"1:741194242079:web:7f3fb1778b3aec843d9d2a",databaseURL:"https://chatster-45c51-default-rtdb.europe-west1.firebasedatabase.app"}),bN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt(),t=ut(e,"auth");return t.isInitialized()?t.getImmediate():Pw(e,{popupRedirectResolver:uC,persistence:[ox,LE,FE]})}(kN),wN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt(),t=arguments.length>1?arguments[1]:void 0,n=ut(e=we(e),DT),r=n.getImmediate({identifier:t});return r}();i.createRoot(document.getElementById("root")).render((0,vC.jsx)("div",{children:(0,vC.jsx)(e.StrictMode,{children:(0,vC.jsx)(HT,{})})}))}()}();
//# sourceMappingURL=main.4fc84501.js.map